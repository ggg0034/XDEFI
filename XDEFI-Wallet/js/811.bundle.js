!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r=(new Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="a3490588-35aa-496d-b3c5-7edffb6535dc",e._sentryDebugIdIdentifier="sentry-dbid-a3490588-35aa-496d-b3c5-7edffb6535dc")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"28.2.2"},(self.webpackChunkxdefi_extension=self.webpackChunkxdefi_extension||[]).push([[811],{669654:(e,r,a)=>{a.a(e,(async(e,t)=>{try{a.d(r,{Z:()=>m});var n=a(785893),o=a(818117),s=a(308787),i=a(817795),d=e([s,i]);[s,i]=d.then?(await d)():d;const l=({disabled:e=!1,memo:r,setMemo:a})=>(0,n.jsx)(c,{children:(0,n.jsx)(u,{children:(0,n.jsx)(f,{children:(0,n.jsx)(i.Z,{errors:{},memo:r,setMemo:a,disabled:e})})})}),c=o.ZP.div`
  width: 100%;
`,u=(0,o.ZP)(s.FlexBox).attrs({alignItems:"flex-end",justifyContent:"center"})`
  width: calc(100% - 20px);
  padding: 0 10px;
  min-height: 50px;
`,f=(0,o.ZP)(s.FlexBox).attrs({alignItems:"center",justifyContent:"space-between"})`
  width: 100%;
`,m=l;t()}catch(e){t(e)}}))},630811:(e,r,a)=>{a.a(e,(async(e,t)=>{try{a.r(r),a.d(r,{default:()=>S});var n=a(785893),o=a(646284),s=a(691438),i=a(835534),d=a(847001),l=a(831352),c=a(177616),u=a(327194),f=a(739989),m=a(281672),p=a(230811),g=a(667294),h=a(363119),x=a(972819),w=a(162318),y=a(184698),v=a(284755),b=a(308787),I=a(519416),Z=a(25022),j=a(851892),_=a(763765),C=a(901176),M=a(24296),P=a(123226),T=e([o,i,m,x,w,y,v,b,_,C,M]);[o,i,m,x,w,y,v,b,_,C,M]=T.then?(await T)():T;const S=({transactionMsg:e})=>{var r;const{onRequestPermission:a}=(0,y.gI)(),[t,T]=(0,g.useState)(!1),S=(0,m.UW)(),k=(0,m.fU)(),{addNotification:B}=(0,x.Z)(),D=(0,m.nl)(),E=(0,m.Ni)(),{requireTxPassword:F,activeWallet:U}=(0,h.v9)((e=>({requireTxPassword:e.settings.requireTxPassword,activeWallet:e.wallets.wallets[e.wallets.activeWalletId]}))),{t:W}=(0,p.$G)("app"),N=(0,g.useMemo)((()=>k.getChainControllerById(e.chainId)),[k,e]),q=(0,g.useMemo)((()=>e.raw.params.length?e.raw.params[0]:e.raw.params),[e]),R=(0,g.useMemo)((()=>{var r;return(null==(r=e.origin)?void 0:r.url)||""}),[null==(r=e.origin)?void 0:r.url]),A=(0,g.useMemo)((()=>{var e,r;if(q.amount||q.value||"0"){return(0,l.ym)(q.amount)?c.formatUnits(null==(e=null==q?void 0:q.amount)?void 0:e.amount,null==(r=null==q?void 0:q.amount)?void 0:r.decimals).toString():c.formatUnits(u.O$.from(null==q?void 0:q.amount).toString()).toString()}return"0"}),[q.amount,q.value]),{fee:G}=(0,C.g)({chain:N,params:q}),L=(0,M.z)({chain:N,params:q}),$=()=>{f.Z.info("handleReject ",e),I.browser.runtime.sendMessage(null,{xdefiId:e.xdefiId,raw:{id:e.xdefiId,error:W("dapp_transaction.errors.reject_message")}}),D.removeMessageById(e.xdefiId),window.close()},{openDialog:J,onCloseDialog:O,handleConfirm:X}=(0,o.useConfirmDialog)((r=>{return t=void 0,n=null,o=function*(){if(f.Z.debug({method:"handleApprove"}),f.Z.debug({msg:"preMP",requireTxPassword:F}),F&&!r)return;const t=r||E.masterPassword;if(t){T(!0);try{const r=i.Z.getWalletIdWithMessage(e);yield S.approveDappsTransaction(e,r,Z.GG.Transaction,{walletPassword:t},{}),D.removeMessageById(e.xdefiId),window.close()}catch(r){if("TransportOpenUserCancelled"===(null==r?void 0:r.name))return B({title:W("dapp_transaction.errors.hardware_error"),type:"error",message:W("dapp_transaction.errors.hardware_error_description")}),a();if(null==r?void 0:r.message.includes("Invalid password"))return B({title:W("dapp_transaction.errors.invalid_password"),type:"error",message:"Invalid password, please try again"});const t=(0,j.sJ)(r);f.Z.error("Transfer error",{error:t}),B({title:W("dapp_transaction.errors.transfer_error"),type:"error",message:W((0,j.ZP)(t,s.J.Thorchain))}),f.Z.error({transactionMsg:"Error in message approval",e:r}),I.browser.runtime.sendMessage(void 0,{xdefiId:e.xdefiId,raw:{id:e.xdefiId,error:JSON.stringify(r)}})}finally{T(!1)}f.Z.info("end handleApprove")}},new Promise(((e,r)=>{var a=e=>{try{i(o.next(e))}catch(e){r(e)}},s=e=>{try{i(o.throw(e))}catch(e){r(e)}},i=r=>r.done?e(r.value):Promise.resolve(r.value).then(a,s);i((o=o.apply(t,n)).next())}));var t,n,o}));return(0,n.jsx)(P.k,{body:(0,n.jsx)(b.ScrollBars,{autoHide:!0,children:(0,n.jsxs)(b.FlexBox,{height:"100%",children:[(0,n.jsx)(o.ConfirmDialog,{open:J,onClose:O,onSubmit:X}),(0,n.jsx)(w.Z,{url:R,action:"approve",displayAmount:A,from:q.from,to:q.to||q.recipient,assetSymbol:L,defaultIcon:null!=(z=N.getConfig().image)?z:N.getConfig().fallbackImage,fee:Number(G),isTokenTransfer:!1,chainId:N.getId(),hideBack:!0}),(0,n.jsx)(_.Z,{chainId:N.getId(),params:q,method:e.raw.method}),(0,n.jsx)(v.Z,{handleConfirm:()=>X(),fee:Number(G),chainId:N.getId(),assetSymbol:L,errors:{},handleReject:$,loading:t,selectedWallet:U}),d.Z.get("ISDEBUG")&&!1]})})});var z};t()}catch(e){t(e)}}))},763765:(e,r,a)=>{a.a(e,(async(e,t)=>{try{a.d(r,{Z:()=>b});var n=a(785893),o=a(942274),s=a(148771),i=a(244431),d=a.n(i),l=a(831352),c=a(669654),u=a(739989),f=a(281672),m=a(667294),p=a(206508),g=a(308787),h=a(876777),x=a(818117),w=e([c,f,p,g]);[c,f,p,g]=w.then?(await w)():w;const y=x.ZP.div`
  width: 100%;
  border-top: 1px solid ${h.wL.black};
  padding-bottom: 20px;
  border-bottom: 1px solid ${h.wL.black};
`,v=(0,x.ZP)(g.FlexBox).attrs({alignItems:"center",flexDirection:"row",justifyContent:"space-between"})`
  padding: 0px 10px;
  box-sizing: border-box;
`,b=({params:e,chainId:r,method:a})=>{const[t,i]=(0,m.useState)({average:(0,s.XZ)(0),fast:(0,s.XZ)(0),fastest:(0,s.XZ)(0),type:o.FeeType.FlatFee}),g=(0,f.fU)().getChainControllerById(r);return(0,m.useEffect)((()=>{g.getFee().then((e=>{u.Z.debug({fees:e}),i(e)})).catch((e=>{u.Z.error(e)}))}),[e]),(0,n.jsxs)(y,{children:[(0,n.jsx)(p.xZ,{dashedLine:!0,functionType:a}),(0,n.jsx)(v,{children:(0,n.jsx)(c.Z,{fees:t,disabled:!0,amount:new(d())(e.amount.amount),memo:e.memo,setMemo:()=>{u.Z.info({method:"setMemo"})},chain:l.yp.Thorchain})})]})};t()}catch(e){t(e)}}))}}]);
//# sourceMappingURL=811.bundle.js.map