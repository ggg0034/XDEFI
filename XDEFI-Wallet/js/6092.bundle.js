!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r=(new Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="877dba1d-5ad5-429b-807d-063b35f9e5db",e._sentryDebugIdIdentifier="sentry-dbid-877dba1d-5ad5-429b-807d-063b35f9e5db")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"28.2.2"},(self.webpackChunkxdefi_extension=self.webpackChunkxdefi_extension||[]).push([[6092],{666092:(e,r,a)=>{a.a(e,(async(e,t)=>{try{a.r(r),a.d(r,{default:()=>S});var n=a(785893),o=a(831352),s=a(177616),i=a(739989),d=a(230811),l=a(363119),m=a(667294),c=a(646284),u=a(972819),f=a(691438),g=a(835534),p=a(25022),b=a(162318),h=a(184698),x=a(281672),w=a(308787),y=a(519416),v=a(851892),I=a(705975),Z=a(284755),j=a(901176),C=a(24296),k=a(123226),P=e([c,u,g,b,h,x,w,I,Z,j,C]);[c,u,g,b,h,x,w,I,Z,j,C]=P.then?(await P)():P;const S=({transactionMsg:e})=>{var r;const{t:a}=(0,d.$G)("app"),{onRequestPermission:t}=(0,h.gI)(),[P,S]=(0,m.useState)(!1),_=(0,x.UW)(),M=(0,x.fU)(),{addNotification:T}=(0,u.Z)(),D=(0,x.nl)(),N=(0,x.Ni)(),{requireTxPassword:B}=(0,l.v9)((e=>e.settings)),E=(0,l.v9)((e=>e.wallets.wallets[e.wallets.activeWalletId])),R=M.getChainControllerById(o.yp.Near),U=(0,m.useMemo)((()=>e.raw.params.length?e.raw.params[0]:e.raw.params),[e]),W=(0,m.useMemo)((()=>{var r;return(null==(r=e.origin)?void 0:r.url)||""}),[null==(r=e.origin)?void 0:r.url]),A=(0,m.useMemo)((()=>{const e=U.amount||U.value;return(0,o.ym)(e)?e.amount.toString():e||"0"}),[U.amount,U.value]),J=(0,m.useMemo)((()=>{var e,r;if(!U.amount)return"0";return(0,o.ym)(U.amount)?s.formatUnits(null==(e=null==U?void 0:U.amount)?void 0:e.amount,null==(r=null==U?void 0:U.amount)?void 0:r.decimals).toString():s.formatUnits(A).toString()}),[U.amount,A]),$=(0,C.z)({chain:R,params:U}),{fee:q}=(0,j.g)({chain:R,params:U}),z=()=>{i.Z.info("handleReject ",e),y.browser.runtime.sendMessage(null,{xdefiId:e.xdefiId,raw:{id:e.xdefiId,error:a("alert.transaction.errors.user_rejected_message_signing.message")}}),D.removeMessageById(e.xdefiId),window.close()},{openDialog:F,onCloseDialog:G,handleConfirm:O}=(0,c.useConfirmDialog)((r=>{return n=void 0,o=null,s=function*(){if(i.Z.debug({method:"handleApprove"}),i.Z.debug({msg:"preMP",requireTxPassword:B}),B&&!r)return;const n=r||N.masterPassword;if(n){S(!0);try{const r=g.Z.getWalletIdWithMessage(e);yield _.approveDappsTransaction(e,r,p.GG.Transaction,{walletPassword:n},{}),D.removeMessageById(e.xdefiId),window.close()}catch(r){if("TransportOpenUserCancelled"===(null==r?void 0:r.name))return T({title:a("alert.transaction.hardware.error.main.title"),type:"error",message:a("alert.transaction.hardware.error.main.message")}),t();if(null==r?void 0:r.message.includes("Invalid password"))return T({title:a("alert.wallet.password.error.incorrect.title"),type:"error",message:a("alert.wallet.password.error.incorrect.messages.try_again")});const n=(0,v.sJ)(r);i.Z.error("Transfer error",{error:n}),T({title:a("alert.transaction.errors.transfer.title"),type:"error",message:a((0,v.ZP)(n,f.J.Near))}),i.Z.error({transactionMsg:"Error in message approval",e:r}),y.browser.runtime.sendMessage(void 0,{xdefiId:e.xdefiId,raw:{id:e.xdefiId,error:JSON.stringify(r)}})}finally{S(!1)}i.Z.info("end handleApprove")}},new Promise(((e,r)=>{var a=e=>{try{i(s.next(e))}catch(e){r(e)}},t=e=>{try{i(s.throw(e))}catch(e){r(e)}},i=r=>r.done?e(r.value):Promise.resolve(r.value).then(a,t);i((s=s.apply(n,o)).next())}));var n,o,s}));return(0,n.jsx)(k.k,{body:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.ConfirmDialog,{open:F,onClose:G,onSubmit:O}),(0,n.jsxs)(w.ScrollBars,{autoHide:!0,children:[(0,n.jsx)(b.Z,{url:W,displayAmount:J,action:"approve",from:U.from,to:U.to||U.recipient,assetSymbol:$,defaultIcon:null!=(H=R.getConfig().image)?H:R.getConfig().fallbackImage,isTokenTransfer:!1,chainId:R.getId(),fee:Number(q),hideBack:!0}),(0,n.jsx)(I.Z,{params:U,method:e.raw.method}),(0,n.jsx)(Z.Z,{handleConfirm:()=>O(),fee:Number(q),chainId:R.getId(),assetSymbol:$,errors:{},handleReject:z,loading:P,selectedWallet:E})]})]})});var H};t()}catch(e){t(e)}}))},705975:(e,r,a)=>{a.a(e,(async(e,t)=>{try{a.d(r,{Z:()=>p});var n=a(785893),o=a(206508),s=a(308787),i=a(650511),d=a(818117),l=e([o,s]);[o,s]=l.then?(await l)():l;const m=({params:e,method:r})=>{var a,t;const s=null!=(t=null!=(a=e.transactions)?a:[e.transaction])?t:[];return(0,n.jsxs)(c,{children:[(0,n.jsx)(o.xZ,{dashedLine:!0,functionType:r}),(0,n.jsx)(f,{children:(0,n.jsx)(u,{autoHide:!0,children:s.map(((e,r)=>(0,n.jsx)(g,{children:(0,n.jsx)(i.Z,{children:JSON.stringify(e)})},r)))})}),e.memo&&(0,n.jsx)(o.ot,{errors:{},memo:e.memo,disabled:!0})]})},c=d.ZP.div`
  width: 100%;
  border-top: 1px solid ${({theme:e})=>e.colors.black};
  padding-bottom: 20px;
  border-bottom: 1px solid ${({theme:e})=>e.colors.black};
`,u=(0,d.ZP)(s.ScrollBars)`
  width: 100% !important;
  height: 162px !important;
`,f=(0,d.ZP)(s.FlexBox).attrs({alignItems:"center",justifyContent:"space-between"})`
  padding: 0px 10px;
  box-sizing: border-box;
  border-bottom: 1px dotted ${({theme:e})=>e.colors.black};
`,g=(0,d.ZP)(s.FlexBox).attrs({alignItems:"flex-start"})`
  box-sizing: border-box;

  padding: 20px 10px;
  line-break: anywhere;
`,p=m;t()}catch(e){t(e)}}))}}]);
//# sourceMappingURL=6092.bundle.js.map