!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r=(new Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="71adb0f4-0d66-4239-9bdb-e3cf23f535ae",e._sentryDebugIdIdentifier="sentry-dbid-71adb0f4-0d66-4239-9bdb-e3cf23f535ae")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"28.2.2"},(self.webpackChunkxdefi_extension=self.webpackChunkxdefi_extension||[]).push([[6736],{186736:(e,r,a)=>{a.a(e,(async(e,o)=>{try{a.r(r),a.d(r,{default:()=>M});var n=a(785893),s=a(646284),t=a(691438),i=a(835534),d=a(847001),l=a(831352),u=a(177616),c=a(327194),f=a(739989),m=a(281672),p=a(667294),g=a(230811),x=a(363119),h=a(972819),b=a(25022),w=a(162318),v=a(184698),y=a(284755),I=a(308787),_=a(519416),j=a(851892),Z=a(91058),P=a(901176),S=a(24296),C=a(123226),k=e([s,i,m,h,w,v,y,I,Z,P,S]);[s,i,m,h,w,v,y,I,Z,P,S]=k.then?(await k)():k;const M=({transactionMsg:e})=>{var r;const{onRequestPermission:a}=(0,v.gI)(),[o,k]=(0,p.useState)(!1),{t:M}=(0,g.$G)("app"),{addNotification:T}=(0,h.Z)(),B=(0,m.UW)(),D=(0,m.fU)(),E=(0,m.nl)(),W=(0,m.Ni)(),{requireTxPassword:N,activeWallet:U}=(0,x.v9)((e=>({requireTxPassword:e.settings.requireTxPassword,activeWallet:e.wallets.wallets[e.wallets.activeWalletId]}))),q=(0,p.useMemo)((()=>D.getChainControllerById(e.chainId)),[e]),F=(0,p.useMemo)((()=>e.raw.params.length?e.raw.params[0]:e.raw.params),[e]),R=(0,p.useMemo)((()=>{var r;return(null==(r=e.origin)?void 0:r.url)||""}),[null==(r=e.origin)?void 0:r.url]),A=(0,p.useMemo)((()=>{var e,r;if(!(null==F?void 0:F.amount))return"0";if((null==F?void 0:F.amount)||(null==F?void 0:F.value)||"0"){if((0,l.ym)(F.amount))return u.formatUnits(null==(e=null==F?void 0:F.amount)?void 0:e.amount,null==(r=null==F?void 0:F.amount)?void 0:r.decimals).toString()}return u.formatUnits(c.O$.from(null==F?void 0:F.amount).toString()).toString()}),[F.amount,F.value]),{fee:G,feeSymbol:L}=(0,P.g)({chain:q,params:F}),O=(0,S.z)({chain:q,params:F}),$=(0,p.useCallback)((r=>{return o=void 0,n=null,s=function*(){if(f.Z.debug({method:"handleApprove"}),f.Z.debug({msg:"preMP",requireTxPassword:N}),N&&!r)return;const o=r||W.masterPassword;if(o){k(!0);try{const r=i.Z.getWalletIdWithMessage(e);yield B.approveDappsTransaction(e,r,b.GG.Transaction,{walletPassword:o},{}),E.removeMessageById(e.xdefiId),window.close()}catch(r){if("TransportOpenUserCancelled"===(null==r?void 0:r.name))return T({title:M("dapp_transaction.errors.hardware_error"),type:"error",message:M("dapp_transaction.errors.hardware_error_description")}),a();if(null==r?void 0:r.message.includes("Invalid password"))return T({title:M("dapp_transaction.errors.invalid_password"),type:"error",message:M("dapp_transaction.errors.invalid_password_try_again")});const o=(0,j.sJ)(r);f.Z.error("Transfer error",{error:o}),T({title:M("dapp_transaction.errors.transfer_error"),type:"error",message:M((0,j.ZP)(o,t.J.Terra))}),f.Z.error({transactionMsg:"Error in message approval",e:r}),_.browser.runtime.sendMessage(void 0,{xdefiId:e.xdefiId,raw:{id:e.xdefiId,error:JSON.stringify(r)}})}finally{k(!1)}f.Z.info("end handleApprove")}},new Promise(((e,r)=>{var a=e=>{try{i(s.next(e))}catch(e){r(e)}},t=e=>{try{i(s.throw(e))}catch(e){r(e)}},i=r=>r.done?e(r.value):Promise.resolve(r.value).then(a,t);i((s=s.apply(o,n)).next())}));var o,n,s}),[U,B,E,W.masterPassword,a,N,e,M]),z=(0,p.useCallback)((()=>{f.Z.info("handleReject ",e),_.browser.runtime.sendMessage(null,{xdefiId:e.xdefiId,raw:{id:e.xdefiId,error:M("dapp_transaction.errors.reject_message")}}),E.removeMessageById(e.xdefiId),window.close()}),[E,e,M]),{openDialog:J,onCloseDialog:H,handleConfirm:Y}=(0,s.useConfirmDialog)($);return(0,n.jsx)(C.k,{body:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(I.ScrollBars,{autoHide:!0,children:(0,n.jsxs)(I.FlexBox,{height:"100%",children:[(0,n.jsx)(s.ConfirmDialog,{open:J,onClose:H,onSubmit:Y}),(0,n.jsx)(w.Z,{url:R,action:"approve",fee:Number(G),displayAmount:A,from:F.from,to:F.to,assetSymbol:O,defaultIcon:q.getConfig().image,isTokenTransfer:!1,chainId:q.getId(),hasHeader:!1,hideBack:!0}),(0,n.jsx)(Z.Z,{params:F,method:e.raw.method}),(0,n.jsx)(y.Z,{handleConfirm:()=>Y(),fee:Number(G),feeSymbol:L||O,chainId:q.getId(),assetSymbol:O,errors:{},handleReject:z,loading:o,selectedWallet:U}),d.Z.get("ISDEBUG")&&!1]})})})})};o()}catch(e){o(e)}}))},91058:(e,r,a)=>{a.a(e,(async(e,o)=>{try{a.d(r,{Z:()=>h});var n=a(785893),s=a(831352),t=a(667294),i=a(206508),d=a(308787),l=a(561277),u=a(876777),c=a(818117),Buffer=a(348764).Buffer,f=e([i,d]);[i,d]=f.then?(await f)():f;const m=c.ZP.div`
  width: 100%;
  border-top: 1px solid ${u.wL.black};
  padding-bottom: 20px;
  border-bottom: 1px solid ${u.wL.black};
`,p=(0,c.ZP)(d.FlexBox)`
  width: 100%;
  height: 162px;
  overflow: overlay;
`,g=(0,c.ZP)(d.FlexBox).attrs({alignItems:"center",flexDirection:"row",justifyContent:"space-between"})`
  padding: 0px 10px;
  box-sizing: border-box;
`,x=(0,c.ZP)(d.FlexBox).attrs({alignItems:"flex-start"})`
  box-sizing: border-box;
  padding: 20px 10px;
  line-break: anywhere;
`,h=({params:e,method:r})=>{const a=(0,t.useMemo)((()=>s.e5.SignBytes&&e.bytes?[Buffer.from(Object.values(e.bytes)).toString("hex")]:e.msgs?e.msgs:[]),[e,r]);return(0,n.jsxs)(m,{children:[(0,n.jsx)(i.xZ,{dashedLine:!0,functionType:r}),(0,n.jsx)(g,{children:(0,n.jsx)(p,{children:a.map(((e,r)=>(0,n.jsx)(x,{children:(0,n.jsx)(l.Z,{children:e})},r)))})}),e.memo&&(0,n.jsx)(i.ot,{errors:{},memo:e.memo,disabled:!0})]})};o()}catch(e){o(e)}}))}}]);
//# sourceMappingURL=6736.bundle.js.map