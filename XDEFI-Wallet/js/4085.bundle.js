!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="26f5719e-ac6d-4ebf-a4fe-9cebde22e178",e._sentryDebugIdIdentifier="sentry-dbid-26f5719e-ac6d-4ebf-a4fe-9cebde22e178")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"28.2.2"},(self.webpackChunkxdefi_extension=self.webpackChunkxdefi_extension||[]).push([[4085],{291706:(e,t,a)=>{a.a(e,(async(e,t)=>{try{var n=a(785893),r=a(667294),s=a(308787),o=a(876777),i=a(394294),l=a(230811),d=a(789643),c=e([s,d]);[s,d]=c.then?(await c)():c;const u=({label:e,entries:t,handleOnSearchChange:a,show:c,fullWidth:u=!1,setShow:h,maxHeight:p,className:g,dataTestId:f})=>{const{t:m}=(0,l.$G)("app"),y=(0,r.useRef)(null),v=(0,r.useCallback)((e=>{var t;y.current&&(null==(t=y.current)?void 0:t.contains(e.target))||(e.stopPropagation(),c&&h(!1))}),[c,h]);return(0,r.useEffect)((()=>(document.addEventListener("click",v),()=>{document.removeEventListener("click",v)})),[v]),(0,n.jsxs)(d.Z_,{ref:y,fullWidth:u,className:g,children:[(0,n.jsxs)(d.zx,{dataTestId:f,onClick:e=>{e.stopPropagation(),h(!c)},fullWidth:u,children:[(0,n.jsxs)(s.FlexBox,{alignItems:"center",justifyContent:"flex-start",flexDirection:"row",children:[(null==e?void 0:e.icon)&&(0,n.jsx)(s.FlexBox,{alignItems:"center",justifyContent:"center",flexDirection:"row",children:(0,n.jsx)(d.JO,{src:e.icon,alt:e.text})}),(0,n.jsx)(i.Z,{children:e.text})]}),(0,n.jsx)(d.Eh,{show:c?1:0,color:o.wL.white})]}),c&&(0,n.jsxs)(d.vs,{maxHeight:p,children:[a&&(0,n.jsx)(d.Gh,{children:(0,n.jsx)(s.SearchInput,{placeholder:m("general.search"),dataTestId:"searchField",onChange:e=>a(e.target.value)})}),(0,n.jsx)(d.VY,{handleOnSearchChange:a,children:t.map(((e,a)=>(0,n.jsxs)("div",{children:[(0,n.jsx)(d.kS,{children:e}),a!==t.length-1&&(0,n.jsx)("div",{style:{margin:"0 10px "},children:(0,n.jsx)(s.DashLine,{})})]},a)))})]})]})};(0,r.memo)(u);t()}catch(e){t(e)}}))},982107:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{n:()=>h});var r=a(785893),s=a(667294),o=a(818117),i=a(308787),l=a(882935),d=e([i,l]);[i,l]=d.then?(await d)():d;const c=({loading:e})=>e?(0,r.jsx)(u,{children:(0,r.jsx)(l.Z,{})}):null,u=(0,o.ZP)(i.FlexBox).attrs({alignItems:"center",justifyContent:"center"})`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);
  z-index: 9999;
`,h=(0,s.memo)(c);n()}catch(e){n(e)}}))},347227:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{F:()=>c});var r=a(785893),s=a(667294),o=a(385167),i=a(745808),l=a(582242),d=e([o]);o=(d.then?(await d)():d)[0];const c=({children:e})=>{const t=(0,s.useRef)({}),[a,n]=(0,s.useState)(!1),d=(0,s.useCallback)((()=>{n(!0)}),[]),c=(0,s.useCallback)((()=>{n(!1)}),[]);return t.current={show:d,hide:c},(0,r.jsxs)(i.Z.Provider,{value:t,children:[e,(0,r.jsx)(o.n,{loading:a}),(0,r.jsx)(l.Z,{})]})};n()}catch(e){n(e)}}))},17349:(e,t,a)=>{a.a(e,(async(e,t)=>{try{var n=a(291706),r=e([n]);n=(r.then?(await r)():r)[0],t()}catch(e){t(e)}}))},385167:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{n:()=>r.n});var r=a(982107),s=e([r]);r=(s.then?(await s)():s)[0],n()}catch(e){n(e)}}))},582242:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(818117);const r="?popup=true"===window.location.search,s=n.vJ`
  ${!r&&n.iv`
      html {
        height: 100% !important;
      }

      @font-face {
        font-family: Montserrat;
        font-weight: 700;
        src: url(../../assets/fonts/Montserrat-Bold.woff2) format('woff2'),
          url(../../assets/fonts/Montserrat-Bold.woff) format('woff');
      }

      @font-face {
        font-family: Montserrat;
        font-weight: 600;
        src: url(../../assets/fonts/Montserrat-SemiBold.woff2) format('woff2'),
          url(../../assets/fonts/Montserrat-SemiBold.woff) format('woff');
      }

      @font-face {
        font-family: Montserrat;
        font-weight: 500;
        src: url(../../assets/fonts/Montserrat-Medium.woff2) format('woff2'),
          url(../../assets/fonts/Montserrat-Medium.woff) format('woff');
      }

      @font-face {
        font-family: Montserrat;
        font-weight: 400;
        src: url(../../assets/fonts/Montserrat-Regular.woff2) format('woff2'),
          url(../../assets/fonts/Montserrat-Regular.woff) format('woff');
      }

      @font-face {
        font-family: Montserrat;
        font-weight: 300;
        src: url(../../assets/fonts/Montserrat-Light.woff2) format('woff2'),
          url(../../assets/fonts/Montserrat-Light.woff) format('woff');
      }
    `}
`},409061:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{F:()=>r.F,a:()=>s.a});var r=a(347227),s=a(255942),o=e([r]);r=(o.then?(await o)():o)[0],n()}catch(e){n(e)}}))},855192:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{X7:()=>N,cj:()=>Z,di:()=>$});var r=a(409669),s=a.n(r),o=a(847001),i=a(831352),l=a(59854),d=a.n(l),c=a(834392),u=a(739989),h=a(101668),p=a(626423),g=a(330101),f=a(623638),m=a(189556),y=a(379372),v=a(691438),w=e([y]);y=(w.then?(await w)():w)[0];var b=Math.pow,T=(e,t,a)=>new Promise(((n,r)=>{var s=e=>{try{i(a.next(e))}catch(e){r(e)}},o=e=>{try{i(a.throw(e))}catch(e){r(e)}},i=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const S=["< 15 Seconds","30 Seconds","> 30 Seconds"],P=["Fast","Average","Low"],k=["high","medium","low"],x=[99,85,70],C=e=>{switch(e){case i.yp.Avalanche:case i.yp.BinanceSmartChain:return.05;case i.yp.Arbitrum:return 15/60;case i.yp.Fantom:return 1/60;case i.yp.CronosEvm:return.1;case i.yp.Klaytn:return 1/60;case i.yp.Gnosis:return 5/60;case i.yp.CantoEvm:return.1;case i.yp.Optimism:return 2/60;default:return.25}},I=2,A=2,E=3,_=5,M=e=>!!(null==e?void 0:e.msg_type)&&void 0!==(null==e?void 0:e.fee)&&void 0!==(null==e?void 0:e.fee_for),$=e=>M(null==e?void 0:e.fixed_fee_params)&&!!(null==e?void 0:e.multi_transfer_fee),N=e=>T(void 0,null,(function*(){u.Z.debug({msg:"getEVMGasPrice",chainId:e.getId()});try{if(e.support(v.B.NativeSupport)){const t=p.hv[e.getConfig().network.chainId];if(!e.support(v.B.Eip1559))return O(e.getConfig().network.jsonRpcProviderUrl[h.G.Rpc],C(t));{const e=yield D(t);if(!Array.isArray(e))return e;{const t=e.find((e=>"Fast"===e.label));if(t)return t}}throw`getEVMGasPrice not implemented for ${e.getId()} `}return O(e.getConfig().network.jsonRpcProviderUrl[h.G.Rpc],C(e.getId()))}catch(t){return u.Z.error("getEVMGasPrice",{e:t,chainId:e.getId()}),Promise.reject(t)}})),D=e=>T(void 0,null,(function*(){try{return yield B(e)}catch(t){return u.Z.error(`fetch gas price error: ${t}`),Promise.resolve(R(j(e)))}})),Z=()=>T(void 0,null,(function*(){const e=(yield(0,g.Io)("https://bbc-dex.xdefiservices.com/api/v1/fees")).find((e=>$(e)&&"send"===(null==e?void 0:e.fixed_fee_params.msg_type)))||void 0;return((null==e?void 0:e.fixed_fee_params.fee)||0)/b(10,8)})),B=e=>T(void 0,null,(function*(){const{data:t}=yield(0,f.O)("network-only");return[m.m.High,m.m.Medium,m.m.Low].reduce(((a,n)=>{const{baseFeePerGas:r,priorityFeePerGas:s,maxFeePerGas:o}=t[e].fee[n],i=k.findIndex((e=>e===n));if(i<0)return a;const l={label:P[i],fiat:"",maxFeePerGas:o,baseFee:r,maxPriorityFeePerGas:s,processingTime:S[i],value:x[i]};return a.push(l),a}),[])})),O=(e,t)=>T(void 0,null,(function*(){const a=JSON.stringify({jsonrpc:"2.0",method:"eth_gasPrice",params:[],id:1}),n={method:"POST",url:e,headers:{"Content-Type":"application/json"},data:a};return s()(n).then((e=>{var a;u.Z.info(e.data);try{const n=null==(a=e.data)?void 0:a.result;u.Z.debug({response:e,res:n});const r=Math.max(Number(n)/y.uR,1/c.uO),s=1.1*r,o=1.5*r,i=1.2*r,l={safeLow:s,average:o,fast:i,fastest:i,gasPriceRange:{[s]:1.4*t,[o]:1.2*t,[i]:t}};return Promise.resolve(l)}catch(e){return u.Z.error(`Failed to parse: ${e}, defaults to 10`),Promise.reject(e)}})).catch((e=>(u.Z.error({msg:`fetchEthJsonRpcGasPrice error: ${e} `,error:e}),Promise.reject(e))))})),j=e=>{switch(e){case i.yp.Ethereum:case i.yp.Avalanche:return 50;case i.yp.Polygon:return 205;default:throw"Not defined default base fee for "+e}},R=(e=0)=>{const t=d()(1.125*e*1.125*1.125,I)||+o.Z.get("DEFAULT_MAX_FEE_RATE");return[{label:"Ape",fiat:"",maxFeePerGas:t,baseFee:e,maxPriorityFeePerGas:_,processingTime:"15 Seconds",value:95,fallback:!0},{label:"Fast",fiat:"",maxFeePerGas:t,baseFee:e,maxPriorityFeePerGas:E,processingTime:"30 Seconds",value:80,fallback:!0},{label:"Average",fiat:"",maxFeePerGas:t,baseFee:e,maxPriorityFeePerGas:A,processingTime:"> 30 Seconds",value:70,fallback:!0}]};n()}catch(e){n(e)}}))},379372:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{uR:()=>pe,xP:()=>fe});var r=a(177616),s=a(273472),o=a(264487),i=a(783313),l=a(409669),d=a.n(l),c=a(244431),u=a.n(c),h=a(255357),p=a(575019),g=a(847001),f=a(831352),m=a(514070),y=a(564586),v=a(644760),w=a(350144),b=a(327194),T=a(793901),S=a(82169),P=a(497050),k=a(939165),x=a(496519),C=a(168810),I=a(216440),A=a(953518),E=a(873786),_=a(256371),M=a(522933),$=a(496486),N=a(680528),D=a(882130),Z=a(851892),B=a(739989),O=a(626423),j=a(42763),R=a(556138),F=a(330101),L=a(731627),U=a(222751),G=a(605930),K=a(46461),H=a(124093),W=a(608648),V=a(730876),J=a(628790),Y=a(803418),z=a(630292),q=a(691438),X=a(99127),Buffer=a(348764).Buffer,Q=e([p,j,z]);[p,j,z]=Q.then?(await Q)():Q;var ee=Object.defineProperty,te=Object.defineProperties,ae=Object.getOwnPropertyDescriptors,ne=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,oe=Math.pow,ie=(e,t,a)=>t in e?ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,le=(e,t)=>{for(var a in t||(t={}))re.call(t,a)&&ie(e,a,t[a]);if(ne)for(var a of ne(t))se.call(t,a)&&ie(e,a,t[a]);return e},de=(e,t)=>te(e,ae(t)),ce=(e,t,a)=>(ie(e,"symbol"!=typeof t?t+"":t,a),a),ue=(e,t,a)=>new Promise(((n,r)=>{var s=e=>{try{i(a.next(e))}catch(e){r(e)}},o=e=>{try{i(a.throw(e))}catch(e){r(e)}},i=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,o);i((a=a.apply(e,t)).next())}));const he=e=>`m/44'/60'/0'/0/${e}`,pe=(oe(10,9),oe(10,9)),ge=(oe(10,18),class extends z.NL{constructor(e,t){super(t),this.masterController=e,ce(this,"provider"),ce(this,"getTokenBalanceMulti",((e,t)=>ue(this,null,(function*(){var a;try{if(!this.config.network.multicallContractAddress){return yield Promise.all(t.map((t=>ue(this,null,(function*(){const a=yield this.getTokenBalance(t,e);return{address:t,balance:a}})))))}{const n=yield(0,s.m)(t.filter((e=>!!e)).map((t=>({call:["balanceOf(address)(uint256)",e],returns:[[`${t}`,e=>e]],target:t}))),{multicallAddress:this.config.network.multicallContractAddress,rpcUrl:this.config.network.jsonRpcProviderUrl.rpc});if(null==(a=n.results)?void 0:a.transformed)return Object.keys(n.results.transformed).map((e=>({address:e,balance:n.results.transformed[e]})))}}catch(e){return B.Z.info("getTokenBalanceMulti error",e),o.Tb(e),Promise.reject(e)}return[]})))),ce(this,"isSignMessage",(e=>{const{method:t}=e.raw;return ge.methodToSignScreen.includes(t)})),ce(this,"prePareUnsignedTx",((e,t,a=!1)=>ue(this,null,(function*(){var n;const s=Number(this.config.network.chainId),{gasLimit:o,gasPrice:i,nonce:l,maxFeePerGas:d,maxPriorityFeePerGas:c}=t,u={chainId:s,data:e.data,gasLimit:o,gasPrice:i,nonce:l,to:e.toAddress,type:0,value:a?b.O$.from(e.amount.toString()):r.parseUnits(e.amount.toString(),null!=(n=null==e?void 0:e.decimals)?n:18)};if(t.maxFeePerGas&&(u.gasPrice=void 0,u.maxFeePerGas=t.maxFeePerGas,u.type=2,u.maxPriorityFeePerGas=t.maxPriorityFeePerGas),e.isToken){const t=this.getContract(e.address,f.Yn.Erc20),a=yield t.populateTransaction.transfer(e.toAddress,r.parseUnits(e.amount.toString(),String(e.decimals)));u.value="0x0",u.data=a.data,u.to=a.to}else if(e.isNFT){const t=this.getContract(e.address,e.contractType);let a;switch(e.contractType){case f.Yn.Erc721:a=yield t.populateTransaction[N.Ds](e.fromAddress,e.toAddress,e.nftId,{gasLimit:o,gasPrice:i,nonce:l,maxFeePerGas:d,maxPriorityFeePerGas:c});break;case f.Yn.Erc1155:a=yield t.populateTransaction[N.Df](e.fromAddress,e.toAddress,e.nftId,1,[],{gasLimit:o,gasPrice:i,nonce:l,maxFeePerGas:d,maxPriorityFeePerGas:c});break;default:throw(0,K.t)("app:controller_errors.invalid_token_standard")}u.data=a.data,u.to=a.to,u.value=a.value}return B.Z.info({baseTx:u}),u})))),ce(this,"getKlaytnTransactions",(()=>ue(this,null,(function*(){var e,t;const{activeWalletId:a,wallets:n}=j.Z.getState().wallets,r=null==(t=null==(e=null==n?void 0:n[a])?void 0:e.chainData[this.config.id])?void 0:t.address;if(!r)return;const s=yield L.Z.getTransactions(r);yield(0,h.h4)({walletId:a,chainId:this.config.id,transactions:s.transactions,blockNumber:s.latestBlockNumber})})))),ce(this,"getAuroraTransactions",(()=>ue(this,null,(function*(){var e,t,a,n,s;const{activeWalletId:o,wallets:i}=j.Z.getState().wallets,l=null==(a=null==(t=null==(e=null==i?void 0:i[o])?void 0:e.chainData)?void 0:t[this.config.id])?void 0:a.address;if(!l)return;const d=yield(0,H.u)(l),c=d.data.address.transactions.edges.map((e=>{var t;const a=e.node;return{from:a.fromAddressHash,to:a.toAddressHash,action:"send",hash:a.hash,amount:(0,r.formatEther)(a.value),status:a.error?"failed":a.status?"successful":"pending",symbol:"ETH",isSender:(null==(t=a.fromAddressHash)?void 0:t.toLowerCase())===(null==l?void 0:l.toLowerCase()),date:new Date,chainId:this.config.id,data:a.input,contractAddress:"",tokenSymbol:"ETH"}}));yield(0,h.h4)({walletId:o,chainId:this.config.id,transactions:[...c],blockNumber:null!=(s=null==(n=d.data.address.transactions.edges[0])?void 0:n.node.blockNumber)?s:0})})))),ce(this,"getCantoTransactions",(()=>ue(this,null,(function*(){var e,t,a,n,s;const{activeWalletId:o,wallets:i}=j.Z.getState().wallets,l=null==(a=null==(t=null==(e=null==i?void 0:i[o])?void 0:e.chainData)?void 0:t[this.config.id])?void 0:a.address;if(!l)return;const d=yield(0,W.j)(l),c=d.data.address.transactions.edges.map((e=>{var t;const a=e.node;return{from:a.fromAddressHash,to:a.toAddressHash,action:"send",hash:a.hash,amount:(0,r.formatEther)(a.value),status:a.error?"failed":a.status?"successful":"pending",symbol:"CANTO",isSender:(null==(t=a.fromAddressHash)?void 0:t.toLowerCase())===(null==l?void 0:l.toLowerCase()),date:new Date,chainId:this.getId(),data:a.input,contractAddress:"",tokenSymbol:"CANTO"}}));yield(0,h.h4)({walletId:o,chainId:this.config.id,transactions:[...c],blockNumber:null!=(s=null==(n=d.data.address.transactions.edges[0])?void 0:n.node.blockNumber)?s:0})})))),ce(this,"parseAndSaveEVMTransactions",((e,t,a,n,r,s)=>ue(this,null,(function*(){try{const o=`${e}/api?module=account&action=txlist&address=${t}&startblock=0&endblock=${s}`,i=yield(0,F.Io)(o),l=(0,F.Sg)(i),d=(0,F.bn)(l,t,this.masterController.chains.getChainControllerById(n)),c=this.eVMDetailsHelper(d),u=yield(0,F.Io)(`${e}/api?module=account&action=tokentx&address=${t}&startblock=${a}&endblock=${s}`),p=(0,F.Sg)(u),g=(0,F.g7)(p,t,n),f=this.eVMDetailsHelper(g),m=yield(0,F.Io)(`${e}/api?module=account&action=txlistinternal&address=${t}&startblock=${a}&endblock=${s}`),y=(0,F.Sg)(m),v=(0,F.pq)(y,t,n),w=this.eVMDetailsHelper(v);(c.length||f.length||w.length)&&(yield(0,h.h4)({walletId:r,chainId:n,transactions:[...c,...f,...w],blockNumber:s}))}catch(e){if(e&&"invalid response"===(null==e?void 0:e.message))return;throw e}})))),ce(this,"getInteractedErc20",(e=>ue(this,null,(function*(){return(0,X.Eq)(`${this.getConfig().network.explorer}/api?module=account&action=tokentx&address=${e}&startblock=0&endblock=99999999999&page=1&&sort=desc`)}))));try{this.provider=new T.c(this.config.network.jsonRpcProviderUrl.rpc,{name:this.config.network.chainId,chainId:Number(this.config.network.chainId),ensAddress:g.Z.get("ENS_CONTRACT_ADDRESS")})}catch(e){this.provider=new T.c(this.config.network.jsonRpcProviderUrl.rpc)}}getOwnedTokens(e){return Promise.resolve([])}reloadJsonRpcProvidersUrls(){this.config.network.defaultRpc&&(this.config.network.jsonRpcProviderUrl[R.NodeUrlKey.Rpc]=this.overridesDefaults(this.config.network.defaultRpc),this.setProvider())}getProvider(){return this.provider}setProvider(){try{const e=Number(this.getConfig().network.chainId);this.provider=new T.c(this.config.network.jsonRpcProviderUrl.rpc,{name:this.config.shortName,chainId:e})}catch(e){this.provider=new T.c(this.config.network.jsonRpcProviderUrl.rpc)}}overridesDefaults(e){const{chains:t}=j.Z.getState().chains,a=t.find((e=>e.id===this.getId()));return a&&!(0,M.fp)(a.network.jsonRpcProviderUrl[R.NodeUrlKey.Rpc])?a.network.jsonRpcProviderUrl[R.NodeUrlKey.Rpc]:e[R.NodeUrlKey.Rpc]}checkCustomRpcUrl(e,t){return ue(this,null,(function*(){const a=this.getConfig().network.chainId;if(!a)throw`checkCustomRpcUrl not supported for ${e} `;let n;try{const{chainId:e}=yield new S.r(t[R.NodeUrlKey.Rpc]).getNetwork();n=e}catch(e){throw o.Tb(e),`Failed to retrieve chainId for ${t[R.NodeUrlKey.Rpc]} in ${this.config.longName}`}if(n!==Number(a))throw`${t[R.NodeUrlKey.Rpc]} has chainID mismatch with expected ${a} and actual ${n}`}))}static validateAddress(e){return i.validate(e,"eth","prod")}validateAddress(e){return ge.validateAddress(e)}initClient(e=new V.H(g.Z.get("EXAMPLE_BIP39")),t=0){return P.Wallet.fromMnemonic(e.toString(),he(t)).connect(this.provider)}initClientWithPrivateKey(e){return new P.Wallet(e).connect(this.provider)}getAddress(e){if(!e.seed&&!e.pk||e.pk&&e.seed)throw"getAddress: Wrong arguments";if(e.pk){return{address:new P.Wallet(e.pk).address}}if(e.seed){return{address:P.Wallet.fromMnemonic(e.seed.seed.toString(),he(e.seed.walletIndex)).address}}throw"getAddress: Wrong arguments"}getPrivateKey(e){if(!e.seed)throw"getPrivateKey: Wrong arguments";if(e.seed){const t=P.Wallet.fromMnemonic(e.seed.toString(),he(e.walletIndex));return k.isHexString(t.privateKey)?t.privateKey.slice(2):t.privateKey}throw"getPrivateKey: wrong arguments"}getAddressByWallet(e){return j.Z.getState().wallets.wallets[e].chainData[this.getId()].address}getTokenBalance(e,t){return new x.CH(e,y,this.provider).balanceOf(t)}getBalance(e){return ue(this,null,(function*(){try{const t=yield this.provider.getBalance(e);return(0,r.formatEther)(t)}catch(e){throw B.Z.error(`ethClient getBalance ${e}`),o.Tb(e),e}}))}getChainBalanceStateUpdate(e){return new Promise(((t,a)=>{const{wallets:n}=j.Z.getState().wallets,s=this.getId(),{address:i}=n[e].chainData[s];try{this.provider.getBalance(i).then((a=>{t({walletId:e,chainId:s,chainBalance:String((0,r.formatEther)(a))})})).catch((e=>{B.Z.error(`EVMBasedController getBalance ${e} for`),o.Tb(e),a(e)}))}catch(e){o.Tb(e),a(e)}}))}getTokenBalancesStateUpdate(e){return new Promise(((t,a)=>{const{wallets:n}=j.Z.getState().wallets,r=this.config.id;if(void 0===n[e].chainData[r])return a(`Chain ${this.config.id} does not exists for specified wallet`);const{address:s}=n[e].chainData[r],i=n[e].chainData[r].tokens;try{if(i&&Object.keys(i).length>0){const n=Object.values(i).reduce(((e,t)=>t.address?[...e,t.address]:[...e]),[]);B.Z.debug({tokenAddresses:n}),this.getTokenBalanceMulti(s,n).then((a=>{const n=(null==a?void 0:a.length)?a:[],s=le({},j.Z.getState().balances[e].chains[r].tokens);n.forEach((e=>{var t;const a=null==(t=e.address)?void 0:t.toLowerCase();s[a]?s[a]=de(le({},s[a]),{balance:e.balance}):s[a]={balance:e.balance}})),t({walletId:e,chainId:r,tokenBalances:s})})).catch((e=>{B.Z.error(`Failed to fetch erc20 tokens balances ${e}`),o.Tb(e),a(e)}))}else t({walletId:e,chainId:r,tokenBalances:{}})}catch(e){B.Z.error(e),o.Tb(e),a(e)}}))}updateBalance(e){return void 0===!j.Z.getState().wallets.wallets[e].chainData[this.getId()]?Promise.reject():new Promise(((t,a)=>{try{Promise.allSettled([this.getChainBalanceStateUpdate(e),this.getTokenBalancesStateUpdate(e)]).then((([e,n])=>{"fulfilled"===e.status?"fulfilled"===n.status?t({chainBalanceStateUpdate:e.value,tokenBalancesStateUpdate:n.value}):(B.Z.error({msg:`${this.getType()} error updating token balances`,err:n}),t({chainBalanceStateUpdate:e.value})):(B.Z.error(`${this.getType()} error updating chain balance`),a(`${this.getType()} error updating chain balance`))}))}catch(e){B.Z.error(e),o.Tb(e),a(e)}}))}getTransactionReceipt(e){return this.provider.getTransactionReceipt(e)}ethereumKeystoreInit(e,t,a,n){return ue(this,null,(function*(){const r=yield(0,J.WR)(t,a),s=this.initClient(r,n);return s.address!==C.getAddress(e)?Promise.reject(`from address not matching wallet ${s.address} != ${e}`):s}))}estimateTx(e,t,a,n){return ue(this,null,(function*(){const r=this.initClient();try{return(yield r.provider.estimateGas({from:e,to:t,value:a,data:n})).mul(100*Number(g.Z.get("FACTOR_ESTIMATE"))).div(100)}catch(e){throw Z.vy.GasLimit}}))}estimateAssetTx(e,t,a,n,r,s){return ue(this,null,(function*(){if(!s)throw(0,K.t)("app:controller_errors.unable_to_send_nft");if(a&&!this.validateAddress(a))return Promise.reject((0,K.t)("app:controller_errors.invalid_address"));if(!this.validateAddress(e))return Promise.reject((0,K.t)("app:controller_errors.invalid_erc_contract_address"));try{const o=this.getContract(e,s);switch(s){case f.Yn.Erc20:return o.estimateGas.transfer(a,n,{from:t});case f.Yn.Erc721:return o.estimateGas[N.Ds](t,a,r.nftId);case f.Yn.Erc1155:return o.estimateGas[N.Df](t,a,r.nftId,1,[],{from:t});default:throw(0,K.t)("app:controller_errors.invalid_token_standard")}}catch(e){throw Z.vy.GasLimit}}))}addPendingTransaction(e){return ue(this,null,(function*(){const{activeWalletId:t}=j.Z.getState().wallets;yield(0,h.pr)({walletId:t,chainId:this.getId(),transactions:this.eVMDetailsHelper([e])})}))}buildCustomTxMeta(e,t,a,n){return{from:t||"",to:a||"",action:"send",amount:(null==n?void 0:n.toString())||"0",hash:e.hash,status:"pending",isSender:!0,date:new Date,chainId:this.config.id,icon:this.config.image,symbol:this.config.tokenSymbol,contractAddress:e.contractAddress}}getNonce(e=""){return this.getTransactionCount(e)}getTransactionCount(e){return new Promise(((t,a)=>this.provider.getTransactionCount(e,"pending").then((e=>{B.Z.debug({txCount:e}),t(e)})).catch((e=>{B.Z.info(e),a(e)}))))}getTransactionByHash(e){return new Promise(((t,a)=>this.provider.getTransaction(e).then((e=>{B.Z.debug({tx:e}),t(e)})).catch((e=>{B.Z.info(e),a(e)}))))}static decodeErr(e){const t=new TextDecoder;let a=e.body||e;try{const n=t.decode(e.body);a=JSON.parse(n),B.Z.info("respErr",a)}catch(e){B.Z.error(`Failed to parse: ${e}`)}return a}eVMDetailsHelper(e){var t;try{const{activeWalletId:a,wallets:n}=j.Z.getState().wallets,s=null==(t=n[a].chainData[this.getId()])?void 0:t.tokens;return e.map((e=>{const t=b.O$.from(e.amount||0);let a=(0,r.formatEther)(t),n=this.getConfig().tokenSymbol,o=null,i=e.to,l="";const d=(0,D.y4)(null==e?void 0:e.tokenSymbol,null==e?void 0:e.data)||!!(null==e?void 0:e.contractAddress),c=this.masterController.assets.getTopTokensByChain(this.config.id);if(e.contractAddress||d){o=c&&c.find((t=>{var a,n,r,s;return(null==(a=t.address)?void 0:a.toUpperCase())===(null==(n=e.contractAddress)?void 0:n.toUpperCase())||(null==(r=t.address)?void 0:r.toUpperCase())===(null==(s=e.to)?void 0:s.toUpperCase())}))||s&&Object.values(s).find((t=>{var a,n,r,s;return(null==(a=t.address)?void 0:a.toUpperCase())===(null==(n=e.contractAddress)?void 0:n.toUpperCase())||(null==(r=t.address)?void 0:r.toUpperCase())===(null==(s=e.to)?void 0:s.toUpperCase())}))||null;const d=(null==o?void 0:o.decimals)||18;if(n=(null==o?void 0:o.symbol)||e.symbol||this.config.tokenSymbol,a=r.formatUnits(t,d),!e.contractAddress){const[t,n]=(0,D.A$)(e.data||"");i=t,a=r.formatUnits(n||0,d)}(null==o?void 0:o.image)&&(l=null==o?void 0:o.image)}return this.getConfig().tokenSymbol!==n&&l||(l=this.getConfig().fallbackImage),de(le({},e),{icon:l,symbol:n,amount:a,to:i})}))}catch(e){return B.Z.info("ETH -> Error",e),[]}}personalSignKeyStore(e,t,a,n){return ue(this,null,(function*(){const r=yield this.ethereumKeystoreInit(t,a.keystore,n,a.walletIndex);(0,_.isHexString)(e)||(e=k.hexlify(I.Y0(e)));const s=k.arrayify(e);return r.signMessage(s)}))}personalSignHW(e,t,a,n){return ue(this,null,(function*(){(0,_.isHexString)(t)||(t=k.hexlify(I.Y0(t)));const r=yield(0,Y.D)(e).signETHPersonalMessage(n.derivationPath,n.walletIndex,t),s=P.verifyMessage(k.arrayify(t),r);if(s.toLocaleLowerCase()!==a.toLocaleLowerCase())throw`Not matching sender address!: recovered: ${s}, in file: ${a}`;return r}))}approveDappTransaction(e,t,a,n){return ue(this,null,(function*(){var r,s,i,l,d,c;const{wallets:h}=j.Z.getState().wallets,g=h[t],f=e.raw;B.Z.info({msg:"ethereumApproveTx",jsonrpcpayload:f,walletId:t,_dappMessage:e,_overrides:n});let m=f.params.length?f.params[0]:f.params;n&&(m=Object.assign(m,n),m.nonce&&(m.nonce=`0x${new(u())(m.nonce).toString(16)}`));const y=m.gasPrice&&`0x${new(u())(m.gasPrice||"0").multipliedBy(1e9).toString(16)}`||void 0,v=m.maxPriorityFeePerGas&&`0x${new(u())(m.maxPriorityFeePerGas.toFixed(9)||"0").multipliedBy(1e9).toString(16)}`||void 0,b=m.maxFeePerGas&&`0x${new(u())(m.maxFeePerGas.toFixed(9)||"0").multipliedBy(1e9).toString(16)}`||void 0,T=`0x${new(u())(m.gasLimit||m.gas||"0").toString(16)}`,S=this.masterController.chains.getChainControllerById(e.chainId),P=S.getConfig("network.defaultRpc"),x={chainId:e.chainId?null==(s=null==(r=(0,p.o6)(Number(S.getConfig().network.chainId),P))?void 0:r.ethereumProvider)?void 0:s.chainId:void 0,from:m.from&&C.getAddress(m.from),gasPrice:y,gasLimit:T,to:m.to&&C.getAddress(m.to)||void 0,value:m.value,nonce:m.nonce,data:m.data};let E;switch(m.maxFeePerGas&&(x.gasPrice=void 0,x.type=2,x.maxFeePerGas=b,x.maxPriorityFeePerGas=v),B.Z.debug({txInput:m,_dappMessage:e}),g.walletInfo.type){case R.WalletType.Keystore:case R.WalletType.PkKeystore:if(!a)throw"approveDappTransaction: you must specify walletCredentials";if(g.walletInfo.type===R.WalletType.Keystore){const e=g.walletInfo.data;E=yield this.ethereumKeystoreInit(m.from,e.keystore,null==a?void 0:a.walletPassword,e.walletIndex)}else{if(g.walletInfo.type!==R.WalletType.PkKeystore)throw"Not implemented";{const e=g.walletInfo.data,t=a.walletPassword;B.Z.info({walletData:e});const n=yield(0,J.Jy)(e.keystore,t),r=J.Si.fromString(n);E=this.initClientWithPrivateKey(r.nspk.value.pk)}}switch(f.method){case"eth_sendTransaction":return B.Z.info("sendTransaction checksumed ",x),E.sendTransaction(x).then((e=>ue(this,null,(function*(){try{yield this.addPendingTransaction(this.buildCustomTxMeta(e,x.from,x.to,null==x?void 0:x.value))}catch(e){B.Z.error({e})}return e.hash}))));case"eth_sign":{const e=(0,U.toBuffer)(m.data),t=(0,U.toBuffer)(E.privateKey),a=(0,U.ecsign)(e,t);return(0,O.dk)(a)}case"personal_sign":{(0,_.isHexString)(m.data)||(m.data=k.hexlify(I.Y0(m.data)));const e=k.arrayify(m.data);return E.signMessage(e)}case"eth_signTypedData":case"eth_signTypedData_v2":case"eth_signTypedData_v3":case"eth_signTypedData_v4":{const e=(0,$.isString)(m.data)?JSON.parse(m.data):m.data;if("V3"===m.version||"V4"===m.version)if(null==(i=e.domain)?void 0:i.chainId){if(Number(e.domain.chainId)!==Number(x.chainId))throw"Chain ID provided in the message doesn't match your current chain ID"}else e.domain.chainId=x.chainId;return(0,w.signTypedMessage)(Buffer.from(E.privateKey.substring(2),"hex"),{data:e},m.version)}case"eth_signTransaction":return E.signTransaction(x);default:throw o.Tb(`Message type not supported for ethereum: ${f.method}`),`Message type not supported: ${f.method}`}case R.WalletType.Ledger:case R.WalletType.Trezor:{let e,t,a;E=this.initClient();const n={to:x.to,chainId:x.chainId,gasPrice:x.gasPrice,gasLimit:x.gasLimit,value:x.value,nonce:Number(x.nonce),data:x.data};m.maxFeePerGas&&(n.gasPrice=void 0,n.maxFeePerGas=b,n.type=2,n.maxPriorityFeePerGas=v);const r=g.walletInfo.data;switch(f.method){case"eth_sendTransaction":if(B.Z.info("sendTransaction checksumed ",n),e=yield(0,Y.D)(g.walletInfo.type).signEVMTransaction(r.derivationPath,r.walletIndex,n),t=A.serialize(n,e),B.Z.info({signedTx:t}),a=A.parse(t),(null==(l=a.from)?void 0:l.toLocaleLowerCase())!==r.address.toLocaleLowerCase())throw`Not matching sender address!: recovered: ${a.from}, in file: ${r.address}`;return E.provider.sendTransaction(t).then((e=>ue(this,null,(function*(){try{yield this.addPendingTransaction(this.buildCustomTxMeta(e,x.from,x.to,null==x?void 0:x.value))}catch(e){B.Z.error({e})}return e.hash}))));case"personal_sign":case"eth_sign":{(0,_.isHexString)(m.data)||(m.data=k.hexlify(I.Y0(m.data)));const e=yield(0,Y.D)(g.walletInfo.type).signETHPersonalMessage(r.derivationPath,r.walletIndex,m.data);if(m.from.toLocaleLowerCase()!==r.address.toLocaleLowerCase())throw`Not matching sender address!: recovered: ${m.from}, in file: ${r.address}`;return B.Z.debug({sig:e}),e}case"eth_signTypedData":case"eth_signTypedData_v2":case"eth_signTypedData_v3":case"eth_signTypedData_v4":if("V1"===m.version){const e=m.data;B.Z.info({data:e});return yield(0,Y.D)(g.walletInfo.type).signEIP712MessageLegacy(r.derivationPath,r.walletIndex,e)}if("V3"===m.version||"V4"===m.version){const e=JSON.parse(m.data);if(null==(d=e.domain)?void 0:d.chainId){if(Number(e.domain.chainId)!==Number(x.chainId))throw"Chain ID provided in the message doesn't match your current chain ID"}else e.domain.chainId=x.chainId;B.Z.debug({parsed:e});const t=yield(0,Y.D)(g.walletInfo.type).signEIP712Message(r.derivationPath,r.walletIndex,e,"V4"===m.version);return B.Z.debug({sig:t}),t}throw`approveDappTransaction not able to sign provided message using wallet ${g.walletInfo.type}`;case"eth_signTransaction":if(e=yield(0,Y.D)(g.walletInfo.type).signEVMTransaction(r.derivationPath,r.walletIndex,n),t=A.serialize(n,e),B.Z.info({signedTx:t}),a=A.parse(t),(null==(c=a.from)?void 0:c.toLocaleLowerCase())!==r.address.toLocaleLowerCase())throw`Not matching sender address!: recovered: ${a.from}, in file: ${r.address}`;return t;default:throw o.Tb(`Message type not supported for ethereum: ${f.method}`),`Message type not supported: ${f.method}`}}default:throw`approveDappTransaction not working for wallet of type ${g.walletInfo.type}`}}))}validateTx(e){const t={};return""===e?t.toAddress="Address is required":this.validateAddress(e)||(t.toAddress="Address is not valid."),t}getWallet(e){const{wallets:t}=j.Z.getState().wallets;return t[e]}sendTx(e,t,a,n=!1){return ue(this,null,(function*(){var s;const{wallets:o}=j.Z.getState().wallets,i=o[t],l=b.O$.from(`0x${new(u())(e.gasLimit).toString(16)}`),d=e.gasPrice&&b.O$.from(`0x${new(u())(Number(e.gasPrice).toFixed(9)).multipliedBy(1e9).toString(16)}`),c=e.maxFeePerGas?b.O$.from(`0x${new(u())(e.maxFeePerGas.toFixed(9)).multipliedBy(1e9).toString(16)}`):void 0,h={maxPriorityFeePerGas:e.maxPriorityFeePerGas?b.O$.from(`0x${new(u())(e.maxPriorityFeePerGas.toFixed(9)).multipliedBy(1e9).toString(16)}`):void 0,maxFeePerGas:c,gasPrice:d,gasLimit:l,nonce:b.O$.from(e.nonce).toNumber()},p=this.initClient(g.Z.get("EXAMPLE_BIP39"));let f="";switch(i.walletInfo.type){case R.WalletType.Keystore:{if(!a)throw`Missing credentials for wallet ${t}`;const r=i.walletInfo.data,s=a.walletPassword,o=yield this.ethereumKeystoreInit(e.fromAddress,r.keystore,s,r.walletIndex),l=yield this.prePareUnsignedTx(e,h,n);f=yield o.signTransaction(l);break}case R.WalletType.Ledger:case R.WalletType.Trezor:const r=i.walletInfo.data,o=yield this.prePareUnsignedTx(e,h,n);f=yield this.signWithHW(i.walletInfo.type,o,r);const l=A.parse(f);if((null==(s=l.from)?void 0:s.toLocaleLowerCase())!==r.address.toLocaleLowerCase())throw`Not matching sender address!: recovered: ${l.from}, in file: ${r.address}`;break;case R.WalletType.PkKeystore:{if(!a)throw`Missing credentials for wallet ${t}`;const r=i.walletInfo.data,s=a.walletPassword,o=yield(0,J.Jy)(r.keystore,s),l=J.Si.fromString(o),d=this.initClientWithPrivateKey(l.nspk.value.pk),c=yield this.prePareUnsignedTx(e,h,n);f=yield d.signTransaction(c);break}default:throw`sendTx not supported for wallet of type ${i.walletInfo.type}`}return B.Z.info({signedTx:f}),p.provider.sendTransaction(f).then((t=>ue(this,null,(function*(){B.Z.info({res:t});try{yield this.addPendingTransaction(this.buildCustomTxMeta(de(le({},t),{contractAddress:null==e?void 0:e.address,decimals:null==e?void 0:e.decimals}),e.fromAddress,e.toAddress,r.parseUnits(e.amount.toString(),String(e.decimals))))}catch(e){B.Z.error({msg:"failed to add to pending list",e})}return t.hash}))))}))}signWithHW(e,t,a){return ue(this,null,(function*(){const n=yield(0,Y.D)(e).signEVMTransaction(a.derivationPath,a.walletIndex,t),r={v:b.O$.from(n.v).toNumber(),r:(0,_.hexlify)(n.r),s:(0,_.hexlify)(n.s)};return A.serialize(t,r)}))}getFeeData(e){return ue(this,null,(function*(){const e=this.provider;return yield e.getFeeData()}))}getFeeHistory(){return ue(this,null,(function*(){var e;const t=`${g.Z.get("BLOCK_HISTORY")}`;return(0,F.Io)(t+(null==(e=f.g5.Mainnet)?void 0:e.toUpperCase())).then((e=>e.value))}))}getTransactions(){return ue(this,null,(function*(){try{switch(O.hv[this.config.network.chainId]){case f.yp.Aurora:yield this.getAuroraTransactions();break;case f.yp.CantoEvm:yield this.getCantoTransactions();break;case f.yp.Klaytn:yield this.getKlaytnTransactions();break;default:yield this.getEvmEtherscanTransactions()}}catch(e){throw e}}))}getEvmEtherscanTransactions(){return ue(this,null,(function*(){var e,t,a;const{activeWalletId:n,wallets:r}=j.Z.getState().wallets;let s=(yield(0,h.f1)(n,this.config.id)).blockNumber;s||(s=0);const o=null==(a=null==(t=null==(e=null==r?void 0:r[n])?void 0:e.chainData)?void 0:t[this.config.id])?void 0:a.address;try{if(o){const e=yield this.provider.getBlockNumber();if(e===s)return;const t=this.getConfig().network.explorer;t&&(yield this.parseAndSaveEVMTransactions(t,o,s,this.config.id,n,e))}}catch(e){throw e}}))}getContract(e,t){const a=this.initClient(g.Z.get("EXAMPLE_BIP39"));switch(t){case f.Yn.Erc20:return new x.CH(e,y,a.provider);case f.Yn.Erc721:return new x.CH(e,v,a.provider);case f.Yn.Erc1155:return new x.CH(e,m,a.provider);default:throw Error((0,K.t)("app:controller_errors.contract_abi_not_found",{address:e,tokenStandard:t}))}}getCustomRPCs(){return ue(this,null,(function*(){try{const e=g.Z.get("EVM_REGISTRY_URL");return d().get(e).then((e=>e.data.map((e=>{var t,a,n,r,s,o,i,l,d,c;const u=(0,G.Ot)(q.J.Evm,e.chainId),h=[q.B.Ledger,q.B.Trezor,q.B.CustomToken];(null==(t=null==e?void 0:e.features)?void 0:t.find((e=>"EIP1559"===(null==e?void 0:e.name))))&&h.push(q.B.Eip1559);const p=null==(n=null==(a=e.explorers)?void 0:a[0])?void 0:n.url;return{id:u,type:q.J.Evm,shortName:null!=(s=null!=(r=e.shortName)?r:e.chain)?s:e.name,longName:e.name,chainSymbol:e.nativeCurrency.symbol,tokenSymbol:e.nativeCurrency.symbol,image:e.icon&&(0,O.bg)(e.icon)||"",fallbackImage:this.getConfig().fallbackImage,decimals:null!=(o=e.nativeCurrency.decimals)?o:18,derivationPath:this.config.derivationPath,features:h,privateKey:this.config.privateKey,network:{explorer:p||void 0,transaction:p?`${null==(l=null==(i=e.explorers)?void 0:i[0])?void 0:l.url}/tx/`:void 0,address:p?`${null==(c=null==(d=e.explorers)?void 0:d[0])?void 0:c.url}/address/`:void 0,defaultRpc:{rpc:e.rpc.length?e.rpc[0]:g.Z.get("JSONRPC_ETH_MAINNET")},chainId:e.chainId,jsonRpcProviderUrl:{rpc:e.rpc.length?e.rpc[0]:g.Z.get("JSONRPC_ETH_MAINNET")},multicallContractAddress:void 0,tokenApproveChecker:g.Z.get("REVOKE_CASH_URL")}}}))))}catch(e){return B.Z.error("Error while getting custom EVMs",{error:e}),[]}}))}getCustomChainConfigByChainId(e){return ue(this,null,(function*(){try{return(yield this.getCustomRPCs()).find((t=>t.network.chainId.toString()===e))}catch(e){throw B.Z.error("Error while getting custom EVMs",{error:e}),e}}))}getFees(){return ue(this,null,(function*(){throw"getFees not implemented for EVM"}))}getDefaultTokens(){return this.config.network.chainId===z.m1.Ethereum?[{symbol:"USDC",address:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48"},{symbol:"XDEFI",address:"0x72b886d09c117654ab7da13a14d603001de0b777"}]:[]}});let fe=ge;ce(fe,"methodToSignScreen",["personal_sign","eth_sign","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4"]),ce(fe,"gasLimitValidator",(e=>new(u())(e).toNumber()>=1.5*g.Z.get("DEFAULT_GAS_LIMIT"))),ce(fe,"getABI",(e=>fetch(`${g.Z.get("PROXYSCAN_API_HOST")}/${g.Z.get("ETHERSCAN_BASEURL_MAINNET")}/api?module=contract&action=getsourcecode&address=${e}`).then((e=>e.json())))),ce(fe,"getSignatures",(e=>fetch(`${g.Z.get("BYTE_DIRECTORY_HOST")}/api/v1/signatures/?hex_signature=${e}`).then((e=>e.json())))),ce(fe,"paramToString",((e,t)=>{switch(t){case"address":return e;case"uint256":return e.toString();case"address[]":return e.join("\n");default:return String(e)}})),ce(fe,"decryptParams",((e,t,a)=>{var n,r;const s=(null==e?void 0:e.textSignature)||"",o=(null==s?void 0:s.split("(")[0])||"",i=((null==(n=null==s?void 0:s.split("(")[1])?void 0:n.split(")")[0])||"").split(","),l=(null==(r=null==t?void 0:t.filter((e=>e.name===o))[0])?void 0:r.inputs)||[];B.Z.info("abi inputs ===> ",l);let d=[];try{d=E.$.decode(i,k.hexDataSlice(a.data,4))}catch(e){B.Z.error({e})}return B.Z.info("decoded ===> ",d),{type:o,params:d.map(((e,t)=>{var a;return{uid:t,name:(null==(a=l[t])?void 0:a.name)||"",type:i[t],data:ge.paramToString(e,i[t])}}))}})),n()}catch(e){n(e)}}))},831352:(e,t,a)=>{a.d(t,{GK:()=>g,MS:()=>f,OH:()=>u,VO:()=>l,VX:()=>r,Yn:()=>m,c$:()=>i,e5:()=>d,g5:()=>h,hq:()=>o,pD:()=>c,tV:()=>s,yp:()=>p});var n=a(148771),r=(e=>(e.RequestAccounts="request_accounts",e))(r||{}),s=(e=>(e.SignTransaction="sign_transaction",e.RequestAccountsAndKeys="request_accounts_and_keys",e.GetUnspentUtxos="get_unspent_utxos",e.SignPsbt="sign_psbt",e.Transfer="transfer",e))(s||{}),o=(e=>(e.Transfer="transfer",e.SignTransaction="sign_transaction",e))(o||{}),i=(e=>(e.SignTransaction="sign_transaction",e.Transfer="transfer",e))(i||{}),l=(e=>(e.Deposit="deposit",e.Transfer="transfer",e.SignTransaction="sign_transaction",e))(l||{}),d=(e=>(e.Info="info",e.Connect="connect",e.Sign="sign",e.SignBytes="sign-bytes",e.Post="post",e))(d||{}),c=(e=>(e.Transfer="transfer",e.SignTransaction="sign_transaction",e))(c||{}),u=(e=>(e.Transfer="transfer",e.SignTransaction="sign_transaction",e))(u||{}),h=(e=>(e.Mainnet="mainnet",e.Testnet="testnet",e))(h||{}),p=(e=>(e.Ethereum="ethereum",e.Avalanche="avalanche",e.Fantom="fantom",e.Arbitrum="arbitrum",e.Binance="binance",e.BinanceSmartChain="binancesmartchain",e.Polygon="polygon",e.Bitcoin="bitcoin",e.Litecoin="litecoin",e.BitcoinCash="bitcoincash",e.Thorchain="thorchain",e.Terra="terra",e.Dogecoin="dogecoin",e.Solana="solana",e.Aurora="aurora",e.Near="near",e.Cosmoshub="cosmoshub",e.Osmosis="osmosis",e.Axelar="axelar",e.Juno="juno",e.Crescent="crescent",e.Cronos="cronos",e.CronosEvm="cronosEVM",e.Kava="kava",e.Akash="akash",e.Stargaze="stargaze",e.Kujira="kujira",e.SeiTestnet="seitestnet",e.Stride="stride",e.Mars="mars",e.Optimism="optimism",e.CantoEvm="cantoEVM",e.Klaytn="klaytn",e.Gnosis="gnosis",e.BitcoinTestnet="bitcointestnet",e))(p||{});const g={ethereum:"Ethereum",avalanche:"Avalanche",fantom:"Fantom",arbitrum:"Arbitrum",binance:"BinanceChain",binancesmartchain:"BinanceSmartChain",polygon:"Polygon",bitcoin:"Bitcoin",litecoin:"Litecoin",bitcoincash:"BitcoinCash",thorchain:"THORChain",terra:"Terra",dogecoin:"Dogecoin",solana:"Solana",aurora:"Aurora",near:"Near",cosmoshub:"Cosmos",osmosis:"Osmosis",axelar:"Axelar",juno:"JUNO",crescent:"Crescent",cronos:"Cronos",kava:"Kava",akash:"Akash",stargaze:"Stargaze",kujira:"Kujira",cronosEVM:"CronosEVM",seitestnet:"SeiTestnet",stride:"Stride",mars:"MarsProtocol",optimism:"Optimism",cantoEVM:"CantoEVM",klaytn:"Klaytn",gnosis:"Gnosis",bitcointestnet:"BitcoinTestnet"},f=e=>(0,n.XZ)(e.amount,e.decimals);var m=(e=>(e.Erc20="ERC20",e.Erc721="ERC721",e.Erc1155="ERC1155",e))(m||{})},834392:(e,t,a)=>{a.d(t,{DF:()=>i,Ju:()=>c,UX:()=>l,uO:()=>d});var n=a(244431),r=a.n(n),s=a(771341),o=Math.pow;const i=6,l=2,d=6,c=new(r())(1).div(o(10,i));s.JE,s.k0,s.kf,s.JP,s.TI},25022:(e,t,a)=>{a.d(t,{uT:()=>n});var n=(e=>(e.TokensInWallets="tokens in wallets",e.SendAssetSuccess="send asset success",e.SendAssetFailed="send asset failed",e.SwapSucceeded="swap broadcast succeeded",e.SwapFailed="swap broadcast failed",e.SwapCanceledSwap="Swap Canceled Swap",e.SwapQuoteRequested="Swap Quote Received",e.SwapQuoteRequestFailed="Swap Quote Request Failed",e.SwapSourceTokenSelected="Swap Source Token Selected",e.SwapDestTokenSelected="Swap Destination Token Selected",e.SwapTradesRequestSucceeded="Swap Trades Request Succeeded",e.SwapTradesRequestFailed="Swap Trades Request Failed",e.SwapModalOpened="Swap Modal Opened",e.OpenedExtension="open extension",e.Installed="extension installed",e.RestoreByRecoveryCode="restored wallet by recovery code",e.RestoreBySecretPhrase="restored wallet by seed phrase",e.RestoreByKeystore="restored wallet by keystore json",e.RestoreByPk="restored wallet by private key",e.CreateNewWallet="create new wallet",e.AddTokenToWallet="add tokens to wallet",e.ConnectToDapp="connected to dapp",e.ApproveDappTransaction="approve dapp transaction",e.MainSendClicked="main send clicked",e.MainAddressesClicked="main addresses clicked",e.MainBuyClicked="main buy clicked",e.AssetSendClicked="asset send clicked",e.AssetReceiveClicked="asset receive clicked",e.AssetBuyClicked="asset buy clicked",e.CopyAddress="wallet address copied",e.ToggledPrioritise="toggled prioritise",e.ToggledAnonMetrcs="toggled anonymous metrics",e.ChangedSlippage="changed slippage",e.ToggledSwapSettings="toggled swap settings",e.ReleaseNotesLinkClicked="release notes link clicked",e.OnboardingTc="t & c checked",e.OnboardingHardwareWallet="onboarding hardware wallet",e.OnboardingNewHotWallet="onboarding  new hot wallet",e.OnboardingLegacyWallet="onboarding legacy wallet",e.OnboardingComplete="onboarding complete",e.AssetsRefined="assets refined",e.CustomChainAdded="custom chain added",e.Locked="wallet locked",e.DetailsClicked="asset details clicked",e))(n||{})},626423:(e,t,a)=>{a.d(t,{Bw:()=>U,C6:()=>I,Hy:()=>k,J$:()=>K,NU:()=>E,RK:()=>$,WG:()=>R,WU:()=>N,XL:()=>_,YO:()=>x,Zb:()=>G,bg:()=>O,c4:()=>D,dk:()=>W,hv:()=>F,hz:()=>C,ix:()=>Z,mY:()=>L,pr:()=>A,qN:()=>j,r0:()=>B});var n=a(942274),r=a(831352),s=a(435161),o=a.n(s),i=a(556138),l=a(216558),d=a(489396),c=a(691438),u=a(222751),h=a(977710),Buffer=a(348764).Buffer,p=Object.defineProperty,g=Object.defineProperties,f=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,w=(e,t,a)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,b=(e,t)=>{for(var a in t||(t={}))y.call(t,a)&&w(e,a,t[a]);if(m)for(var a of m(t))v.call(t,a)&&w(e,a,t[a]);return e},T=(e,t)=>g(e,f(t));const S="https://imaginary.xdefi.services",P=`${S}/insecure/resize:fit:500:500:0/gravity:ce/plain/`;function k(e,t){const a=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(e))}`,n=document.createElement("a");n.setAttribute("href",a),n.setAttribute("download",`${t}.json`),document.body.appendChild(n),n.click(),n.remove()}function x(e){let t="";const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<e;n++)t+=a.charAt(Math.floor(62*Math.random()));return t}const C=e=>{let t=0;return o()(e,(({label:e})=>{const a=e.match(/Account (\d+)$/);if(a){const e=Number(a[1]);t=Math.max(t,e)}})),t+1},I=e=>{const t=[];return o()(Object.keys(e),(a=>{const n=e[a];if(n.walletInfo.type===i.WalletType.Keystore){0===n.walletInfo.data.walletIndex&&t.push(n)}else if((0,l.C)(n.walletInfo.type)){0===n.walletInfo.data.walletIndex&&t.push(n)}})),t.length+1},A=e=>e.split(".").pop(),E=e=>{const t=A(e);switch(null==t?void 0:t.toLowerCase()){case"m4v":case"avi":case"mpg":case"mp4":return!0}return!1};function _(e){switch(e){case r.g5.Mainnet:return n.Network.Mainnet;case r.g5.Testnet:return n.Network.Testnet;default:throw"Network not supported"}}const M=(e,t)=>Object.keys(e).filter((a=>e[a]===t));function $(e="",t,a=!1){var n;if(!t||!t.breakdown||!t.breakdown.length)return(null==(n=null==t?void 0:t.displayProps)?void 0:n.label)||e;const r=`${t.breakdown.map((e=>{var t;return null==(t=e.context)?void 0:t.symbol})).join("/")} LP`;return a?function(e,t=14,a=6){return e.length>t?`${e.substring(0,a+2)}...${e.substring(e.length-a)}`:e}(r):r}const N=e=>e&&JSON.parse(JSON.stringify(e)),D=e=>{const t=t=>Object.values(e.chainData[t].tokens).reduce(((e,t)=>(e[t.id]=t,e)),{}),a=Object.keys(e.chainData).reduce(((a,n)=>(e.chainData[n]&&(a[n]=T(b({},e.chainData[n]),{tokens:t(n)})),a)),{});return T(b({},e),{chainData:a})},Z=e=>{let t=e;return/^https?:\/\//i.test(t)||(t=`http://${t}`),t},B=e=>e.replace(/^https?:\/\//,""),O=e=>E(e)?e:e.startsWith("http")?e.startsWith(S)?e:`${P}${encodeURIComponent(e)}`:e,j=e=>(0,l.C)(e.walletInfo.type),R=(e,t)=>{let a;return M(F,e.getId()).map((e=>isNaN(Number(e))?e:Number(e)))&&e.support(c.B.Nft)&&(a=t.length||0),a},F={1:r.yp.Ethereum,10:r.yp.Optimism,25:r.yp.CronosEvm,56:r.yp.BinanceSmartChain,100:r.yp.Gnosis,137:r.yp.Polygon,250:r.yp.Fantom,7700:r.yp.CantoEvm,8217:r.yp.Klaytn,42161:r.yp.Arbitrum,43114:r.yp.Avalanche,1313161554:r.yp.Aurora,"cosmoshub-4":r.yp.Cosmoshub,"akashnet-2":r.yp.Akash,"axelar-dojo-1":r.yp.Axelar,"crescent-1":r.yp.Crescent,"crypto-org-chain-mainnet-1":r.yp.Cronos,"juno-1":r.yp.Juno,"kava_2222-10":r.yp.Kava,"kaiyo-1":r.yp.Kujira,"mars-1":r.yp.Mars,"osmosis-1":r.yp.Osmosis,"stargaze-1":r.yp.Stargaze,"atlantic-2":r.yp.SeiTestnet,"stride-1":r.yp.Stride,"bitcoin-mainnet":r.yp.Bitcoin,"bitcoin-testnet":r.yp.BitcoinTestnet,litecoin:r.yp.Litecoin,dogecoin:r.yp.Dogecoin,bitcoincash:r.yp.BitcoinCash,binance:r.yp.Binance,thorchain:r.yp.Thorchain,"mainnet-beta":r.yp.Solana,"phoenix-1":r.yp.Terra,near:r.yp.Near},L=T(b({},F),{7e3:"zetachain"}),U=e=>{const t=M(F,e);if(0===t.length)throw`ChainId ${e} is not supported`;return t[0]},G=(e,t)=>{const a=h.tP[e];d.Z.config.setBech32Prefix({accAddr:a,accPub:a+"pub",valAddr:a+"valoper",valPub:a+"valoperpub",consAddr:a+"valcons",consPub:a+"valconspub"});const n=new d.Z.proto.cosmos.crypto.secp256k1.PubKey({key:Uint8Array.from(Buffer.from(t,"hex"))});return d.Z.AccAddress.fromPublicKey(n).toAccAddress().toString()},K=e=>e.reduce(((e,t)=>(e[t]=!0,e)),{}),H=(e,t)=>{let a=e;for(;a.length<t;)a=`0${a}`;return a},W=({v:e,r:t,s:a})=>{const n=(0,u.fromSigned)(t),r=(0,u.fromSigned)(a),s=H((0,u.toUnsigned)(n).toString("hex"),64),o=H((0,u.toUnsigned)(r).toString("hex"),64),i=(0,u.stripHexPrefix)((0,u.intToHex)(e));return(0,u.addHexPrefix)(s.concat(o,i)).toString()}}}]);
//# sourceMappingURL=4085.bundle.js.map