!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a67ead35-b7d4-4ff3-9d3a-2b7d186507fe",e._sentryDebugIdIdentifier="sentry-dbid-a67ead35-b7d4-4ff3-9d3a-2b7d186507fe")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"28.2.2"},(()=>{"use strict";var e,t,r,a,n,o,s,i,l,c={234130:(e,t,r)=>{r.d(t,{_:()=>i});var a=r(876777),n=r(818117),o=r(667294);const s=n.ZP.a`
  color: ${a.wL.white};
`,i={b:o.createElement("strong",null),strong:o.createElement("strong",null),ol:o.createElement("ol",null),li:o.createElement("li",null),h3:o.createElement("h3",null),h4:o.createElement("h4",null),p:o.createElement("p",null),Link:o.createElement(s,null)}},310666:(e,t,r)=>{r.a(e,(async(e,t)=>{try{r(785893);var a=r(308787),n=r(876777),o=r(818117),s=e([a]);a=(s.then?(await s)():s)[0];(0,o.ZP)(a.FlexBox)`
  height: 100%;

  ol {
    counter-reset: item;

    & > li {
      display: block;
      position: relative;
    }

    li:before {
      content: counters(item, '.') '.';
      counter-increment: item;
      position: absolute;
      margin-right: 100%;
      right: 10px; /* space between number and text */
    }
  }
`,o.ZP.a`
  color: ${n.wL.white};
`,(0,o.ZP)(a.FlexBox)`
  color: ${n.wL.white};
  height: 510px;

  //Need to revert changes because of <CssReset /> used in onboarding
  > div,
  p,
  ol,
  li,
  ul,
  h1,
  h2,
  h3,
  h4,
  h5 {
    margin: revert;
    padding: revert;
  }
`;t()}catch(e){t(e)}}))},457817:(e,t,r)=>{r.a(e,(async(e,t)=>{try{var a=r(785893),n=r(667294),o=r(771341),s=r(308787),i=r(165852),l=r(561277),c=r(108363),d=r(876777),u=r(818117),p=r(191140),h=e([s,p]);[s,p]=h.then?(await h)():h;var g=Object.defineProperty,f=Object.defineProperties,m=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b=(e,t)=>{for(var r in t||(t={}))w.call(t,r)&&v(e,r,t[r]);if(y)for(var r of y(t))x.call(t,r)&&v(e,r,t[r]);return e},C=(e,t)=>f(e,m(t)),S=(e,t)=>{var r={};for(var a in e)w.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&y)for(var a of y(e))t.indexOf(a)<0&&x.call(e,a)&&(r[a]=e[a]);return r};const P=({Icon:e,notification:t,onClose:r})=>{const{title:n,message:d,link:u,id:h,linkName:g}=t,{isClosing:f,setIsClosing:m,doNotClose:y,ref:w}=(0,p.Z)(r);return(0,a.jsx)(s.Portal,{id:`notification-${h}`,children:(0,a.jsxs)(A,{isClosing:f,"data-testid":"notificationBar",ref:w,children:[!y&&(0,a.jsx)(F,{start:!f}),(0,a.jsxs)(D,{children:[(0,a.jsxs)(s.FlexBox,{flexDirection:"row",alignItems:"center",gridGap:8,children:[e,(0,a.jsx)(s.FlexBox,{maxWidth:"92%",children:(0,a.jsx)(c.Z,{dataTestId:"notificationBar__title",children:n})})]}),(0,a.jsx)(N,{onClick:()=>{m(!0)},"data-testid":"closeIconContainer",children:(0,a.jsx)(o.Tw,{})})]}),(!!d||!!u)&&(0,a.jsxs)(s.FlexBox,{flexDirection:"column",children:[d&&(0,a.jsx)(l.Z,{dataTestId:"notificationBar__message",overflow:"hidden",wordWrap:"break-word",children:d}),u&&(0,a.jsx)($,{onClick:()=>window.open(u,"_blank","noopener,noreferrer"),children:(0,a.jsx)(i.Z,{dataTestId:"notificationBar__link",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",children:null!=g?g:u})})]})]})})},I=e=>{var t=S(e,[]);return(0,a.jsx)(P,C(b({},t),{Icon:(0,a.jsx)(o.IG,{})}))},k=e=>{var t=S(e,[]);return(0,a.jsx)(P,C(b({},t),{Icon:(0,a.jsx)(o.$u,{})}))},Z=e=>{var t=S(e,[]);return(0,a.jsx)(P,C(b({},t),{Icon:(0,a.jsx)(s.CircularProgress,{color:d.wL.babyBlue,width:16,height:16})}))},j=e=>{var t=S(e,[]);return(0,a.jsx)(P,C(b({},t),{Icon:(0,a.jsx)(o.vU,{width:16,height:16})}))},T=e=>{var t=e,{type:r="success"}=t,n=S(t,["type"]);switch(r){case"success":default:return(0,a.jsx)(I,b({},n));case"error":return(0,a.jsx)(k,b({},n));case"loading":return(0,a.jsx)(Z,b({},n));case"warning":return(0,a.jsx)(j,b({},n))}};(0,n.memo)(T);const O=u.F4`
  from {
    width: 0%;
  }

  to {
    width: 100%;
  }
`,_=u.F4`
  from {
    transform: translate3d(0, 100%, 0);
    visibility: visible;
  }

  to {
    transform: translate3d(0, 0, 0);
  }
`,B=u.F4`
  from {
    transform: translate3d(0, 0, 0);
  }

  to {
    visibility: hidden;
    transform: translate3d(0, 100%, 0);
  }
`,D=u.ZP.div`
  position: sticky;
  top: 0;
  background-color: ${d.wL.nightOcean};
  display: flex;
  justify-content: space-between;
  align-items: center;
`,A=(0,u.ZP)(s.FlexBox).attrs({gridGap:8})`
  width: 100vw;
  max-height: 240px;
  overflow: auto;
  background-color: ${d.wL.nightOcean};
  animation: ${({isClosing:e})=>e?u.iv`
          ${B} 0.2s cubic-bezier(0.3, 0.0, 0.8, 0.15)
        `:u.iv`
          ${_} 0.4s  cubic-bezier(0.05, 0.7, 0.1, 1)
        `};
  position: fixed;
  bottom: 0;
  left: 0;
  z-index: 9999;
  padding: 16px;
  padding-left: 8px;
`,F=u.ZP.div`
  position: absolute;
  height: 2px;
  background-color: ${d.wL.babyBlue};
  width: 100%;
  top: 0;
  left: 0;
  animation: ${({start:e})=>e?u.iv`
          ${O} 5s linear;
        `:void 0};
`,N=(0,u.ZP)(s.FlexBox)`
  cursor: pointer;
`,$=u.ZP.div`
  cursor: pointer;
  max-width: 360px;
`;t()}catch(e){t(e)}}))},686133:(e,t,r)=>{r.a(e,(async(e,a)=>{try{r.d(t,{Z:()=>m});var n=r(785893),o=r(667294),s=r(147735),i=r(646284),l=r(771341),c=r(308787),d=r(230811),u=r(556138),p=r(379134),h=r(465142),g=e([s,i,c,p,h]);[s,i,c,p,h]=g.then?(await g)():g;const f=({hasControls:e=!0})=>{var t,r,a,o,g,f;const{handleCloseShowDappConnectionModal:m,dappConnectModalWalletId:y,showDappConnectionModal:w,handleSelect:x,handleRowClick:v,showDappsScreen:b,hasControlAndIsAuthenticated:C,activeWalletId:S,wallets:P,showAccountSelect:I,handleClickShowDappsScreen:k,handleClickAccountSelect:Z,handleStopPropagation:j,currentDapp:T,showControlPanel:O,setShowControlPanel:_,handleLockIconClick:B,chainIcon:D,profilePic:A,isAccountSelectClosing:F,isDappsScreenClosing:N,activeWallet:$}=(0,h.Z)({hasControls:e}),{t:K}=(0,d.$G)("app");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(p.Pz,{children:[(0,n.jsx)(p.gM,{children:C&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Qc,{children:(0,n.jsx)(c.AvatarButton,{walletIcon:(0,n.jsx)(c.WalletIcon,{type:null!=(r=null==(t=null==$?void 0:$.walletInfo)?void 0:t.type)?r:u.WalletType.Keystore,imported:null!=(g=null==(o=null==(a=null==$?void 0:$.walletInfo)?void 0:a.data)?void 0:o.imported)&&g,size:24}),image:A,label:null==(f=P[S])?void 0:f.label,open:I,onMouseDown:j,onClick:Z,dataTestId:"accountBtn"})}),(0,n.jsxs)(p.LI,{children:[(0,n.jsx)(c.AvatarButton,{image:(null==T?void 0:T.favicon)||null,label:K("top_header.dapps"),open:b,onMouseDown:j,onClick:k,dataTestId:"dappsBtn",chainIcon:D}),(0,n.jsx)(c.IconButton,{dataTestId:"lockBtn",onClick:B,icon:(0,n.jsx)(l.i5,{}),variant:c.IconButtonVariant.Rounded})]})]})}),(0,n.jsx)(s.Z,{open:O,close:()=>_(!1)}),y&&(0,n.jsx)(i.DappNotConnectedDialog,{open:w,onClose:m,walletId:y})]}),I&&(0,n.jsx)(i.AccountSelect,{handleSelect:x,handleRowClick:v,isClosing:F}),b&&(0,n.jsx)(i.DappScreen,{isClosing:N})]})},m=(0,o.memo)(f);a()}catch(e){a(e)}}))},115105:(e,t,r)=>{r.a(e,(async(e,a)=>{try{r.d(t,{Z:()=>w});var n=r(785893),o=r(305381),s=r(278155),i=r(945192),l=r(818117),c=r(308787),d=r(646284),u=r(876777),p=e([c,d]);[c,d]=p.then?(await p)():p;const h=(0,l.ZP)(c.FlexBox).attrs({alignItems:"center",justifyContent:"space-evenly",alignContent:"center"})`
  height: 100%;
  width: 100%;
  position: absolute;
  background-color: ${u.wL.black};
  overflow: hidden;
`,g=(0,l.ZP)(c.FlexBox).attrs({alignItems:"center",justifyContent:"flex-start",flexDirection:"column"})`
  width: 400px;
  height: 100%;
  max-height: 600px;
  overflow: hidden;
  padding: 0 8px;
  box-sizing: border-box;
  display: flex;
  text-align: center;
  overflow: hidden;
`,f=(0,l.ZP)(c.FlexBox).attrs({alignItems:"center",flexDirection:"column"})`
  width: 100%;
  box-sizing: border-box;
  flex: 1;
  z-index: 1;
`,m=l.ZP.img`
  position: absolute;
`,y=l.ZP.img.attrs({src:o.toString(),alt:"logo",dataTestid:"logo"})`
  margin-top: 28px;
  width: 187px;
  height: 88px;
  z-index: 1;
`,w=({children:e,loading:t=!1})=>(0,n.jsx)(h,{children:(0,n.jsx)(g,{children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m,{src:i.toString()}),(0,n.jsx)(y,{}),(0,n.jsx)(d.Loader,{})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m,{src:s.toString()}),(0,n.jsx)(y,{}),(0,n.jsx)(f,{children:e})]})})});a()}catch(e){a(e)}}))},716792:(e,t,r)=>{r.a(e,(async(e,a)=>{try{r.d(t,{l:()=>m});r(785893),r(739989),r(814401),r(561277),r(458038);var n=r(667294),o=(r(230811),r(363119)),s=r(996974),i=r(646284),l=r(18544),c=r(972819),d=r(835534),u=(r(522933),r(281672)),p=(r(771341),r(308787)),h=(r(729154),r(876777),r(519416),r(851892),r(935527)),g=e([i,l,c,d,u,p,h]);[i,l,c,d,u,p,h]=g.then?(await g)():g;const f=["https://dashboard.xdefi.io","https://staking.xdefi.io","https://app.xdefi.io","https://app-beta.xdefi.io"],m=()=>{var e;const t=(0,s.TH)(),r=(0,u.UW)(),a=(0,o.v9)((e=>e.dappsMessages.messages)),i=(0,n.useMemo)((()=>{if(!t.search)return a[0];const e=new URLSearchParams(t.search).get("xdefiId");return a.find((t=>t.xdefiId.toString()===e))||a[0]}),[a,t]),l=(0,n.useMemo)((()=>{var e,t;return!(null==(t=null==(e=null==i?void 0:i.origin)?void 0:e.tab)?void 0:t.url)||!f.some((e=>{var t,r,a;return null==(a=null==(r=null==(t=null==i?void 0:i.origin)?void 0:t.tab)?void 0:r.url)?void 0:a.startsWith(e)}))}),[i]),c=i&&(null==(e=r.chains.getChainControllerById(null==i?void 0:i.chainId))?void 0:e.isSignMessage(i))&&l&&["eth_sign","signMessage"].includes(i.raw.method);return{dappMessage:i,messages:a,isDangerousSignMessage:c}};a()}catch(e){a(e)}}))},280760:(e,t,r)=>{r.a(e,(async(e,a)=>{try{r.d(t,{Z:()=>I});var n=r(785893),o=r(667294),s=r(230811),i=r(646284),l=r(18544),c=r(972819),d=r(628790),u=r(281672),p=r(308787),h=r(876777),g=r(818117),f=r(519416),m=r(716792),y=r(164778),w=r(941106),x=r(450784),v=r(814237),b=e([i,l,c,u,p,m,y,w,x,v]);[i,l,c,u,p,m,y,w,x,v]=b.then?(await b)():b;const C=()=>{const{addNotification:e}=(0,c.Z)(),t=(0,u.nl)(),r=(0,u.i_)(),a=(0,u.fU)(),{dappMessage:h}=(0,m.l)(),[g,b]=(0,o.useState)(!1),{t:C}=(0,s.$G)("app"),I=null==h?void 0:h.raw.params.accounts;(0,o.useEffect)((()=>{h&&I||setTimeout((()=>window.close()),1e3)}),[h]);const k=(0,o.useCallback)((()=>{return n=void 0,o=null,s=function*(){b(!0);try{for(const e of I){const n=new d.Si({chain:a.getChainControllerById(h.chainId).getType(),value:{pk:e.privateKey}});yield r.addPkWallet(e.accountId,n),t.removeMessageById(null==h?void 0:h.xdefiId),a.getChainControllerById(h.chainId).updateAllBalance()}window.close()}catch(t){e({title:C("import_account.failed_import_account"),type:"error"}),b(!1)}},new Promise(((e,t)=>{var r=e=>{try{i(s.next(e))}catch(e){t(e)}},a=e=>{try{i(s.throw(e))}catch(e){t(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,a);i((s=s.apply(n,o)).next())}));var n,o,s}),[b,a,r,h,e]),Z=(0,o.useCallback)((()=>{f.browser.runtime.sendMessage(null,{xdefiId:null==h?void 0:h.xdefiId,raw:{id:null==h?void 0:h.xdefiId,error:"XDEFI: user rejected account import"}}).finally((()=>{window.close(),t.removeMessageById(null==h?void 0:h.xdefiId)}))}),[t]),{openDialog:j,onCloseDialog:T,handleConfirm:O}=(0,l.Z)(k);return h&&I?(0,n.jsxs)(S,{children:[(0,n.jsx)(i.ConfirmDialog,{open:j,onClose:T,onSubmit:k}),(0,n.jsx)(x.h,{message:h}),(0,n.jsx)(P,{children:I.map((({accountId:e,privateKey:t},r)=>(0,n.jsx)(y.m,{accountId:e,privateKey:t},r)))}),(0,n.jsx)(w.$_,{loading:g,onApprove:()=>O(),onDecline:()=>Z()})]}):(0,n.jsxs)(v.g,{children:[(0,n.jsx)("span",{children:C("import_account.no_pending_account_imports")}),(0,n.jsx)(p.CircularProgress,{})]})},S=(0,g.ZP)(p.FlexBox).attrs({flexDirection:"column",justifyContent:"space-between"})`
  width: 100%;
  height: 100%;
  position: fixed;
  color: ${h.wL.white};
  background-color: ${h.wL.black};
  box-sizing: border-box;
`,P=(0,g.ZP)(p.FlexBox).attrs({flexDirection:"column",flex:"1 1 auto"})`
  row-gap: 24px;
  padding: 0px 12px 24px 12px;
  overflow: auto;
`,I=C;a()}catch(e){a(e)}}))},164778:(e,t,r)=>{r.a(e,(async(e,a)=>{try{r.d(t,{m:()=>d});var n=r(785893),o=r(308787),s=r(818117),i=r(108363),l=r(561277),c=e([o]);o=(c.then?(await c)():c)[0];const d=({accountId:e,privateKey:t})=>(0,n.jsxs)(u,{children:[(0,n.jsx)(i.Z,{children:e}),(0,n.jsx)(l.Z,{children:t})]}),u=(0,s.ZP)(o.FlexBox).attrs({flexDirection:"column",flex:"0 0 auto"})`
  background: ${({theme:e})=>e.colors.mineShaft};
  padding: 8px 16px;
  width: 100%;
  gap: 8px;
  border-radius: 8px;
  box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15),
    0px 1px 2px rgba(0, 0, 0, 0.3);
  word-break: break-all;
`;a()}catch(e){a(e)}}))},941106:(e,t,r)=>{r.a(e,(async(e,a)=>{try{r.d(t,{$_:()=>d});var n=r(785893),o=r(308787),s=r(818117),i=r(729154),l=r(230811),c=e([o]);o=(c.then?(await c)():c)[0];const d=({loading:e,onApprove:t,onDecline:r})=>{const{t:a}=(0,l.$G)("app");return(0,n.jsxs)(u,{children:[(0,n.jsx)(p,{onClick:r,fullWidth:!0,children:(0,n.jsx)(i.Z,{children:a("general.reject")})}),(0,n.jsx)(h,{disabled:e,onClick:t,fullWidth:!0,children:(0,n.jsx)(i.Z,{children:a("import_account.import_account")})})]})},u=(0,s.ZP)(o.FlexBox).attrs({flexDirection:"row"})`
  gap: 16px;
  padding: 16px;
  background: #252829;
  box-shadow: 0px -1px 3px 1px rgba(0, 0, 0, 0.15),
    0px -1px 2px rgba(0, 0, 0, 0.3);
`,p=(0,s.ZP)(o.SecondaryButton)``,h=(0,s.ZP)(o.PrimaryButton)``;a()}catch(e){a(e)}}))},450784:(e,t,r)=>{r.a(e,(async(e,a)=>{try{r.d(t,{h:()=>h});var n=r(785893),o=r(667294),s=r(230811),i=r(281672),l=r(308787),c=r(818117),d=r(108363),u=r(346539),p=e([i,l]);[i,l]=p.then?(await p)():p;const h=({message:e})=>{const t=(0,i.fU)(),r=(0,o.useMemo)((()=>t.getChainControllerById(e.chainId)),[t,e.chainId]),{t:a}=(0,s.$G)("app");return(0,n.jsxs)(g,{children:[(0,n.jsxs)(f,{children:[(0,n.jsx)("img",{src:r.getConfig().image,height:"44"}),(0,n.jsx)(d.Z,{textAlign:"center",children:r.getConfig().shortName})]}),(0,n.jsxs)(u.Z,{children:[a("import_account.message")," "]})]})},g=(0,c.ZP)(l.FlexBox).attrs({alignItems:"center"})`
  row-gap: 16px;
  margin: 32px 70px 24px 70px;
  padding: 12px 12px 0px 12px;
`,f=(0,c.ZP)(l.FlexBox).attrs({})`
  row-gap: 8px;
`;a()}catch(e){a(e)}}))},814237:(e,t,r)=>{r.a(e,(async(e,a)=>{try{r.d(t,{g:()=>i});var n=r(308787),o=r(818117),s=e([n]);n=(s.then?(await s)():s)[0];const i=(0,o.ZP)(n.FlexBox).attrs({display:"flex",alignItems:"center",justifyContent:"center"})`
  position: fixed;
  top: 0px;
  left: 0px;
  right: 0px;
  bottom: 0px;
  z-index: 1300;
  background: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(4px);
`;a()}catch(e){a(e)}}))},11351:(e,t,r)=>{r.a(e,(async(e,t)=>{try{var a=r(785893),n=(r(324889),r(870446),r(353789)),o=r(667294),s=r(712439),i=r(257865),l=r(620745),c=r(363119),d=r(639711),u=r(42763),p=r(678603),h=r(753894),g=r(646284),f=r(876777),m=r(17045),y=r(818117),w=r(280760),x=e([n,u,g,w]);[n,u,g,w]=x.then?(await x)():x;const v=document.getElementById("app-import-account-root"),b=(0,l.s)(v),C=[h.Z],S=new m.yh({portName:"XDEFI-EXTENSION"});(0,m.md)(S,...C);const P=y.vJ`
 body * {
    box-sizing: border-box;
    transition: background-color 300ms;
    
    &::-webkit-scrollbar {
    background-color: transparent;
    width: 5px;
    };
   
    &::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, 0.2);
    border-radius: 5px;
    height: 30px;
  };
  
  &::-webkit-scrollbar-corner {
    background-color: transparent;
  }
}
  
  body input[type='range'] {
    width: 100%;
    height: 2px;
    cursor: pointer;
    accent-color: ${f.wL.blue};
  }
`;S.ready().then((()=>{b.render((0,a.jsx)(c.zt,{store:S,children:(0,a.jsx)(p.r,{loading:(0,a.jsx)(n.og,{loading:!0}),persistor:u.D,children:(0,a.jsx)(I,{})})}))}));const I=()=>{const e=(0,c.v9)((e=>{var t,r;return null!=(r=null==(t=null==e?void 0:e.settings)?void 0:t.theme)?r:f.$T.Dark}));return(0,o.useEffect)((()=>{document.body.classList.toggle("theme-dark",!0)}),[]),(0,a.jsx)(y.f6,{theme:(0,f.Q2)(e),children:(0,a.jsx)(g.ScreenSpinnerProvider,{children:(0,a.jsx)(s.W,{backend:i.PD,children:(0,a.jsx)(o.Suspense,{fallback:(0,a.jsx)(n.og,{loading:!0}),children:(0,a.jsxs)(d.UT,{children:[(0,a.jsx)(P,{}),(0,a.jsx)(w.Z,{})]})})})})})};t()}catch(e){t(e)}}))},143831:(e,t,r)=>{var a=r(785893),n=r(667294),o=Object.defineProperty,s=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const p=n.forwardRef((function(e,t){const r=e.color;return(0,a.jsx)("svg",(n=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({width:"14",height:"11",viewBox:"0 0 14 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"data-testid":"checkIcon"},e),s(n,i({children:(0,a.jsx)("path",{d:"M4.79079 9.84954L12.8808 1.75955C12.9855 1.6699 13.0705 1.55958 13.1305 1.43552C13.1905 1.31145 13.2243 1.17632 13.2296 1.0386C13.2349 0.90088 13.2117 0.763548 13.1614 0.635223C13.1112 0.506898 13.0349 0.39035 12.9374 0.292896C12.84 0.195441 12.7234 0.119183 12.5951 0.0689079C12.4668 0.0186333 12.3295 -0.00457215 12.1917 0.000747323C12.054 0.00606679 11.9189 0.0397964 11.7948 0.0998197C11.6708 0.159843 11.5604 0.244864 11.4708 0.349545L4.09079 7.72954L1.71079 5.34954C1.61783 5.25581 1.50723 5.18142 1.38537 5.13065C1.26351 5.07988 1.1328 5.05374 1.00079 5.05374C0.868779 5.05374 0.738074 5.07988 0.616215 5.13065C0.494356 5.18142 0.383755 5.25581 0.290792 5.34954C0.104541 5.53691 -1.01242e-06 5.79036 -1.05861e-06 6.05454C-1.1048e-06 6.31873 0.10454 6.57218 0.290791 6.75954L3.38079 9.84954C3.56815 10.0358 3.82161 10.1403 4.08579 10.1403C4.34998 10.1403 4.60343 10.0358 4.79079 9.84954Z",fill:r||"white"})}))));var n}));n.memo(p)},255078:(e,t,r)=>{var a=r(785893),n=r(667294),o=Object.defineProperty,s=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const p=n.forwardRef((function(e,t){const r=e.color;return(0,a.jsx)("svg",(n=((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&u(e,r,t[r]);return e})({width:"15",height:"6",viewBox:"0 0 15 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),s(n,i({children:(0,a.jsx)("path",{d:"M1.003 1l5.919 3.82a.5.5 0 00.555-.01L13.003 1",stroke:r||"#979797",strokeWidth:2,strokeLinecap:"round"})}))));var n}));n.memo(p)},579497:(e,t,r)=>{r.d(t,{Z:()=>f});var a=r(785893),n=r(667294),o=r(327754),s=r(876777),i=Object.defineProperty,l=Object.defineProperties,c=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const g=n.forwardRef((function(e,t){const r=(0,o.F)({[s.$T.Dark]:"white"}),n=e.color||r;return(0,a.jsxs)("svg",(i=((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&h(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&h(e,r,t[r]);return e})({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),l(i,c({children:[(0,a.jsx)("path",{d:"M8 2.4C11.087 2.4 13.6 4.913 13.6 8C13.6 11.087 11.087 13.6 8 13.6C4.913 13.6 2.4 11.087 2.4 8C2.4 4.913 4.913 2.4 8 2.4ZM8 1C4.136 1 1 4.136 1 8C1 11.864 4.136 15 8 15C11.864 15 15 11.864 15 8C15 4.136 11.864 1 8 1Z",fill:n||"#969DA3"}),(0,a.jsx)("path",{d:"M8.00005 12.2001C7.61505 12.2001 7.30005 11.8851 7.30005 11.5001V7.3001C7.30005 6.9151 7.61505 6.6001 8.00005 6.6001C8.38505 6.6001 8.70005 6.9151 8.70005 7.3001V11.5001C8.70005 11.8851 8.38505 12.2001 8.00005 12.2001Z",fill:n||"#969DA3"}),(0,a.jsx)("path",{d:"M8.00005 5.1998C8.38665 5.1998 8.70005 4.8864 8.70005 4.4998C8.70005 4.11321 8.38665 3.7998 8.00005 3.7998C7.61345 3.7998 7.30005 4.11321 7.30005 4.4998C7.30005 4.8864 7.61345 5.1998 8.00005 5.1998Z",fill:n||"#969DA3"})]}))));var i})),f=n.memo(g)},144943:(e,t,r)=>{r.d(t,{u:()=>s});var a=r(667294),n=r(363119),o=r(99127);const s=(e,t)=>{const{activeWalletId:r,lpTokensByWallet:s}=(0,n.v9)((e=>e.wallets));return(0,a.useMemo)((()=>{if(e&&t&&s&&s[r]){const a=(0,o.uz)(t.id||t.address,e);return s[r][a]}}),[s,r,t,e])}},680409:(e,t,r)=>{var a=r(785893),n=r(667294),o=r(149192),s=Object.defineProperty,i=Object.defineProperties,l=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;(0,n.memo)((e=>{var t,r=e,{children:n,noShadow:s=!1,className:h}=r,g=((e,t)=>{var r={};for(var a in e)d.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&c)for(var a of c(e))t.indexOf(a)<0&&u.call(e,a)&&(r[a]=e[a]);return r})(r,["children","noShadow","className"]);return(0,a.jsx)(o._,(t=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&p(e,r,t[r]);return e})({noShadow:s,className:h,"data-testid":"cardContainer"},g),i(t,l({children:n}))))}))},725317:(e,t,r)=>{r.d(t,{Z:()=>b});var a=r(785893),n=r(300286),o=r(241164),s=r(412252),i=r(667294),l=r(771341),c=r(876777),d=r(38187),u=r(356308),p=r(674990),h=r(669525),g=Object.defineProperty,f=Object.defineProperties,m=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const b=(0,i.memo)((0,i.forwardRef)(((e,t)=>{var r=e,{type:g,label:b,errorMsg:C,warningMsg:S,startAdornment:P,endAdornment:I,tipInfo:k,dataTestId:Z,placeholder:j,inputRef:T,defaultValue:O,onChange:_,onKeyPress:B,autoFocus:D,isWebapp:A=!1,spellCheck:F,name:N,tipError:$,min:K,disabled:E,value:W,tipPlacement:R="left",autoComplete:L="off",onFocus:J,textAlign:M=p.P.Left,className:z,variant:U="md",readOnly:V=!1,step:G=.1}=r,H=((e,t)=>{var r={};for(var a in e)w.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&y)for(var a of y(e))t.indexOf(a)<0&&x.call(e,a)&&(r[a]=e[a]);return r})(r,["type","label","errorMsg","warningMsg","startAdornment","endAdornment","tipInfo","dataTestId","placeholder","inputRef","defaultValue","onChange","onKeyPress","autoFocus","isWebapp","spellCheck","name","tipError","min","disabled","value","tipPlacement","autoComplete","onFocus","textAlign","className","variant","readOnly","step"]);const[q,Q]=(0,i.useState)(g),X=(0,i.useMemo)((()=>P?(0,a.jsx)(d.Z,{mr:10,"data-testid":"startAdornment",children:P}):null),[P]),Y=(0,i.useMemo)((()=>I?(0,a.jsx)(d.Z,{ml:5,"data-testid":"endAdornment",children:I}):"password"===g?(0,a.jsx)(h.iT,{onClick:()=>Q("password"===q?"text":"password"),children:"password"===q?(0,a.jsx)(l.tE,{width:16,height:16,color:c.wL.darkGrey}):(0,a.jsx)(l.JP,{width:16,height:16,color:c.wL.darkGrey})}):$||k?(0,a.jsx)(u.ZP,{title:$||k,arrow:!0,fitContent:!0,placement:R,children:(0,a.jsx)(h.Oq,{"data-testid":"tipIcon",children:(0,a.jsx)(h.ag,{$error:!!$})})}):null),[I,q,A,$,k,R,g]);return(0,a.jsxs)(d.Z,(ee=((e,t)=>{for(var r in t||(t={}))w.call(t,r)&&v(e,r,t[r]);if(y)for(var r of y(t))x.call(t,r)&&v(e,r,t[r]);return e})({},H),te={className:z,children:[b&&(0,a.jsx)(d.Z,{pb:8,ml:8,children:(0,a.jsx)(s.Z,{children:b})}),(0,a.jsxs)(h.fv,{$isWebapp:A,$error:!!C||!!$,onClick:J,"data-testid":"inputContainer",children:[X,(0,a.jsx)(h.II,{style:{textAlign:M},name:N,type:q,placeholder:j,"data-testid":Z,$error:!!C,ref:t||T,autoComplete:L,defaultValue:O,onChange:_,onKeyPress:B,autoFocus:D,spellCheck:F,min:K,disabled:E,value:W,$isWebapp:A,onFocus:J,$variant:U,readOnly:V,step:"number"===g?G:void 0}),Y]}),(0,a.jsx)(h.CV,{$animateIn:!!C,children:(0,a.jsx)(n.Z,{children:C})}),S&&(0,a.jsx)(h.iC,{children:(0,a.jsx)(o.Z,{children:S})})]},f(ee,m(te))));var ee,te})))},670585:(e,t,r)=>{var a=r(785893),n=r(667294),o=r(771341),s=r(38187),i=r(876777),l=r(412252),c=r(300286),d=r(669525),u=Object.defineProperty,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&f(e,r,t[r]);if(p)for(var r of p(t))g.call(t,r)&&f(e,r,t[r]);return e};const y=({showPassword:e,setShowPassword:t})=>(0,a.jsx)(d.Ym,{onClick:()=>t(!e),"data-testid":"eyeContainer",children:(0,a.jsx)(d.iT,{children:e?(0,a.jsx)(o.JP,{width:16,height:16,color:i.wL.darkGrey,"data-testid":"closedEyeIcon"}):(0,a.jsx)(o.tE,{width:16,height:16,color:i.wL.darkGrey,"data-testid":"eyeIcon"})})});(0,n.memo)((0,n.forwardRef)(((e,t)=>{var r=e,{label:o,errorMsg:i,dataTestId:u,placeholder:f,inputRef:w,defaultValue:x,onChange:v,autoFocus:b,spellCheck:C,name:S,className:P,disabled:I,value:k,type:Z="text"}=r,j=((e,t)=>{var r={};for(var a in e)h.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&p)for(var a of p(e))t.indexOf(a)<0&&g.call(e,a)&&(r[a]=e[a]);return r})(r,["label","errorMsg","dataTestId","placeholder","inputRef","defaultValue","onChange","autoFocus","spellCheck","name","className","disabled","value","type"]);const[T,O]=(0,n.useState)(!1);return(0,a.jsxs)(s.Z,{className:P,gridGap:"8px",children:[o&&(0,a.jsx)(s.Z,{ml:8,children:(0,a.jsx)(l.Z,{children:o})}),(0,a.jsxs)(d.Bt,{children:[(0,a.jsx)(d.Kx,m({name:S,placeholder:f,"data-testid":u,ref:w||t,defaultValue:x,onChange:v,autoFocus:b,spellCheck:C,autoComplete:"off",disabled:I,value:k,$error:!!i,$type:"text"===Z||T?"text":"password"},j)),"password"===Z&&(0,a.jsx)(y,{showPassword:T,setShowPassword:O})]}),(0,a.jsx)(d.CV,{$animateIn:!!i,children:(0,a.jsx)(c.Z,{children:i})})]})})))},179145:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(785893),n=r(876777),o=r(233884);const s=r(818117).ZP.svg`
  animation: ${o.O2} 1s linear infinite;
  width: ${({width:e})=>e}px;
  height: ${({height:e})=>e}px;

  & circle {
    stroke: ${({color:e})=>e};
    stroke-linecap: round;
    animation: ${o.P2} 1.5s ease-in-out infinite;
  }
`,i=({color:e=n.wL.blue,width:t=50,height:r=50,dataTestId:o="circleLoader"})=>(0,a.jsx)(s,{color:e,width:t,height:r,"data-testid":o,viewBox:"0 0 50 50",children:(0,a.jsx)("circle",{cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"4","data-testid":"circularProgressCircle"})})},459251:(e,t,r)=>{r(785893)},23985:(e,t,r)=>{r(785893),r(667294);var a=r(818117),n=r(876777);r(165852),r(814401);a.ZP.li`
  display: flex;
  align-items: center;
  border-bottom: 1px solid ${n.wL.black};
  ${({$active:e})=>e&&`border-bottom: 2px solid ${n.wL.babyBlue};`}
  width: 100%;
  height: 56px;
  justify-content: center;
  text-transform: capitalize;
`,a.ZP.ul`
  display: flex;
  list-style: none;
  justify-content: space-between;
  margin: 0;
  padding: 0;
  cursor: pointer;
  background-color: ${n.wL.mineShaft};
`},691292:(e,t,r)=>{r.a(e,(async(e,a)=>{try{r.d(t,{c:()=>l});r(785893);var n=r(667294),o=(r(363119),r(457817)),s=r(281672),i=e([o,s]);[o,s]=i.then?(await i)():i;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const l=(0,n.createContext)({});a()}catch(e){a(e)}}))},493730:(e,t,r)=>{r.a(e,(async(e,a)=>{try{r.d(t,{AccountBalance:()=>n.r});var n=r(358156),o=r(533448);r.o(o,"ConfirmDialog")&&r.d(t,{ConfirmDialog:function(){return o.ConfirmDialog}}),r.o(o,"DappNotConnectedDialog")&&r.d(t,{DappNotConnectedDialog:function(){return o.DappNotConnectedDialog}}),r.o(o,"DappScreen")&&r.d(t,{DappScreen:function(){return o.DappScreen}}),r.o(o,"FullWidthSelectChain")&&r.d(t,{FullWidthSelectChain:function(){return o.FullWidthSelectChain}}),r.o(o,"ScreenSpinnerProvider")&&r.d(t,{ScreenSpinnerProvider:function(){return o.ScreenSpinnerProvider}});var s=e([n]);n=(s.then?(await s)():s)[0],a()}catch(e){a(e)}}))},465438:(e,t,r)=>{r.a(e,(async(e,a)=>{try{var n=r(919020),o=r(632649);r.o(o,"ConfirmDialog")&&r.d(t,{ConfirmDialog:function(){return o.ConfirmDialog}}),r.o(o,"DappNotConnectedDialog")&&r.d(t,{DappNotConnectedDialog:function(){return o.DappNotConnectedDialog}}),r.o(o,"FullWidthSelectChain")&&r.d(t,{FullWidthSelectChain:function(){return o.FullWidthSelectChain}}),r.o(o,"ScreenSpinnerProvider")&&r.d(t,{ScreenSpinnerProvider:function(){return o.ScreenSpinnerProvider}});var s=e([n]);n=(s.then?(await s)():s)[0],a()}catch(e){a(e)}}))},646284:(e,t,r)=>{r.a(e,(async(e,a)=>{try{r.d(t,{AccountSelect:()=>o.Z,ConfirmDialog:()=>J.QH,DappNotConnectedDialog:()=>M.J,DappScreen:()=>B.J,FormHeader:()=>y.ph,FullWidthSelectChain:()=>F.Z,Loader:()=>d.Z,ScreenSpinnerProvider:()=>E.F});var n=r(599527),o=r(641124),s=r(170166),i=r(50727),l=r(398357),c=(r(875930),r(343634)),d=r(882935),u=r(744238),p=r(663856),h=r(345058),g=r(33961),f=r(310666),m=(r(221379),r(21723)),y=r(204255),w=r(143747),x=r(430648),v=r(926182),b=r(679896),C=r(537896),S=r(83668),P=r(493730),I=r(340134),k=r(463193),Z=r(136303),j=r(715413),T=r(179060),O=r(372950),_=r(104183),B=r(230679),D=r(465438),A=r(292098),F=r(228819),N=r(113863),$=r(781850),K=r(385167),E=r(409061),W=r(17349),R=r(366013),L=r(882478),J=r(316708),M=r(319685),z=e([n,o,s,i,l,c,d,u,p,h,g,f,m,y,w,x,v,b,C,S,P,I,k,Z,j,T,O,_,B,D,A,F,N,$,K,E,W,R,L,J,M]);[n,o,s,i,l,c,d,u,p,h,g,f,m,y,w,x,v,b,C,S,P,I,k,Z,j,T,O,_,B,D,A,F,N,$,K,E,W,R,L,J,M]=z.then?(await z)():z,r.o(P,"ConfirmDialog")&&r.d(t,{ConfirmDialog:function(){return P.ConfirmDialog}}),r.o(P,"DappNotConnectedDialog")&&r.d(t,{DappNotConnectedDialog:function(){return P.DappNotConnectedDialog}}),r.o(P,"DappScreen")&&r.d(t,{DappScreen:function(){return P.DappScreen}}),r.o(P,"FullWidthSelectChain")&&r.d(t,{FullWidthSelectChain:function(){return P.FullWidthSelectChain}}),r.o(P,"ScreenSpinnerProvider")&&r.d(t,{ScreenSpinnerProvider:function(){return P.ScreenSpinnerProvider}}),r.o(D,"ConfirmDialog")&&r.d(t,{ConfirmDialog:function(){return D.ConfirmDialog}}),r.o(D,"DappNotConnectedDialog")&&r.d(t,{DappNotConnectedDialog:function(){return D.DappNotConnectedDialog}}),r.o(D,"FullWidthSelectChain")&&r.d(t,{FullWidthSelectChain:function(){return D.FullWidthSelectChain}}),r.o(D,"ScreenSpinnerProvider")&&r.d(t,{ScreenSpinnerProvider:function(){return D.ScreenSpinnerProvider}}),a()}catch(e){a(e)}}))},835534:(e,t,r)=>{r.a(e,(async(e,t)=>{try{var a=r(264487),n=r(914096),o=r(244586),s=r(942274),i=r(409669),l=r.n(i),c=r(135974),d=r(244431),u=r.n(d),p=r(209030),h=r(379372),g=r(133156),f=r(539441),m=r(350144),y=r(177616),w=r(739989),x=r(626423),v=r(46461),b=r(435161),C=r.n(b),S=r(478718),P=r.n(S),I=r(363119),k=r(519416),Z=r(42763),j=r(556138),T=r(691438),O=r(628790),_=r(847001),B=r(831352),D=r(680528),A=r(25022),F=r(427504),N=r(640610),$=r(270900),K=r(572574),E=r(993150),W=r(446010),R=r(358892),L=r(316683),J=r(693246),M=r(605930),z=r(603874),U=r(905479),V=r(705891),G=r(972335),H=r(569252),q=r(406253),Q=r(173431),X=r(299246),Y=r(834392),ee=r(851892),te=r(496486),re=r(620531),ae=r(855192),ne=r(667730),oe=r(703033),se=r(820813),ie=r(81331),le=r(159655),ce=r(943333),de=r(529706),ue=r(177011),pe=r(630292),he=r(730876),ge=r(803418),fe=e([h,g,Z,q,re,ae,se,ie,le,ce,de,ue,pe]);[h,g,Z,q,re,ae,se,ie,le,ce,de,ue,pe]=fe.then?(await fe)():fe;var me=Object.defineProperty,ye=Object.defineProperties,we=Object.getOwnPropertyDescriptors,xe=Object.getOwnPropertySymbols,ve=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,Ce=Math.pow,Se=(e,t,r)=>t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Pe=(e,t)=>{for(var r in t||(t={}))ve.call(t,r)&&Se(e,r,t[r]);if(xe)for(var r of xe(t))be.call(t,r)&&Se(e,r,t[r]);return e},Ie=(e,t)=>ye(e,we(t)),ke=(e,t,r)=>(Se(e,"symbol"!=typeof t?t+"":t,r),r),Ze=(e,t,r)=>new Promise(((a,n)=>{var o=e=>{try{i(r.next(e))}catch(e){n(e)}},s=e=>{try{i(r.throw(e))}catch(e){n(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,s);i((r=r.apply(e,t)).next())}));class je{constructor(){ke(this,"unsubscribe"),ke(this,"masterKeys"),ke(this,"wallets"),ke(this,"chains"),ke(this,"dapps"),ke(this,"dappsProviders"),ke(this,"assets"),ke(this,"analytics"),ke(this,"api"),ke(this,"populateWalletData",((e,t)=>Ze(this,null,(function*(){yield this.wallets.initWalletData((r=>this.chains.getAllAddresses({seed:r.seed?{seed:r.seed.seed,walletIndex:null!=e?e:0}:void 0,pk:r.pk?r.pk:void 0},t)))})))),ke(this,"verifyMasterPhrase",(()=>{Z.Z.dispatch((0,K.S9)())})),ke(this,"populateSubAccount",(e=>Ze(this,[e],(function*({seedOrPK:e,masterPassword:t,withInitialTokens:r=!0,keystoreId:a,label:n,imported:o}){if(!e)throw(0,v.t)("app:controller_errors.invalid_seed_or_pk");if(!(yield this.wallets.addSubAccountByPhraseOrPK({seedOrPK:e,password:t,keystoreId:a,imported:o})))throw(0,v.t)("app:controller_errors.account_allready_exists");const s=r?z.bK:this.chains.getAllChainNetworkIds();yield this.populateWalletData(0,s),this.wallets.addKeystoreWallet(n),r&&this.postRestore(),this.masterKeys.clearTemporaryPhrase()})))),ke(this,"updateCurrency",((e,t,r,a)=>{Z.Z.dispatch((0,W.SI)({name:e,symbol:t,title:r,scale:a}))})),ke(this,"updateMinBalance",(e=>{Z.Z.dispatch((0,W.He)(e))})),ke(this,"addWalletBalance",((e,t)=>{Z.Z.dispatch((0,L.l$)({activeWalletId:e,wallets:t})),Z.Z.dispatch((0,N.HK)({walletIds:Object.values(t).map((e=>e.id))}))})),ke(this,"restoreWallets",((e,t,r,a,n,o)=>Ze(this,null,(function*(){return this.addWalletBalance(r,e),this.assets.upgradeTokens(),yield this.masterKeys.unlock(t),(0,I.dC)((()=>{Z.Z.dispatch((0,L.EA)(o)),Z.Z.dispatch((0,W.dt)(a)),Z.Z.dispatch((0,N.Jx)(n))})),yield this.chains.addChainItems(),this.chains.updateBalancesForAllWallets(),{success:!0,message:"You have been restored master keystore, wallets, and settings successfully! Hold on..."}})))),ke(this,"logger",((e,t)=>w.Z.info(`CONTROLLER: ${e}`,t))),ke(this,"getAssetBalanceStr",(({chainId:e,symbol:t,address:r,decimals:a,showSymbol:n=!0,showTilde:o=!1,balance:s="0"})=>{try{const i=this.chains.getChainControllerById(e),l=Number(s)?s:this.chains.getBalance(e,t,r),c=(0,F.R6)(i,l,t,null!=a?a:i.getConfig().decimals);return n?(0,F.zr)(new(u())(c),t,o):(0,F.Cb)(new(u())(c),o)}catch(e){return w.Z.error(e),"0"}})),ke(this,"getAssetBalanceStrThorchain",((e,t=!0,r="0")=>{const a=this.chains.getFirstChainControllerByType(T.J.Thorchain);if(!a)return"0";const n=Number(r)?r:this.chains.getBalanceThorchain(e),o=(0,F.R6)(a,n,e.ticker,a.getConfig().decimals);return t?(0,F.zr)(new(u())(o),e.ticker):(0,F.Cb)(new(u())(o))})),ke(this,"getFee",((e,t,r)=>Ze(this,null,(function*(){let a,n;const o=this.chains.getChainControllerById(e);switch(o.getType()){case T.J.Binance:const s=yield(0,ae.cj)();a=new(u())(s);break;case T.J.Bitcoin:case T.J.Litecoin:case T.J.Dogecoin:case T.J.BitcoinCash:n=(yield o.selfCast().getFeesWithRates(r.memo,r.fromAddress)).rates[t],a=yield o.selfCast().getTransactionFee({speed:t,txData:Ie(Pe({},r),{feeRate:n})});break;case T.J.Thorchain:{const e=(yield o.selfCast().getFee()).fastest;a=e.amount().dividedBy(Ce(10,e.decimal))}break;case T.J.Terra:{const e=o.selfCast(),a=(null==r?void 0:r.gasPrice)?null==r?void 0:r.gasPrice:void 0,n=yield e.getFee(Ie(Pe({},r),{gasPrice:a}));return{fee:new(u())(n.amount.toData()[0].amount).dividedBy(Ce(10,e.getConfig().decimals)),speed:t}}case T.J.Near:{const e=yield o.selfCast().getFee(r);a=e.dividedBy(Math.pow(10,o.selfCast().getConfig().decimals))}break;case T.J.Evm:{const e=new(u())(r.gasPrice||0),t=new(u())(r.gasLimit),n=new(u())(r.maxFeePerGas||0),o=new(u())(r.maxPriorityFeePerGas||0);e.gt(0)&&(a=e.multipliedBy(t).dividedBy(1e9).decimalPlaces(18)),o.gt(0)&&n.gt(0)&&(a=n.multipliedBy(t).dividedBy(h.uR))}break;case T.J.Solana:a=new(u())(5e3).dividedBy(Ce(10,9));break;case T.J.Cosmos:const i=o.selfCast();a=yield i.getFee();break;default:w.Z.warn(`getFee not implemented for chainId ${e}`),a=new(u())("0")}return new Promise((e=>e({fee:a,feeRate:n,speed:t})))})))),ke(this,"getAssetAddressDecimals",((e,t)=>{var r,a;const n=this.chains.getChainControllerById(e);let o,s;return n.getType()===T.J.Binance?(o=t.address||"",s=t.decimals||D.KV.A18):n.getType()===T.J.Terra?(o=t.address||"",s=t.decimals||D.KV.A6):n.getType()===T.J.Solana?(o=null!=(r=t.address)?r:"",s=null!=(a=t.decimals)?a:D.KV.A9):n.getType()===T.J.Near?(o=t.address||"",s=t.decimals||D.KV.A24):(o=t.address||"",s=t.decimals||n.getConfig().decimals),t.lpTokenInfo&&(o=t.address||"",s=t.lpTokenInfo.decimals||D.KV.A18),{address:o,decimals:s}})),ke(this,"getFormattedBalance",((e,t)=>{var r,a,n;let o;o=this.chains.getChainControllerById(e.chainId).getType()===T.J.Thorchain&&"RUNE"!==e.symbol?this.chains.getBalanceThorchain(e.asset):this.chains.getBalance(e.chainId,e.symbol,null!=(r=e.address)?r:e.id);const s=this.wallets.activeWallet,i=e.lpTokenInfo?e.lpTokenInfo.decimals:e.decimals;let l=t||i||this.chains.getChainControllerById(e.chainId).getConfig().decimals;if(s){const t=null==(n=Object.values((null==(a=s.chainData[e.chainId])?void 0:a.tokens)||{}).find((t=>t.address===e.address)))?void 0:n.decimals;t&&(l=t)}return(0,F.R6)(this.chains.getChainControllerById(e.chainId),o,e.symbol,l)})),ke(this,"updateTxChain",(e=>{Z.Z.dispatch((0,W.G3)({activeChain:e}))})),ke(this,"createIndexedDB",(()=>Ze(this,null,(function*(){try{yield(0,p.ng)()}catch(e){w.Z.error(`Failed to create indexed db: ${e}`),a.Tb(e)}})))),ke(this,"initJsonPatchTemplates",(()=>Ze(this,null,(function*(){try{try{if(yield(0,p.i9)())return void w.Z.info("Templates: Already have templates")}catch(e){w.Z.info("Templates: Need to fetch templates")}const e=yield fetch(`${_.Z.get("REST_API")}/static/templates.json`),t=yield e.text();yield(0,p.JD)(t)}catch(e){w.Z.error(`Failed to init json templates: ${e}`),a.Tb(e);try{if(yield(0,p.i9)())return}catch(e){w.Z.error(`Failed to read json patch templates from the store: ${e}`)}finally{setTimeout((()=>{this.initJsonPatchTemplates()}),1e3)}}})))),ke(this,"fetchAssets",(()=>Ze(this,null,(function*(){try{const e=yield(0,p.zF)("assets"),t=yield(0,ne.V)({after:e,fetchPolicy:"no-cache"});yield this.assets.update(t);const r=new Date;r.setSeconds(0),r.setMilliseconds(0),(0,p.tp)("assets",r).catch(a.Tb);const{loadingAllAssets:n}=Z.Z.getState().wallets;n&&Z.Z.dispatch((0,L.SM)({loadingAllAssets:!1}))}catch(e){w.Z.error(`Failed to fetch assets: ${e}`)}const e=()=>Ze(this,null,(function*(){try{yield this.assets.fetchUserLPTokens()}catch(t){w.Z.error(`Failed to fetch LP tokens: ${t}`),setTimeout(e,1e3),a.Tb(t)}}));e()})))),ke(this,"deleteRoute",((e=!0,t,r,a,n)=>{if(this.addSwapToken(t,r,a),window.localStorage.removeItem("inputToken"),window.localStorage.removeItem("outputToken"),t[0]){const a={fromChainId:t[0].inputChainId,fromTokenAddress:t[0].inputAddress,fromTokenSymbol:t[0].inputSymbol,fromAmount:t[0].inputAmount,fromAmountUSD:t[0].inputAmountFiat,toChainId:t[r].outputChainId,toTokenAddress:t[r].outputAddress,toTokenSymbol:t[r].outputSymbol,toAmount:t[r].outputAmount,toAmountUSD:t[r].outputAmountFiat,provider:t[r].name};e&&this.analytics.track(A.uT.SwapCanceledSwap,a)}a===H.BA.Pending?e&&this.addWalletNotification({title:(0,v.t)("swap.alert.delete.pending.title"),message:(0,v.t)("swap.alert.delete.pending.message"),linkName:n,link:n?`${this.chains.getChainControllerById(t[r].inputChainId).getConfig().network.transaction}/${n}`:void 0}):e&&this.addWalletNotification({title:(0,v.t)("swap.alert.delete.title"),message:a===H.BA.Idle?(0,v.t)("swap.alert.delete.message"):void 0}),this.setActiveSwap(void 0),this.updateSwaps(void 0),this.setSwapPending(!1)})),ke(this,"addSwapToken",((e,t,r)=>Ze(this,null,(function*(){const{activeWalletId:a}=Z.Z.getState().wallets,n=Z.Z.getState()[j.StoreKeys.Settings].history,o=this.assets.getAllTopAssets().find((r=>r.chainId===e[t].outputChainId&&r.token.id===e[t].outputId));if(o&&r===H.BA.Successful&&o){this.assets.addTokenToWallet(e[t].outputChainId,o.token,a)&&this.addWalletNotification({title:(0,v.t)("swap.alert.added_asset.title",{symbol:o.token.symbol,chainId:this.chains.getChainControllerById(e[t].outputChainId).getConfig().longName}),message:(0,v.t)("swap.alert.added_asset.message"),persisted:!0})}yield this.chains.updateAllChainsBalanceForActiveWallet(),n&&D.N7.find((e=>null==n?void 0:n.location.pathname.includes(e)))&&this.rememberLocation(Ie(Pe({},n.location),{pathname:D.ft}),!0)})))),ke(this,"getFormatedPriceStr",(e=>{const{name:t,symbol:r}=Z.Z.getState().settings.currency;if(isNaN(e))return"N/A";const a=(0,X.pF)(e,Y.UX);return isNaN(e)?"N/A":e>0&&e<.001?`< ${r}0.001 ${t}`:`${r}${a} ${t}`})),ke(this,"getTransactionProp",((e,t)=>{var r,a;let n=e.tradeRoute.provider.time;"multichain"===(null==(r=e.tradeRoute.provider.name)?void 0:r.toLowerCase())&&(n=600),e.tradeRoute.tradeType===q.j4.Approval&&(n=60);const o=Number(e.tradeRoute.amountIn),s=Number(e.tradeRoute.amountOut),i=Number(e.tradeRoute.fee.inboundFeeDollar),l=Number(e.tradeRoute.fee.networkFeeDollar),c=Number(e.tradeRoute.priceRateUsdAssetIn),d=Number(e.tradeRoute.priceRateUsdAssetOut),u=n%60,p=Math.floor(n/60),h=(0,Q.j6)((0,Q.SO)(e.tradeRoute.assetIn.asset.chain),e.tradeRoute.assetIn.asset.chain,this.chains),g=(0,Q.j6)((0,Q.SO)(e.tradeRoute.assetOut.asset.chain),e.tradeRoute.assetOut.asset.chain,this.chains);let f=`~${p}min ${u}sec`;p?u||(f=`~${p}min`):f=`~${u}sec`;const m={networkFee:`${parseFloat(Number(e.tradeRoute.fee.inboundFeeAsset).toFixed(4))} ${h.getConfig().tokenSymbol}`,networkFeeDollar:this.getFormatedPriceStr(i),providerFeeDollar:this.getFormatedPriceStr(l),inputAmount:o,inputAmountFiat:this.getFormatedPriceStr(o*c),outputAmount:s,outputAmountFiat:this.getFormatedPriceStr(s*d),outputImage:e.tradeRoute.assetOut.asset.image,inputImage:e.tradeRoute.assetIn.asset.image,outputChainId:g.getId(),inputChainId:h.getId(),outputId:t,tradeId:(null==(a=e.transaction)?void 0:a.tradeId)||1,tradeType:e.tradeRoute.tradeType,inputSymbol:e.tradeRoute.assetIn.asset.symbol.split("-")[0],inputAddress:e.tradeRoute.assetIn.asset.contract,outputSymbol:e.tradeRoute.assetOut.asset.symbol.split("-")[0],outputAddress:e.tradeRoute.assetOut.asset.contract,name:e.tradeRoute.provider.name,icon:e.tradeRoute.provider.icon,time:f,minAmountReceived:e.tradeRoute.minAmountReceived,reward:e.tradeRoute.reward};return e.tradeRoute.tradeType===q.j4.Redeem&&(m.inputChainId=m.outputChainId),m})),ke(this,"updateSwapStatus",((e,t)=>{var r;const a=null==(r=Z.Z.getState()[j.StoreKeys.Swaps].swaps)?void 0:r.output.id,n=()=>Ze(this,null,(function*(){return(0,G.J)(e).then((e=>{var r;if(null==e?void 0:e.error)throw new Error(e.error.message);if(!a)throw new Error("no output token");const n=e.data.routingV2.tradesV2.map((e=>this.getTransactionProp(e,a))),o=e.data.routingV2.tradesV2.findIndex((e=>{var r;return(null==(r=e.status)?void 0:r.txHash)===t})),s=e.data.routingV2.tradesV2[o],i=e.data.routingV2.tradesV2.every((e=>{var t;return(null==(t=e.status)?void 0:t.status)===H.BA.Successful}));if(null==(r=null==s?void 0:s.status)?void 0:r.status){if(s.status.status===H.BA.Pending)return!1;if(s.status.status===H.BA.Successful)if(n.length>1){const e={title:(0,v.t)("swap.alert.completed.multi.title",{index:o+1,total:n.length}),type:"success",message:(0,v.t)("swap.alert.completed.multi.message",{tradeType:(0,te.capitalize)(n[o].tradeType)}),persisted:!0};o===n.length-1&&(e.linkName=(0,v.t)("swap.click_to_view_txn"),e.link=`${this.chains.getChainControllerById(n[o].outputChainId).getConfig().network.transaction}/${t}`),this.addWalletNotification(e)}else this.addWalletNotification({title:(0,v.t)("swap.alert.completed.single.title"),type:"success",message:(0,v.t)("swap.alert.completed.single.message",{tradeType:(0,te.capitalize)(n[o].tradeType)}),linkName:(0,v.t)("swap.click_to_view_txn"),link:`${this.chains.getChainControllerById(n[o].outputChainId).getConfig().network.transaction}/${t}`,persisted:!0});else s.status.status===H.BA.Revert&&this.addWalletNotification({title:(0,v.t)("swap.alert.revert.title"),type:"warning",persisted:!0});return i&&this.deleteRoute(!1,n,n.length-1,H.BA.Successful,""),Z.Z.dispatch((0,R.Zk)({swapPending:!1})),!0}return!1})).catch((e=>(w.Z.info("updateSwapStatus",e),!1)))})),o=()=>n().then((e=>{e||setTimeout(o,5e3)}));o()})),ke(this,"swap",((e,t,r,a)=>Ze(this,null,(function*(){w.Z.info("MasterController - swap",e);const{wallets:n,activeWalletId:o}=Z.Z.getState().wallets,s=n[o],i=s.walletInfo.data,l=s.walletInfo.type;switch(l){case J.c.Keystore:case J.c.PkKeystore:if(!a)throw"Must pass walletCredentials";const e=yield this.masterKeys.generatePasswordFromKeystore(i.keystore,a.walletPassword);a.walletPassword=e;break;case J.c.Ledger:case J.c.Trezor:break;default:throw`swap pre-processing not implemented for ${l}`}const c=e.chainId;try{const n=yield this._swap(c,e,o,a);return yield(0,V.r)({tradeId:r,routeId:t,transactionHash:n}),this.updateSwapStatus(t,n),w.Z.info("swap res",{txHash:n}),n}catch(e){throw w.Z.error("swap error",{error:e}),this.setSwapPending(!1),this.addWalletNotification({title:(0,v.t)("general.error"),message:(0,v.t)((0,ee.ZP)(e,this.chains.getChainControllerById(c).getType())),type:"error",persisted:!0}),e}})))),ke(this,"getCachedCurrencies",(()=>Ze(this,null,(function*(){return yield(0,oe.D)()})))),ke(this,"rememberLocation",((e,t=!1)=>{Z.Z.dispatch((0,W.l6)({location:e,force:t}))})),ke(this,"setActiveSwap",(e=>{Z.Z.dispatch((0,R.MA)({activeSwap:e}))})),ke(this,"setReleaseNotesVersion",(e=>{Z.Z.dispatch((0,W.xz)({releaseNotesVersion:e}))})),ke(this,"updateSwaps",(e=>{Z.Z.dispatch((0,R.tJ)({swaps:e}))})),ke(this,"setReferralInfo",(e=>{Z.Z.dispatch((0,W.Kr)(e))})),ke(this,"addWalletNotification",(e=>{Z.Z.dispatch((0,E.We)(Ie(Pe({},e),{id:(0,o.Z)()})))})),ke(this,"addDappNotification",(e=>{Z.Z.dispatch((0,E.gq)(Ie(Pe({},e),{id:(0,o.Z)()})))})),ke(this,"removeWalletNotification",(()=>{Z.Z.dispatch((0,E.Mz)())})),ke(this,"removeDappNotification",(()=>{Z.Z.dispatch((0,E.Om)())})),ke(this,"resetNonPersistedNotifications",(()=>{Z.Z.dispatch((0,E.Ln)())})),ke(this,"updateDailyAnalyticsDate",(()=>{Z.Z.dispatch((0,W.s1)())})),ke(this,"setWalletForCampaign",(e=>Ze(this,null,(function*(){try{const t=Object.keys(Z.Z.getState().wallets.wallets[e].chainData).reduce(((t,r)=>{const a=this.chains.getChainControllerById(r);return x.mY.hasOwnProperty(a.getConfig().network.chainId)&&(t[x.mY[a.getConfig().network.chainId]]=Z.Z.getState().wallets.wallets[e].chainData[r].address),t}),{}),r=Object.entries(t).map((([e,t])=>({chain:e,address:t}))),a=Z.Z.getState().settings.userId;yield this.api.post(`${_.Z.get("CAMPAINGS_API")}/campaigns/opt-in`,{userId:a,addresses:r}),Z.Z.dispatch((0,$.GC)({walletId:e,chainAddresses:t}))}catch(e){a.Tb(e),w.Z.error("setWalletForCampaign error",{e})}})))),ke(this,"removeWalletFromCampaign",(()=>Ze(this,null,(function*(){const e=Z.Z.getState().settings.userId;try{yield this.api.post(`${_.Z.get("CAMPAINGS_API")}/campaigns/opt-out`,{userId:e}),Z.Z.dispatch((0,$.eo)())}catch(e){a.Tb(e),w.Z.error("setWalletForCampaign error",{e})}})))),ke(this,"removeRootWallets",(()=>{this.wallets.getRootWallets().forEach((e=>{this.wallets.removeRootWallet(e.id),this.masterKeys.removeAccountKey(e.id)}))})),ke(this,"resetData",(()=>{const{activeWalletId:e}=Z.Z.getState().wallets;Object.keys(Z.Z.getState().wallets.wallets).includes(e)||this.wallets.selectWallet(Object.keys(Z.Z.getState().wallets.wallets)[0]),this.updateTxChain("all"),this.assets.updateActiveAssetChain("all"),this.assets.updateActiveNFTChain("all")})),this.wallets=Object.freeze(new ue.Z(this)),this.chains=new ie.Z(this),this.masterKeys=Object.freeze(new de.Z(this.chains)),this.dappsProviders=Object.freeze(new ce.Z),this.dapps=Object.freeze(new le.Z(this.dappsProviders)),this.assets=new se.Z(this),this.analytics=new re.Z;const e=(0,c.setupCache)({maxAge:6e4});this.api=l().create({adapter:e.adapter}),this.unsubscribe=null,this.createIndexedDB()}restoreBackupCriticalData(e,t){return Ze(this,arguments,(function*({masterKey:e,accountKeys:t},{type:r,password:a,seed:n}){try{let o=n;r===f.J.ByPassword&&(o=yield(0,O.WR)(e,a));const s={masterKey:yield(0,O.sB)(o,a,0),accountKeys:t};return Z.Z.dispatch((0,K.Bp)(s)),yield Promise.all(C()(t,(e=>Ze(this,[e],(function*({keystore:e}){const t=yield this.masterKeys.generatePasswordFromKeystore(e,a),r=yield(0,O.WR)(e,t);return this.wallets.addSubAccountByPhraseOrPK({seedOrPK:r,password:a})}))))),this.postRestore(),!0}catch(e){return w.Z.error(e),!1}}))}postRestore(){this.assets.addTokenToAllWallets()}restoreBackup(e,t){return Ze(this,null,(function*(){const{type:r}=e;if(r!==D.ys.All)return{success:!1,message:"Invalid keystore or password"};let a;try{if(a=(0,g.gb)(e),!a)throw(0,v.t)("app:controller_errors.invalid_backup_data");const{criticalData:r,accounts:n,settings:o,contacts:s,chainConfigs:i}=a,l=P()(a.nftBalances,Object.keys(n.wallets)),{activeWalletId:c,wallets:d}=n,{masterKey:u,accountKeys:p}=r;yield(0,O.WR)(u,t);const h={masterKey:u,accountKeys:p};Z.Z.dispatch((0,K.Bp)(h));const f=Object.keys(i),m=this.chains.getAllChainControllers().map((e=>e.getId())),y=f.filter((e=>!m.includes(e)));for(const e of y)Z.Z.dispatch((0,U.ws)(i[e])),this.chains.addChainController(i[e]);const w=yield this.restoreWallets(d,t,c,o,l,s);return this.postRestore(),w}catch(r){if("Invalid password"===r)return{success:!1,message:r};const n=a?a.criticalData:(0,g.JC)(e),o=yield this.restoreBackupCriticalData(n,{type:f.J.ByPassword,password:t});return{success:o,message:o?"There were some problems in your backup data! But you have been restored master keystore and wallets successfully! Hold on...":"Invalid backup file or password"}}finally{this.wallets.init(!1)}}))}restoreBackupWithMasterPhrase(e,t,r){return Ze(this,null,(function*(){const{type:a}=r;if(a!==D.ys.All)return{success:!1,message:"Invalid XDEFI Seed phrase"};let n,o;try{n=new he.H(de.Z.getPhraseFromInput(e))}catch(e){return{success:!1,message:"Invalid XDEFI Recovery code"}}try{if(o=(0,g.gb)(r),!o)throw(0,v.t)("app:controller_errors.invalid_backup_data");const{accounts:e,settings:a,criticalData:s,contacts:i,chainConfigs:l}=o,c=P()(o.nftBalances,Object.keys(e.wallets)),{activeWalletId:d,wallets:u}=e,p=u[d];if(p.walletInfo.type!==J.c.Keystore)throw(0,v.t)("app:controller_errors.wallet_type_is_not_keystore");const h=p.walletInfo.data;if(!h.publickeys)throw(0,v.t)("app:controller_errors.incorrect_wallet_data");const f=(0,O.UL)(h.publickeys),m=(0,M.Jz)(`${n.toString()}${f.toString()}`);if(!h.keystore)throw(0,v.t)("app:controller_errors.no_keystore");const y=h.keystore;try{yield(0,O.WR)(y,m)}catch(e){return{success:!1,message:"Invalid XDEFI Recovery code"}}const{accountKeys:w}=s,x={masterKey:yield(0,O.sB)(n,t,0),accountKeys:w};Z.Z.dispatch((0,K.Bp)(x));const b=Object.keys(l),C=this.chains.getAllChainControllers().map((e=>e.getId())),S=b.filter((e=>!C.includes(e)));for(const e of S)Z.Z.dispatch((0,U.ws)(l[e])),this.chains.addChainController(l[e]);return yield this.restoreWallets(u,t,d,a,c,i)}catch(e){if("Invalid password"===e)return{success:!1,message:e};const a=o?o.criticalData:(0,g.JC)(r),s=yield this.restoreBackupCriticalData(a,{type:f.J.ByPassword,password:t,seed:n});return{success:s,message:s?(0,v.t)("app:controller_errors.there_were_some_problems_in_your_data"):(0,v.t)("app:controller_errors.invalid_backup_file_or_password")}}finally{this.wallets.init(!1)}}))}generatePasswordFromKeystore(e){const{wallets:t}=Z.Z.getState().wallets,r=t[e];if(!r)return Promise.reject(`Wallet id ${e} not found`);if(r.walletInfo.type!==J.c.Keystore&&r.walletInfo.type!==J.c.PkKeystore)return null;const a=r.walletInfo.data;return this.masterKeys.generatePasswordFromKeystore(a.keystore,this.masterKeys.masterPassword)}decrypt(e,t){return Ze(this,null,(function*(){return w.Z.debug({method:"decrypt",dappMessage:e}),new Promise(((r,a)=>Ze(this,null,(function*(){try{const{wallets:n,activeWalletId:o}=Z.Z.getState().wallets,s=n[o];if(!s)return a(`Wallet id ${o} not found`);const i=s.walletInfo.data,l=e.raw.params.params[0],c=(0,O.NS)(l),d=e.chainId,u=s.walletInfo.type;let p="";switch(u){case J.c.Keystore:case J.c.PkKeystore:const e=yield this.masterKeys.getAccountSeedPhrase(o,t);e&&(p=this.chains.getPrivateKey(d,{seed:e,walletIndex:i.walletIndex||0}));break;case J.c.Ledger:case J.c.Trezor:p=yield(0,ge.D)(u).getEIP1024SharedSecret(c.ephemPublicKey,i.walletIndex||0,i.derivationPath);break;default:throw`decrypt: Wallet type not supported ${u}`}const h=(0,m.decrypt)(c,p);return w.Z.debug({msg:"decrypt",decryptedMsg:h}),r(h)}catch(e){return w.Z.error({method:"decrypt: not handled",error:e}),a(e)}}))))}))}getEncryptionPublicKey(e,t){return Ze(this,null,(function*(){return w.Z.debug({method:"getEncryptionPublicKey",dappMessage:e}),new Promise(((r,a)=>Ze(this,null,(function*(){try{const{wallets:n,activeWalletId:o}=Z.Z.getState().wallets,s=n[o];if(!s)return a(`Wallet id ${o} not found`);const i=s.walletInfo.data,l=this.chains.getChainControllerById(e.chainId),c=s.walletInfo.type;let d="";switch(c){case J.c.Keystore:case J.c.PkKeystore:const e=yield this.masterKeys.getAccountSeedPhrase(o,t);if(e){const t=this.chains.getPrivateKey(l.getId(),{seed:e,walletIndex:i.walletIndex||0});d=(0,m.getEncryptionPublicKey)(t)}break;case J.c.Ledger:case J.c.Trezor:d=yield(0,ge.D)(c).getEIP1024PublicEncryptionKey(i.walletIndex||0,i.derivationPath);break;default:throw`getEncryptionPublicKey: Wallet type not supported ${c}`}return w.Z.debug({msg:"getEncryptionPublicKey",pubKey:d}),r(d)}catch(e){return w.Z.error({method:"getEncryptionPublicKey: not handled",error:e}),a(e)}}))))}))}approveDappsTransaction(e,t,r,a,n){return Ze(this,null,(function*(){return w.Z.debug({method:"approveDappsTransaction",dappMessage:e}),new Promise(((o,s)=>Ze(this,null,(function*(){var i,l;try{const{wallets:c}=Z.Z.getState().wallets,d=c[t],u=d.walletInfo.data;if(!d)return s(`Wallet id ${t} not found`);const p=d.walletInfo.type;let h="",g="";switch(p){case J.c.Keystore:case J.c.PkKeystore:if(!a)throw"Must pass walletCredentials";h=yield this.masterKeys.generatePasswordFromKeystore(u.keystore,a.walletPassword),a.walletPassword=h,g=J.c.PkKeystore===p?"PKKEYSTORE":"KEYSTORE";break;case J.c.Ledger:case J.c.Trezor:g="LEDGER";break;default:throw`approveDappTransaction: Wallet type not supported ${p}`}const f=yield this.chains.getChainControllerById(e.chainId).approveDappTransaction(e,t,a,n);w.Z.debug({msg:"approveDappsTransaction",result:f}),this.analytics.track(A.uT.ApproveDappTransaction,{chainId:e.chainId,dappId:new URL((null==(l=null==(i=null==e?void 0:e.origin)?void 0:i.tab)?void 0:l.url)||"http://localhost").hostname,type:r,walletTypeStr:g});const m=Ie(Pe({},e),{xdefiId:e.xdefiId,raw:{id:e.xdefiId,result:f}});return k.browser.extension.getBackgroundPage().processor.reply(m),o(f)}catch(e){return w.Z.error({method:"approveDappsTransaction: not handled",error:e}),s(e)}}))))}))}validateTx(e,t){return w.Z.info("validating Tx for chain: ",e),this.chains.getChainControllerById(e).validateTx(t)}sendTx(e,t,r,a,n){return Ze(this,null,(function*(){var o;w.Z.info("sending Tx for chain: ",e);const{wallets:s}=Z.Z.getState().wallets,i=s[r],l=i.walletInfo.data,c=i.walletInfo.type;let d="";switch(c){case J.c.Keystore:case J.c.PkKeystore:if(!n)throw"Must pass walletCredentials";d=yield this.masterKeys.generatePasswordFromKeystore(l.keystore,n.walletPassword),n.walletPassword=d;break;case J.c.Ledger:case J.c.Trezor:break;default:throw`sendTx pre-processing not imeplemented for ${c}`}try{const o=yield this.chains.getChainControllerById(e).sendTx(t,r,n);return this.analytics.track(A.uT.SendAssetSuccess,Ie(Pe({},a),{txHash:o})),o}catch(e){throw this.analytics.track(A.uT.SendAssetFailed,Ie(Pe({},a),{error:null!=(o=null==e?void 0:e.message)?o:JSON.stringify(e)})),e}}))}signPsbt(e,t,r,a){return Ze(this,null,(function*(){const{wallets:n}=Z.Z.getState().wallets,o=n[r],s=o.walletInfo.data,i=o.walletInfo.type;let l="";switch(i){case J.c.Keystore:case J.c.PkKeystore:if(!a)throw"Must pass walletCredentials";l=yield this.masterKeys.generatePasswordFromKeystore(s.keystore,a.walletPassword),a.walletPassword=l;break;case J.c.Ledger:case J.c.Trezor:break;default:throw`sendTx pre-processing not imeplemented for ${i}`}try{return yield this.chains.getChainControllerById(t).signPsbt(e,r,a)}catch(e){throw e}}))}setLoading(e){Z.Z.dispatch((0,W.Xt)({loading:e}))}setOnBoarding(e){Z.Z.dispatch((0,W.K$)({onBoarding:e}))}setInternalUpgradeRequired(e){Z.Z.dispatch((0,W.h5)({internalUpgradeRequired:e}))}toggleInfiniteApproval(){Z.Z.dispatch((0,R.t7)())}toggleCustomRecipient(){Z.Z.dispatch((0,R.h7)())}setSlippage(e){Z.Z.dispatch((0,R.Zj)({slippage:e}))}setSwapPending(e){Z.Z.dispatch((0,R.Zk)({swapPending:e}))}_swap(e,t,r,a){return Ze(this,null,(function*(){const{activeWalletId:o}=Z.Z.getState().wallets,i=t,l=this.chains.getChainControllerById(e);switch(l.getType()){case T.J.Binance:{const e=Ie(Pe({},t),{address:t.address||""});return l.selfCast().sendTx(e,r,a)}case T.J.Bitcoin:case T.J.Litecoin:case T.J.BitcoinCash:return l.selfCast().sendTx(i,r,a);case T.J.Dogecoin:{const e=l.selfCast(),n=yield e.getFeesWithRates(t.memo);return i.feeRate=n.rates[s.FeeOption.Average],e.sendTx(i,r,a)}case T.J.Thorchain:if(t.unsignedStdTx)return yield l.selfCast().signAndBroadcastTx(t.unsignedStdTx,t.fromAddress,o,a);throw"Tx failed";case T.J.Terra:if(t.unsignedStdTx){let e,o=t.memo;if("core/StdTx"===t.unsignedStdTx.type){const{from_address:r,to_address:a,amount:s}=t.unsignedStdTx.value.msg[0].value;e=new n.MsgSend(r,a,null==s?void 0:s.map((e=>n.Coin.fromData(e)))),o=t.unsignedStdTx.value.memo}else{const{sender:r,contract:a,execute_msg:o,coins:s}=t.unsignedStdTx.value;e=new n.MsgExecuteContract(r,a,o,null==s?void 0:s.map((e=>n.Coin.fromData(e))))}const s={memo:o,msgs:[e]};return(yield l.selfCast().signAndBroadcastTx(s,r,t.fromAddress,t.toAddress,a)).txhash}throw"Tx failed";case T.J.Evm:{const e=l.selfCast();let n=yield(0,ae.X7)(e);const o=yield e.getNonce(t.fromAddress),s=Ie(Pe({address:"",isToken:!1,decimals:e.getConfig().decimals},t),{nonce:o,gasLimit:t.gasLimit||1e6});if(e.support(T.B.Eip1559)){const{maxFeePerGas:e,maxPriorityFeePerGas:r}=n;if(s.maxFeePerGas=Number(e.toFixed(9)),s.maxPriorityFeePerGas=Number(r.toFixed(9)),!t.gasLimit)try{const e=yield l.selfCast().estimateTx(s.fromAddress,s.toAddress,y.parseUnits(s.amount).toString(),s.data),t=Number(e.toString());t<s.gasLimit&&(s.gasLimit=t)}catch(e){}}else n&&(s.gasPrice=Number(n.fast.toFixed(9))||0);return e.sendTx(s,r,a,!0)}case T.J.Solana:return l.selfCast().swap(t,r,a);case T.J.Near:{const e=t.data,n={signerId:t.signerId,receiverId:t.receiverId,actions:e.map((e=>({params:e,type:"FunctionCall"})))},o={chainType:T.J.Near,chainId:B.yp.Near,time:0,xdefiId:0,raw:{params:{transaction:n},method:"signAndSendTransaction"}};return(yield l.approveDappTransaction(o,r,a)).toString()}case T.J.Cosmos:return l.selfCast().swap(t.unsignedStdTx,r,a);default:throw w.Z.error("swap error",{swapObj:t}),`${e} not supported yet`}}))}}ke(je,"getWalletIdWithMessage",(e=>{var t,r;const{wallets:a,activeWalletId:n}=Z.Z.getState().wallets,o=pe.j8.getFromAccountIMessage(e);if(!o)return n;const s=null==(t=String(o))?void 0:t.toLowerCase(),i=Object.values(a);w.Z.debug({fromAddr:o,walletsArr:i,wallets:a});const l=i.findIndex((t=>{var r,a;return null==(a=null==(r=t.chainData[e.chainId])?void 0:r.address)?void 0:a.toLowerCase().includes(s)}));if(w.Z.debug({res:l}),l<0)throw`Could not find the wallet attached with the dApp message's address: "${s}"`;return null==(r=i[l])?void 0:r.id}));t()}catch(e){t(e)}}))},7524:(e,t,r)=>{r.d(t,{$:()=>c});var a=r(855835),n=r(450780),o=r.n(n),Buffer=r(348764).Buffer,s=Object.defineProperty,i=(e,t,r)=>(((e,t,r)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class l{constructor(e){i(this,"pubKey"),this.pubKey=e}getAddress(){return a.createHash("sha256").update(this.pubKey).digest().subarray(0,20)}verify(e){return null!==o().sign.open(new Uint8Array(e),new Uint8Array(this.pubKey))}toBuffer(){return Buffer.from(this.pubKey)}toBase64(){return this.pubKey.toString("base64")}toJSONInCodec(){return this.toBase64()}static fromBase64(e){const t=Buffer.from(e,"base64");return new l(t)}static fromJSON(e){return l.fromBase64(e)}}class c{constructor(e){i(this,"pubKey"),i(this,"privKey");const t=o().sign.keyPair.fromSeed(new Uint8Array(e));this.pubKey=new l(Buffer.from(t.publicKey)),this.privKey=e}getPubKey(){return this.pubKey}sign(e){const t=o().sign.keyPair.fromSeed(new Uint8Array(this.privKey));return Buffer.from(o().sign(new Uint8Array(e),new Uint8Array(t.secretKey)))}toBuffer(){return Buffer.from(this.privKey)}toBase64(){return this.privKey.toString("base64")}toJSONInCodec(){return this.toBase64()}static fromBase64(e){const t=Buffer.from(e,"base64");return new c(t)}static fromJSON(e){return c.fromBase64(e)}}},730876:(e,t,r)=>{r.d(t,{H:()=>i});var a=r(202153),n=r(46461),o=Object.defineProperty,s=(e,t,r)=>(((e,t,r)=>{t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class i{constructor(e){if(s(this,"entropy"),s(this,"__isSeed"),!i.isValid(e))throw(0,n.t)("app:controller_errors.mnemonic_phrase_is_not_valid");this.entropy=(0,a.oy)(e),this.__isSeed=!0}static isValid(e){return(0,a._I)(e)}toEntropy(){return this.entropy}toBuffer(){return(0,a.Z1)(this.toString())}toString(){return(0,a.JJ)(this.entropy)}static fromEntropy(e){return new i((0,a.JJ)(e))}static isSeed(e){return!(!e||!e.__isSeed)}}},750231:(e,t,r)=>{r.d(t,{C:()=>n});var a=r(556138);const n=e=>-1!==[a.WalletType.Ledger,a.WalletType.Trezor].indexOf(e)},459457:(e,t,r)=>{r.d(t,{Lp:()=>b});var a=r(341719),n=r(235367),o=r(84087),s=r(501830),i=r(357786),l=r(595210),c=r(636765),d=r(456169),u=r(158042),p=r(369483),h=r.n(p),g=r(847001),f=r(204147),m=r(867885);const y=new l.g((0,u.eI)({url:g.Z.get("GQL_WS_ENDPOINT")})),w=new a.u({uri:g.Z.get("GQL_HTTP_ENDPOINT")}),x=(0,n.V)((({query:e})=>{const t=(0,c.p$)(e);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),y,w),v=new o.h({dataIdFromObject:e=>e.id,possibleTypes:m,typePolicies:{Query:{fields:{assets:{merge:!0}}},AmountType:{keyFields:!1},ImageType:{keyFields:!1},TokenContractType:{keyFields:!1},AssetTokenContractType:{keyFields:!1},AddressType:{keyFields:!1}}});h().config({driver:h().INDEXEDDB,storeName:"cache",name:"xdefi-gql"});new d.cA({cache:v,storage:new d.xm(h()),debug:!1,trigger:"write",maxSize:!1,persistenceMapper:e=>{return t=void 0,r=null,a=function*(){const t=JSON.parse(e),r={},a=[],n=t.ROOT_QUERY;return n&&(r.ROOT_QUERY=Object.keys(n).reduce(((e,t)=>{if("__typename"===t)return e;if(e[t]=n[t],Array.isArray(n[t])){const e=n[t].map((e=>e.__ref));a.push(...e)}else{const e=n[t].__ref;a.push(e)}return e}),{__typename:"Query"}),a.reduce(((e,r)=>(e[r]=t[r],e)),r)),JSON.stringify(r)},new Promise(((e,n)=>{var o=e=>{try{i(a.next(e))}catch(e){n(e)}},s=e=>{try{i(a.throw(e))}catch(e){n(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,s);i((a=a.apply(t,r)).next())}));var t,r,a}});const b=new s.f({link:x,cache:v,name:"extension_app",version:f.i8});window.__APOLLO_CLIENT__=b,window.__APOLLO_GQL__=i.Ps},136438:(e,t,r)=>{r.d(t,{F:()=>s,N:()=>i});var a=r(459457),n=r(237596),o=r(337541);const s=[{name:"Token",fragment:r(691156).h,prefix:"AssetTokenType",field:"tokens"},{name:"CompositeToken",fragment:n.I,prefix:"AssetCompositeTokenType",field:"compositeTokens"},{name:"CryptoCurrency",fragment:o.u,prefix:"AssetCryptoCurrencyType",field:"cryptoCurrencies"}],i=e=>{for(const t of s){const r=a.Lp.readFragment({id:`${t.prefix}:${e}`,fragment:t.fragment,fragmentName:t.name});if(r&&r.id)return r}}},680528:(e,t,r)=>{r.d(t,{Df:()=>u,Ds:()=>d,KV:()=>p,N7:()=>l,SR:()=>c,ZN:()=>n,ft:()=>o,hX:()=>i,iA:()=>s,lo:()=>h,ys:()=>a});var a=(e=>(e.Single="single",e.All="all",e))(a||{}),n=(e=>(e.None="",e.Create="create",e.Import="import",e.ViewOnly="view-only",e.SubAccount="sub-account",e.Hardware="hardware",e.Confirm="confirm",e))(n||{});const o="/";const s="/import-wallet",i="/details",l=["/swapAssets","/swapTransactions","/swap"],c=75e5;const d="safeTransferFrom(address,address,uint256)",u="safeTransferFrom(address,address,uint256,uint256,bytes)",p=Object.freeze({A0:0,A6:6,A8:8,A9:9,A18:18,A24:24}),h=8},371006:(e,t,r)=>{r.a(e,(async(e,a)=>{try{r.d(t,{OQ:()=>l,Pz:()=>u,VY:()=>h,_j:()=>f,im:()=>c,ly:()=>p,uN:()=>g,we:()=>d});var n=r(308787),o=r(876777),s=r(818117),i=e([n]);n=(i.then?(await i)():i)[0];const l=s.ZP.div`
  position: absolute;
  left: 10px;
`,c=(0,s.ZP)(n.FlexBox).attrs({flexDirection:"row",alignItems:"center",justifyContent:"space-evenly"})`
  height: 100%;
  width: 100%;
  position: absolute;
  background-color: ${o.wL.ash};
`,d=(s.ZP.img`
  position: absolute;
  inset: 0;
  width: inherit;
  height: inherit;
`,(0,s.ZP)(n.FlexBox)`
  width: 400px;
  height: 600px;
  background: ${o.wL.black};
  z-index: 2;
  position: relative;
  ${({$isPopup:e})=>e&&"width: 100%;"}
`),u=s.ZP.div`
  position: relative;
  height: 48px;
`,p=s.ZP.div`
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
`,h=(0,s.ZP)(n.FlexBox).attrs((({contentVariant:e})=>({flex:1,m:e?"0":"0 10px 10px"})))`
  box-shadow: 0px 0px 2px rgba(0, 0, 0, 0.3);
  overflow-x: hidden;
  background: ${({theme:e})=>e.colors.mineShaft};

  ${({contentVariant:e})=>e&&s.iv`
      background: ${({theme:e})=>e.colors.black};

      overflow-y: hidden !important;
      flex-direction: column;
      justify-content: space-between;
    `}
`,g=(0,s.ZP)(n.FlexBox).attrs({m:"0 10px",flexDirection:"row",alignItems:"center"})`
  height: 40px;

  border-bottom: 1px solid ${({theme:e})=>e.colors.black};
`,f=(0,s.ZP)(n.FlexBox).attrs({alignItems:"center"})`
  heiht: 40px;
`;a()}catch(e){a(e)}}))},353789:(e,t,r)=>{r.a(e,(async(e,a)=>{try{r.d(t,{og:()=>s.Z});var n=r(213415),o=r(728847),s=r(115105),i=r(710378),l=(r(936352),e([n,o,s,i]));[n,o,s,i]=l.then?(await l)():l,a()}catch(e){a(e)}}))},935527:(e,t,r)=>{r.a(e,(async(e,t)=>{try{var a=r(818117),n=r(308787),o=r(876777),s=e([n]);n=(s.then?(await s)():s)[0];a.ZP.div`
  height: 100%;
  width: 100%;
  position: fixed;
  background-color: ${o.wL.black};
  padding: 12px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  box-sizing: border-box;
`,(0,a.ZP)(n.FlexBox)`
  flex-direction: column;
  width: 100%;
  padding-top: 10px;
  list-style: none;
  margin: 0;
  box-sizing: border-box;
  flex: 1 1 auto;
  overflow: auto;
  row-gap: 24px;

  li {
    margin-left: 0;

    &:first-child {
      margin-top: 10px;
    }
  }
`,a.ZP.div`
  display: flex;
  align-items: center;
  margin-bottom: 13px;
  padding: 20px;
  position: relative;
  overflow: hidden;
`,a.ZP.div`
  display: flex;
  flex-direction: column;
  justify-self: flex-start;
  padding-left: 12px;
  width: calc(100% - 15vw);
`,a.ZP.span`
  margin-top: 9px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
  display: inline-block;
`,(0,a.ZP)(n.Link)`
  text-align: unset;
`,a.ZP.i`
  width: 44px;
  height: 44px;
  background: ${o.wL.deepSea};
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  text-transform: uppercase;
`,a.ZP.div`
  background: ${o.wL.black};
  width: 100%;
  box-sizing: border-box;
  height: 100%;
  flex-direction: column;
  justify-content: space-between;
  display: flex;
  overflow: auto;
`,a.ZP.section`
  letter-spacing: 0.35px;
  padding: 10px;
  border-bottom: 1px solid ${o.wL.black};
  border-top: 1px solid ${o.wL.black};
  display: flex;
  flex-direction: row-reverse;
`,(0,a.ZP)(n.FlexBox)`
  min-width: 72px;
  height: 21px;
  background-color: ${o.wL.darkGrey};
  border-radius: 54px;
  align-items: center;
  justify-content: center;
`,(0,a.ZP)(n.FlexBox)`
  flex: 1;
  text-align: right;
  flex-direction: row;
  justify-content: flex-end;
  align-items: center;
`,a.ZP.img`
  width: 17px;
  height: 17px;
  margin-right: 3px;
`,a.ZP.div`
  display: flex;
  align-items: center;
  justify-content: center;
  padding-bottom: 15px;

  svg {
    margin-right: 5px;
  }
`,a.ZP.div`
  display: flex;
  flex-direction: row;
  z-index: 3;
`,(0,a.ZP)(n.SecondaryButton)`
  margin-right: 10px;
`,(0,a.ZP)(n.PrimaryButton)``,a.ZP.div`
  margin-left: 10px;
  overflow-x: auto;

  > .react-json-view {
    word-break: break-all;
  }
`,(0,a.ZP)(n.FlexBox).attrs({padding:"22px 8px 8px 8px",alignItems:"center"})`
  background: ${o.wL.mineShaft};
  border-radius: 8px;
  row-gap: 16px;
`,(0,a.ZP)(n.ConfirmLedger)`
  position: fixed;
  height: 90px;
`;t()}catch(e){t(e)}}))},851892:(e,t,r)=>{r.d(t,{ZP:()=>g,vy:()=>i});var a=r(409669),n=r.n(a),o=r(691438),s=r(264487);r(179826),r(522933);var i=(e=>(e.GasLimit="GasLimit",e))(i||{});const l={DUST:"error_helper.DUST",INSUFFICIENT_FUNDS:"error_helper.INSUFFICIENT_FUNDS",GasLimit:"error_helper.GUS_LIMIT","-32601":"error_helper.-32601","-32003":"error_helper.-32003","-32004":"error_helper.-32004","-32005":"error_helper.-32005",4001:"error_helper.4001",4100:"error_helper.4100",4200:"error_helper.4200",4900:"error_helper.4900",4901:"error_helper.4901"},c=Object.keys(l),d=["TransportOpenUserCancelled","TransportStatusError","LockedDeviceError","27906","28160","27013","11"],u={27906:"error_helper.ledger_errors.27906",28160:"error_helper.ledger_errors.28160",27013:"error_helper.ledger_errors.27013",11:"error_helper.ledger_errors.11"},p=e=>{var t,r;return n().isAxiosError(e)?null!=(r=null==(t=e.response)?void 0:t.data.message)?r:e.message:(null==e?void 0:e.message)?null==e?void 0:e.message:((0,s.Tb)(e,{tags:{type:"UndefinedError"}}),JSON.stringify(e))},h=e=>c.includes(String(e))||d.includes(String(e)),g=(e,t,r)=>{var a,n,s,i,g,f,m,y,w,x,v,b;if("SERVER_ERROR"===(null==e?void 0:e.code))return"error_helper.error_while_connecting_to_server";if("Attempting to use a disconnected port object"===(null==e?void 0:e.message))return"error_helper.lost_dapp_connection";const C=h(null==(n=null==(a=null==e?void 0:e.data)?void 0:a.originalError)?void 0:n.name)?String(null==(i=null==(s=null==e?void 0:e.data)?void 0:s.originalError)?void 0:i.name):h(null==(f=null==(g=null==e?void 0:e.data)?void 0:g.originalError)?void 0:f.code)?String(null==(y=null==(m=null==e?void 0:e.data)?void 0:m.originalError)?void 0:y.code):h(null==e?void 0:e.name)?String(null==e?void 0:e.statusCode):String(null==e?void 0:e.code);if("-32603"===C)return p(e);if(!t)return c.includes(C)?l[C]:p(e);switch(t){case o.J.Bitcoin:case o.J.BitcoinCash:case o.J.Litecoin:case o.J.Dogecoin:return(null==(b=null==(v=null==(x=null==(w=null==e?void 0:e.data)?void 0:w.originalError)?void 0:x.response)?void 0:v.data)?void 0:b.includes("dust"))?l.DUST:c.includes(C)?l[String(C)]:p(e);case o.J.Evm:case o.J.Terra:case o.J.Solana:case o.J.Binance:case o.J.Thorchain:case o.J.Cosmos:case o.J.Near:default:return c.includes(C)?l[String(C)]:"LEDGER"===r&&d.includes(C)?(e=>{var t,r,a,n,o,s,i,l,c,d;return u[null!=(o=null!=(n=null!=(t=null==e?void 0:e.code)?t:e.statusCode)?n:null==(a=null==(r=null==e?void 0:e.data)?void 0:r.originalError)?void 0:a.statusCode)?o:null==e?void 0:e.name]?u[null!=(d=null!=(c=null!=(s=null==e?void 0:e.code)?s:e.statusCode)?c:null==(l=null==(i=null==e?void 0:e.data)?void 0:i.originalError)?void 0:l.statusCode)?d:null==e?void 0:e.name]:"error_helper.ledger_errors.error_while_connecting_ledger"})(e):p(e)}}},427504:(e,t,r)=>{r.d(t,{Cb:()=>c,R6:()=>u,zr:()=>d});var a=r(256371),n=r(680528),o=r(691438),s=r(99127),i=r(834392),l=r(299246);function c(e,t=!1){return e.isNaN()?"0":`${t&&(0,s.zS)(e)?"~":""}${(0,l.pF)(e,i.DF,{trimTrailingZero:!0})}`}function d(e,t,r=!1){return e.isNaN()?`0 ${t}`:`${r&&(0,s.zS)(e)?"~":""}${(0,l.pF)(e,i.DF,{trimTrailingZero:!0})} ${t}`}function u(e,t,r,s){const i=e.getType();switch(i){case o.J.Binance:return String(t);case o.J.Bitcoin:case o.J.BitcoinCash:case o.J.Litecoin:case o.J.Thorchain:case o.J.Dogecoin:return(0,a.formatUnits)(String(t),8);case o.J.Terra:case o.J.Near:case o.J.Solana:return(0,a.formatUnits)(String(t),null!=s?s:n.KV.A6);default:if(i===o.J.Evm)try{return e.getConfig().tokenSymbol===r?String(t):(0,a.formatUnits)(String(t),s)}catch(e){return"0"}if(i===o.J.Cosmos)return(0,a.formatUnits)(String(t),null!=s?s:n.KV.A6);throw`getAssetAmount not handled for ${e.getType()}`}}},299246:(e,t,r)=>{r.d(t,{pF:()=>s});var a=r(244431),n=r.n(a);r(369983);const o=[{value:1e18,symbol:"E"},{value:1e15,symbol:"P"},{value:1e12,symbol:"T"},{value:1e9,symbol:"B"},{value:1e6,symbol:"M"},{value:1e5,symbol:"K"}],s=(e,t,r={trimTrailingZero:!1})=>{const a=new(n())(e);for(let e=0;e<o.length;e+=1)if(a.gte(o[e].value)){return(a.div(1e5===o[e].value?1e3:o[e].value).toFixed(t).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+o[e].symbol).replace(new RegExp("(\\.0*|(?<=(\\..*))0*)$"),"")}return Number.parseFloat(a.toFixed(t)).toLocaleString(navigator.language,{minimumFractionDigits:r.trimTrailingZero?0:t,maximumFractionDigits:t})}},281672:(e,t,r)=>{r.a(e,(async(e,a)=>{try{r.d(t,{Iq:()=>p,JB:()=>h,Ni:()=>l,UW:()=>i,fU:()=>d,i_:()=>c,nl:()=>u});r(667294);var n=r(519416),o=(r(311428),r(893600)),s=e([o]);function i(){return n.browser.extension.getBackgroundPage().masterController}function l(){const{masterKeys:e}=i();return e}function c(){const{wallets:e}=i();return e}function d(){const{chains:e}=i();return e}function u(){const{dapps:e}=i();return e}function p(){const{dappsProviders:e}=i();return e}function h(){const{assets:e}=i();return e}o=(s.then?(await s)():s)[0];a()}catch(g){a(g)}}))},518949:(e,t,r)=>{r.a(e,(async(e,a)=>{try{r.d(t,{j:()=>d});var n=r(667294),o=r(363119),s=r(834392),i=r(299246),l=r(281672),c=e([l]);l=(c.then?(await c)():c)[0];const d=()=>{const e=(0,o.v9)((e=>e.settings.currency)),[t,r]=(0,n.useState)([]),a=(0,l.UW)(),c=(0,n.useCallback)(((e,r,a)=>{var n,o;if(e===r)return a;const s=null==(n=t.find((t=>t.name===e)))?void 0:n.scale,i=null==(o=t.find((e=>e.name===r)))?void 0:o.scale;return s&&i?a*i/s:0}),[t]),d=(0,n.useCallback)((t=>c("USD",e.name,t)),[e,t,c]),u=(0,n.useCallback)((t=>{const{name:r,symbol:a}=e;if(isNaN(t))return"N/A";const n=(0,i.pF)(t,s.UX,{trimTrailingZero:!0});return isNaN(t)?"N/A":t>0&&t<.001?`< ${a}0.001 ${r}`:`${a}${n} ${r}`}),[e,t]),p=(0,n.useCallback)((t=>{const r=c("USD",e.name,t);return u(r)}),[e,t]),h=(0,n.useCallback)((()=>{return e=void 0,t=null,n=function*(){const e=(yield a.getCachedCurrencies()).fiatCurrencies.map((e=>{var t;return{symbol:e.character||"",name:e.symbol,title:e.name||"",scale:Number(null==(t=e.price)?void 0:t.amount)}}));r(e)},new Promise(((r,a)=>{var o=e=>{try{i(n.next(e))}catch(e){a(e)}},s=e=>{try{i(n.throw(e))}catch(e){a(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,s);i((n=n.apply(e,t)).next())}));var e,t,n}),[]);return(0,n.useEffect)((()=>{h()}),[]),{getConvertedPrice:p,currency:e,allCurrencies:t,convertPrice:c,getFormatedPriceStr:u,getConvertedPriceFromUSD:d}};a()}catch(e){a(e)}}))},771341:(e,t,r)=>{r.d(t,{$Y:()=>U.Z,$u:()=>S.Z,Aq:()=>T.Z,C8:()=>K.Z,Cg:()=>_.Z,DV:()=>v.Z,E4:()=>I.Z,FE:()=>$.Z,I1:()=>Q.Z,IG:()=>P.Z,JE:()=>W.Z,JP:()=>y.Z,KL:()=>h.Z,Lo:()=>E.Z,Oh:()=>M.Z,RN:()=>q.Z,T0:()=>j.Z,TI:()=>g.Z,Tw:()=>C.Z,V_:()=>G.Z,W1:()=>x.Z,Wz:()=>V.Z,XH:()=>u.Z,Ye:()=>B.Z,_$:()=>z.Z,_8:()=>d.Z,_V:()=>k.Z,_m:()=>b.Z,aM:()=>l.Z,aN:()=>N.Z,dY:()=>i.Z,dt:()=>c.Z,fw:()=>H.Z,hO:()=>X.Z,i5:()=>R.Z,k0:()=>n.Z,kF:()=>s.Z,kf:()=>L.Z,o:()=>o.Z,o0:()=>w.Z,pO:()=>A.Z,pu:()=>F.Z,qm:()=>O.Z,sz:()=>p.Z,tE:()=>m.Z,vU:()=>J.Z,wM:()=>Z.Z,xP:()=>f.Z,xk:()=>a.Z,zM:()=>D.Z});r(594508),r(818360),r(32447),r(660296);var a=r(376874),n=(r(515780),r(952068),r(253756),r(265192)),o=(r(236354),r(799719)),s=(r(12127),r(213671),r(680105)),i=r(592717),l=(r(677914),r(443455)),c=r(152903),d=(r(639381),r(153780)),u=(r(318500),r(684546),r(150086),r(295943),r(26190),r(139874)),p=(r(903493),r(424372),r(579497)),h=(r(707560),r(77411)),g=r(327665),f=(r(927547),r(175075)),m=(r(144962),r(741690)),y=r(63880),w=r(460868),x=(r(143831),r(168021)),v=(r(903983),r(896102),r(939869),r(273798),r(13268)),b=r(38707),C=(r(960057),r(241335),r(489733),r(57802),r(596724)),S=r(979433),P=(r(42288),r(782415)),I=(r(638946),r(768892),r(540186)),k=(r(561639),r(100206),r(658242),r(855437),r(28677),r(667342)),Z=(r(379172),r(731188),r(120360),r(888819),r(389460)),j=r(38760),T=(r(825655),r(802177),r(206242),r(807784),r(388557)),O=r(668607),_=(r(857963),r(237942)),B=(r(375037),r(8810),r(119933),r(556364),r(317632)),D=(r(606232),r(739381),r(966520),r(738152),r(753420)),A=(r(832509),r(922751),r(576843),r(537426)),F=(r(518190),r(669185)),N=r(575704),$=(r(293677),r(249162),r(182218),r(844265),r(131410),r(386205)),K=(r(591272),r(533725),r(386663),r(360997)),E=(r(876524),r(255078),r(969355)),W=(r(475940),r(642357)),R=r(388899),L=(r(238555),r(531627),r(158947),r(102152),r(511569),r(633324)),J=(r(870150),r(795992),r(381877)),M=(r(140901),r(828244),r(617916)),z=r(360990),U=r(85373),V=(r(997792),r(616618),r(513376),r(431399),r(672833)),G=r(365370),H=r(773466),q=r(205093),Q=r(259390),X=r(727691);r(454656),r(16051),r(477843),r(80638),r(14752)},431188:(e,t,r)=>{r.d(t,{BM:()=>a.BM,KM:()=>a.KM,gZ:()=>n.g,kq:()=>a.kq,zx:()=>a.zx});var a=r(976829),n=r(889159)},442977:(e,t,r)=>{r.d(t,{U:()=>a.Z});var a=r(725317);r(638531)},308787:(e,t,r)=>{r.a(e,(async(e,a)=>{try{r.d(t,{Avatar:()=>P.qE,AvatarButton:()=>h.Z,BackButton:()=>u.Z,BaseButton:()=>S.zx,BorderedChainIcon:()=>C.Z,CanvasText:()=>T.m,CircularProgress:()=>w.Z,ClipboardButton:()=>g.Z,ConfirmLedger:()=>n.Z,DashLine:()=>l.Z,Dialog:()=>I.Dialog,FlexBox:()=>D.h,FloatingDialog:()=>I.FloatingDialog,HoverButton:()=>p.Z,IconButton:()=>d.Z,IconButtonVariant:()=>S.gZ,InputField:()=>k.U,LinearProgress:()=>x.Z,Link:()=>c.Z,Menu:()=>m.ZP,MultiSelectCheckbox:()=>j.t,Portal:()=>y.Z,PrimaryButton:()=>S.KM,QRCode:()=>Z.s,ScrollingContainer:()=>v.Z,SearchInput:()=>f.Z,SecondaryButton:()=>S.kq,SegmentedPicker:()=>b.Z,SingleSelectCheckbox:()=>j.m,Switch:()=>o.Z,Tooltip:()=>s.ZP,TopSheet:()=>B.V,WalletIcon:()=>A.o,WarningButton:()=>S.BM,useDelayClose:()=>_.n});r(115254),r(680409),r(44687),r(15145);var n=r(802615),o=(r(712354),r(414928)),s=(r(91933),r(356308)),i=r(856310),l=(r(743773),r(934834)),c=r(102964),d=(r(348329),r(772794)),u=r(840592),p=(r(754937),r(946969)),h=r(604275),g=r(220138),f=r(507263),m=(r(670585),r(23985),r(459251),r(215862),r(404268)),y=r(302767),w=r(179145),x=r(316284),v=(r(861634),r(826705),r(894900)),b=r(991660),C=(r(880465),r(139610)),S=r(431188),P=r(585331),I=r(123206);r.o(I,"CanvasText")&&r.d(t,{CanvasText:function(){return I.CanvasText}}),r.o(I,"FlexBox")&&r.d(t,{FlexBox:function(){return I.FlexBox}}),r.o(I,"InputField")&&r.d(t,{InputField:function(){return I.InputField}}),r.o(I,"MultiSelectCheckbox")&&r.d(t,{MultiSelectCheckbox:function(){return I.MultiSelectCheckbox}}),r.o(I,"QRCode")&&r.d(t,{QRCode:function(){return I.QRCode}}),r.o(I,"SingleSelectCheckbox")&&r.d(t,{SingleSelectCheckbox:function(){return I.SingleSelectCheckbox}}),r.o(I,"TopSheet")&&r.d(t,{TopSheet:function(){return I.TopSheet}}),r.o(I,"WalletIcon")&&r.d(t,{WalletIcon:function(){return I.WalletIcon}}),r.o(I,"useDelayClose")&&r.d(t,{useDelayClose:function(){return I.useDelayClose}});var k=r(442977),Z=r(189157),j=r(748016),T=r(525922),O=r(462906);r.o(O,"FlexBox")&&r.d(t,{FlexBox:function(){return O.FlexBox}}),r.o(O,"TopSheet")&&r.d(t,{TopSheet:function(){return O.TopSheet}}),r.o(O,"WalletIcon")&&r.d(t,{WalletIcon:function(){return O.WalletIcon}}),r.o(O,"useDelayClose")&&r.d(t,{useDelayClose:function(){return O.useDelayClose}});var _=r(459221),B=r(124358),D=r(79295),A=r(444644),F=e([i,C]);[i,C]=F.then?(await F)():F,a()}catch(e){a(e)}}))},101668:(e,t,r)=>{r.d(t,{G:()=>a});var a=(e=>(e.Node="node",e.Rpc="rpc",e))(a||{})},605930:(e,t,r)=>{r.d(t,{Jz:()=>o,Ot:()=>l,RP:()=>s,lA:()=>i});r(847001);var a=r(581354),n=r.n(a);r(691438),r(519416);const o=e=>n().SHA256(e).toString(n().enc.Hex),s=(e,t)=>{if(e===t)return!0;const r=e.split("."),a=t.split("."),n=Math.min(r.length,a.length);for(let e=0;e<n;e++){if(parseInt(r[e])>parseInt(a[e]))return!0;if(parseInt(r[e])<parseInt(a[e]))return!1}return r.length>a.length||!(r.length<a.length)},i=(e,t)=>(null==e?void 0:e.symbol)===(null==t?void 0:t.symbol)&&(null==e?void 0:e.ticker)===(null==t?void 0:t.ticker)&&(null==e?void 0:e.chain)===(null==t?void 0:t.chain),l=(e,t)=>{if(!t)throw"Network ID is required";return`${e}_${t}`}},218006:(e,t,r)=>{r.d(t,{O1:()=>n,kw:()=>o,lk:()=>a});r(496486);const a=e=>null==e?void 0:e.toLowerCase().split(" ").reduce(((e,t)=>{var r;return e+((null==(r=t[0])?void 0:r.toUpperCase())+t.slice(1))})),n=e=>/^[A-HJ-NP-Za-km-z1-9]*$/.test(e),o=e=>e.replace(/[']/g,"")},862828:(e,t,r)=>{e.exports=r.p+"4ed302b26a0b4acc7a20.svg"},919029:(e,t,r)=>{e.exports=r.p+"073e8874151075700917.svg"},258416:(e,t,r)=>{e.exports=r.p+"203348e1c90f4d62be3d.svg"},931748:(e,t,r)=>{e.exports=r.p+"1cc18714402100e1dec6.svg"}},d={};function u(e){var t=d[e];if(void 0!==t)return t.exports;var r=d[e]={id:e,loaded:!1,exports:{}};return c[e].call(r.exports,r,r.exports,u),r.loaded=!0,r.exports}u.m=c,u.amdO={},e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},u.a=(n,o,s)=>{var i;s&&((i=[]).d=-1);var l,c,d,u=new Set,p=n.exports,h=new Promise(((e,t)=>{d=t,c=e}));h[t]=p,h[e]=e=>(i&&e(i),u.forEach(e),h.catch((e=>{}))),n.exports=h,o((n=>{var o;l=(n=>n.map((n=>{if(null!==n&&"object"==typeof n){if(n[e])return n;if(n.then){var o=[];o.d=0,n.then((e=>{s[t]=e,a(o)}),(e=>{s[r]=e,a(o)}));var s={};return s[e]=e=>e(o),s}}var i={};return i[e]=e=>{},i[t]=n,i})))(n);var s=()=>l.map((e=>{if(e[r])throw e[r];return e[t]})),c=new Promise((t=>{(o=()=>t(s)).r=0;var r=e=>e!==i&&!u.has(e)&&(u.add(e),e&&!e.d&&(o.r++,e.push(o)));l.map((t=>t[e](r)))}));return o.r?c:s()}),(e=>(e?d(h[r]=e):c(p),a(i)))),i&&i.d<0&&(i.d=0)},n=[],u.O=(e,t,r,a)=>{if(!t){var o=1/0;for(c=0;c<n.length;c++){for(var[t,r,a]=n[c],s=!0,i=0;i<t.length;i++)(!1&a||o>=a)&&Object.keys(u.O).every((e=>u.O[e](t[i])))?t.splice(i--,1):(s=!1,a<o&&(o=a));if(s){n.splice(c--,1);var l=r();void 0!==l&&(e=l)}}return e}a=a||0;for(var c=n.length;c>0&&n[c-1][2]>a;c--)n[c]=n[c-1];n[c]=[t,r,a]},u.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return u.d(t,{a:t}),t},s=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,u.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var r=Object.create(null);u.r(r);var a={};o=o||[null,s({}),s([]),s(s)];for(var n=2&t&&e;"object"==typeof n&&!~o.indexOf(n);n=s(n))Object.getOwnPropertyNames(n).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,u.d(r,a),r},u.d=(e,t)=>{for(var r in t)u.o(t,r)&&!u.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},u.f={},u.e=e=>Promise.all(Object.keys(u.f).reduce(((t,r)=>(u.f[r](e,t),t)),[])),u.u=e=>"js/"+({3096:"queryString",4604:"tsub-middleware",7493:"schemaFilter",8119:"auto-track",8150:"legacyVideos",9214:"remoteMiddleware",9464:"ajs-destination"}[e]||e)+".bundle.js",u.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),u.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i={},l="xdefi-extension:",u.l=(e,t,r,a)=>{if(i[e])i[e].push(t);else{var n,o;if(void 0!==r)for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++){var d=s[c];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==l+r){n=d;break}}n||(o=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,u.nc&&n.setAttribute("nonce",u.nc),n.setAttribute("data-webpack",l+r),n.src=e),i[e]=[t];var p=(t,r)=>{n.onerror=n.onload=null,clearTimeout(h);var a=i[e];if(delete i[e],n.parentNode&&n.parentNode.removeChild(n),a&&a.forEach((e=>e(r))),t)return t(r)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=p.bind(null,n.onerror),n.onload=p.bind(null,n.onload),o&&document.head.appendChild(n)}},u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),u.v=(e,t,r,a)=>{var n=fetch(u.p+""+r+".module.wasm");return"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(n,a).then((t=>Object.assign(e,t.instance.exports))):n.then((e=>e.arrayBuffer())).then((e=>WebAssembly.instantiate(e,a))).then((t=>Object.assign(e,t.instance.exports)))},u.p="",(()=>{var e={4042:0,5534:0};u.f.j=(t,r)=>{var a=u.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var n=new Promise(((r,n)=>a=e[t]=[r,n]));r.push(a[2]=n);var o=u.p+u.u(t),s=new Error;u.l(o,(r=>{if(u.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var n=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",s.name="ChunkLoadError",s.type=n,s.request=o,a[1](s)}}),"chunk-"+t,t)}},u.O.j=t=>0===e[t];var t=(t,r)=>{var a,n,[o,s,i]=r,l=0;if(o.some((t=>0!==e[t]))){for(a in s)u.o(s,a)&&(u.m[a]=s[a]);if(i)var c=i(u)}for(t&&t(r);l<o.length;l++)n=o[l],u.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return u.O(c)},r=self.webpackChunkxdefi_extension=self.webpackChunkxdefi_extension||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var p=u.O(void 0,[1959,6221,6983,2818,4030,1628,4809,6087,9675,9938,9357,7536,103,2313,3184,7683,1891,889,6839,6454,4263,5038,9706,6106,7664,2391,6025,5298,382,696,7099,4085],(()=>u(11351)));p=u.O(p)})();
//# sourceMappingURL=importAccount.bundle.js.map