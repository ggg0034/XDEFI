!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r=(new Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="08d081b0-695e-4f8e-a177-e67afba547e9",e._sentryDebugIdIdentifier="sentry-dbid-08d081b0-695e-4f8e-a177-e67afba547e9")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"28.2.2"},(self.webpackChunkxdefi_extension=self.webpackChunkxdefi_extension||[]).push([[794],{400794:(e,r,n)=>{n.a(e,(async(e,a)=>{try{n.r(r),n.d(r,{default:()=>M});var t=n(785893),s=n(646284),i=n(835534),o=n(691438),d=n(831352),l=n(177616),c=n(327194),u=n(739989),f=n(281672),g=n(667294),m=n(230811),p=n(363119),h=n(972819),w=n(25022),v=n(162318),y=n(184698),x=n(284755),b=n(851892),I=n(308787),j=n(519416),_=n(101814),S=n(901176),C=n(24296),Z=n(123226),T=e([s,i,f,h,v,y,x,I,_,S,C]);[s,i,f,h,v,y,x,I,_,S,C]=T.then?(await T)():T;const M=({transactionMsg:e})=>{var r;const{t:n}=(0,m.$G)("app"),{onRequestPermission:a}=(0,y.gI)(),[T,M]=(0,g.useState)(!1),k=(0,f.UW)(),{addNotification:B}=(0,h.Z)(),P=(0,f.nl)(),D=(0,f.Ni)(),{requireTxPassword:N}=(0,p.v9)((e=>e.settings)),E=(0,p.v9)((e=>e.wallets.wallets[e.wallets.activeWalletId])),F=(0,g.useMemo)((()=>e.raw.params.length?e.raw.params[0]:e.raw.params),[e]),$=(0,g.useMemo)((()=>{var r;return(null==(r=e.origin)?void 0:r.url)||""}),[null==(r=e.origin)?void 0:r.url]),R=(0,g.useMemo)((()=>{var e,r;if(F.amount||F.value||"0"){return(0,d.ym)(F.amount)?l.formatUnits(null==(e=null==F?void 0:F.amount)?void 0:e.amount,null==(r=null==F?void 0:F.amount)?void 0:r.decimals).toString():l.formatUnits(c.O$.from(null==F?void 0:F.amount).toString()).toString()}return"0"}),[F.amount,F.value]),U=k.chains.getChainControllerById(e.chainId),{fee:W,setFee:A}=(0,S.g)({chain:U,params:F}),G=(0,C.z)({chain:U,params:F}),J=()=>{u.Z.info("handleReject ",e),j.browser.runtime.sendMessage(null,{xdefiId:e.xdefiId,raw:{id:e.xdefiId,error:n("alert.transaction.errors.user_rejected_message_signing.message")}}),P.removeMessageById(e.xdefiId),window.close()},{openDialog:O,onCloseDialog:q,handleConfirm:L}=(0,s.useConfirmDialog)((r=>{return t=void 0,s=null,d=function*(){if(u.Z.debug({method:"handleApprove"}),N&&!r)return;u.Z.debug({msg:"preMP",requireTxPassword:N});const t=r||D.masterPassword;if(t){M(!0);try{const r=i.Z.getWalletIdWithMessage(e);yield k.approveDappsTransaction(e,r,w.GG.Transaction,{walletPassword:t},{}),P.removeMessageById(e.xdefiId),window.close()}catch(r){if("TransportOpenUserCancelled"===(null==r?void 0:r.name))return B({title:n("alert.transaction.hardware.error.main.title"),type:"error",message:n("alert.transaction.hardware.error.main.message")}),a();if(null==r?void 0:r.message.includes("Invalid password"))return B({title:n("alert.wallet.password.error.incorrect.title"),type:"error",message:n("alert.wallet.password.error.incorrect.messages.try_again")});const t=(0,b.sJ)(r);u.Z.error("Transfer error",{error:t}),B({title:n("alert.transaction.errors.transfer.title"),type:"error",message:n((0,b.ZP)(t,o.J.Binance))}),u.Z.error({transactionMsg:"Error in message approval",e:r}),j.browser.runtime.sendMessage(void 0,{xdefiId:e.xdefiId,raw:{id:e.xdefiId,error:JSON.stringify(r)}})}finally{M(!1)}u.Z.info("end handleApprove")}},new Promise(((e,r)=>{var n=e=>{try{i(d.next(e))}catch(e){r(e)}},a=e=>{try{i(d.throw(e))}catch(e){r(e)}},i=r=>r.done?e(r.value):Promise.resolve(r.value).then(n,a);i((d=d.apply(t,s)).next())}));var t,s,d}));return(0,t.jsx)(Z.k,{body:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.ConfirmDialog,{open:O,onClose:q,onSubmit:L}),(0,t.jsx)(I.ScrollBars,{autoHide:!0,children:(0,t.jsxs)(I.FlexBox,{height:"100%",children:[(0,t.jsx)(v.Z,{url:$,displayAmount:R,action:"approve",from:F.from,to:F.to||F.recipient,assetSymbol:G,defaultIcon:U.getConfig().image,isTokenTransfer:!1,chainId:U.getId(),fee:Number(W),hideBack:!0}),(0,t.jsx)(_.Z,{chainId:U.getId(),method:e.raw.method,params:F,setFee:A}),(0,t.jsx)(x.Z,{handleConfirm:()=>L(),fee:Number(W),chainId:U.getId(),assetSymbol:G,errors:{},handleReject:J,loading:T,selectedWallet:E})]})})]})})};a()}catch(e){a(e)}}))},101814:(e,r,n)=>{n.a(e,(async(e,a)=>{try{n.d(r,{Z:()=>h});var t=n(785893),s=n(244431),i=n(831352),o=n(206508),d=n(281672),l=n(230811),c=n(667294),u=n(308787),f=n(876777),g=n(818117),m=e([o,d,u]);[o,d,u]=m.then?(await m)():m;const p=(0,g.ZP)(u.Card)`
  padding-bottom: 20px;
  border-bottom: 1px solid ${f.wL.black};
`,h=({params:e,method:r,setFee:n})=>{const a=(0,d.fU)(),{t:u}=(0,l.$G)("app");switch((0,c.useEffect)((()=>{a.getChainControllerById(i.yp.Binance).getSendFee().then((e=>n(new s.BigNumber(e))))}),[a,n]),r){case i.c$.SignTransaction:return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[u("binance_signing.function_type"),(0,t.jsx)("span",{children:u("binance_signing.signing")})]}),(0,t.jsx)("div",{children:(0,t.jsx)("pre",{children:JSON.stringify(e,null,4)})})]});case i.c$.Transfer:return(0,t.jsxs)(p,{noShadow:!0,children:[(0,t.jsx)(o.xZ,{dashedLine:!0,functionType:"Transfer"}),(0,t.jsx)(o.ot,{errors:{},memo:e.memo||"",tooltipString:"add metadata"})]});default:return(0,t.jsx)("div",{children:(0,t.jsx)("div",{children:u("binance_signing.unknown")})})}};a()}catch(e){a(e)}}))}}]);
//# sourceMappingURL=794.bundle.js.map