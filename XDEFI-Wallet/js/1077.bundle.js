!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8cee787e-918d-49f8-8324-c610e81c9950",e._sentryDebugIdIdentifier="sentry-dbid-8cee787e-918d-49f8-8324-c610e81c9950")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"28.2.2"},(self.webpackChunkxdefi_extension=self.webpackChunkxdefi_extension||[]).push([[1077],{744238:(e,t,r)=>{r.a(e,(async(e,t)=>{try{r(785893),r(244431),r(230811);var n=r(308787),o=(r(561277),r(234130),r(316708)),s=e([n,o]);[n,o]=s.then?(await s)():s;t()}catch(e){t(e)}}))},557938:(e,t,r)=>{r.a(e,(async(e,n)=>{try{r.d(t,{Z:()=>C});var o=r(785893),s=r(230811),a=r(646284),l=r(308787),i=r(876777),c=r(818117),d=r(729154),u=r(593159),p=e([a,l,u]);[a,l,u]=p.then?(await p)():p;var g=Object.defineProperty,h=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))y.call(t,r)&&b(e,r,t[r]);if(h)for(var r of h(t))f.call(t,r)&&b(e,r,t[r]);return e};const v=(0,c.ZP)(l.InputField)`
  > div:nth-child(2) {
    ${({$asDappPage:e})=>e&&"border: 1px solid white;"}
  }
`,w=c.ZP.div`
  display: flex;
  flex-direction: column;
  padding: 10px 20px;
  flex: 1;
  margin-top: 17px;
  margin-bottom: 10px;
`,_=(0,c.ZP)(l.FlexBox)`
  margin-bottom: 20px;

  ${({$asDappPage:e})=>e&&`   border-radius: 8px;\n        border: 1px solid ${i.wL.white};`}
  li {
    align-items: flex-start !important;
    height: 50px;

    div:first-child {
      ${({$asDappPage:e})=>e&&`background-color: ${i.wL.mineShaft};`}
      &:hover {
        background-color: ${({theme:{palette:e}})=>e.container.hover};
      }
    }
  }
`,Z=c.ZP.form`
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  height: 100%;

  ${({$asDappPage:e})=>e&&"flex-basis: 350px;"}
  & div > div {
    & > div {
      & > input {
        margin-bottom: 0;
      }
    }
  }
`,x=(0,c.ZP)(l.BaseButton)`
  margin-top: auto !important;
`,P=c.ZP.div`
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1300;
  background: ${"rgba(8, 8, 8, 0.5)"};
  backdrop-filter: blur(4px);
`,C=({asDappPage:e=!1})=>{var t,r,n;const{submitHandler:i,setSelectedChain:c,selectedChain:p,availableChains:g,register:h,handleSubmit:y,errors:f,loading:b}=(0,u.Z)(e),{t:C}=(0,s.$G)("app");return(0,o.jsxs)(o.Fragment,{children:[b&&(0,o.jsx)(P,{children:(0,o.jsx)(a.Loader,{})}),(0,o.jsx)(w,{children:(0,o.jsxs)(Z,{$asDappPage:e,onSubmit:y(i),children:[(0,o.jsxs)(l.FlexBox,{gridGap:8,children:[(0,o.jsx)(_,{$asDappPage:e,children:(0,o.jsx)(a.FullWidthSelectChain,{onSelect:e=>c(e),value:p,chains:g,includeAll:!1})}),(0,o.jsx)(v,m({$asDappPage:e,type:"text",label:C("custom_token.address_label"),placeholder:C("custom_token.address_placeholder"),errorMsg:null==(t=f.address)?void 0:t.message,dataTestId:"addressFld"},h("address"))),(0,o.jsx)(v,m({$asDappPage:e,type:"text",label:C("custom_token.symbol_label"),dataTestId:"symbolFld",errorMsg:null==(r=f.symbol)?void 0:r.message,placeholder:C("custom_token.symbol_placeholder"),mt:10},h("symbol"))),(0,o.jsx)(v,m({$asDappPage:e,type:"number",label:C("custom_token.decimals_label"),errorMsg:null==(n=f.decimals)?void 0:n.message,dataTestId:"precisionFld",placeholder:C("custom_token.decimals_placeholder"),mt:10},h("decimals")))]}),(0,o.jsx)(x,{type:"submit",fullWidth:!0,dataTestId:"nextBtn",children:(0,o.jsx)(d.Z,{children:C("general.next")})})]})})]})};n()}catch(e){n(e)}}))},579497:(e,t,r)=>{r.d(t,{Z:()=>y});var n=r(785893),o=r(667294),s=r(327754),a=r(876777),l=Object.defineProperty,i=Object.defineProperties,c=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const h=o.forwardRef((function(e,t){const r=(0,s.F)({[a.$T.Dark]:"white"}),o=e.color||r;return(0,n.jsxs)("svg",(l=((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&g(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&g(e,r,t[r]);return e})({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),i(l,c({children:[(0,n.jsx)("path",{d:"M8 2.4C11.087 2.4 13.6 4.913 13.6 8C13.6 11.087 11.087 13.6 8 13.6C4.913 13.6 2.4 11.087 2.4 8C2.4 4.913 4.913 2.4 8 2.4ZM8 1C4.136 1 1 4.136 1 8C1 11.864 4.136 15 8 15C11.864 15 15 11.864 15 8C15 4.136 11.864 1 8 1Z",fill:o||"#969DA3"}),(0,n.jsx)("path",{d:"M8.00005 12.2001C7.61505 12.2001 7.30005 11.8851 7.30005 11.5001V7.3001C7.30005 6.9151 7.61505 6.6001 8.00005 6.6001C8.38505 6.6001 8.70005 6.9151 8.70005 7.3001V11.5001C8.70005 11.8851 8.38505 12.2001 8.00005 12.2001Z",fill:o||"#969DA3"}),(0,n.jsx)("path",{d:"M8.00005 5.1998C8.38665 5.1998 8.70005 4.8864 8.70005 4.4998C8.70005 4.11321 8.38665 3.7998 8.00005 3.7998C7.61345 3.7998 7.30005 4.11321 7.30005 4.4998C7.30005 4.8864 7.61345 5.1998 8.00005 5.1998Z",fill:o||"#969DA3"})]}))));var l})),y=o.memo(h)},175075:(e,t,r)=>{r.d(t,{Z:()=>y});var n=r(785893),o=r(667294),s=r(327754),a=r(876777),l=Object.defineProperty,i=Object.defineProperties,c=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const h=o.forwardRef((function(e,t){const r=(0,s.F)({[a.$T.Dark]:"white"}),o=e.color||r;return(0,n.jsxs)("svg",(l=((e,t)=>{for(var r in t||(t={}))u.call(t,r)&&g(e,r,t[r]);if(d)for(var r of d(t))p.call(t,r)&&g(e,r,t[r]);return e})({width:"11",height:"11",viewBox:"0 0 11 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),i(l,c({children:[(0,n.jsx)("path",{d:"M2.5 1C1.67157 1 1 1.67157 1 2.5V8.5C1 9.32843 1.67157 10 2.5 10H8.5C9.32843 10 10 9.32843 10 8.5V7.5C10 7.22386 10.2239 7 10.5 7C10.7761 7 11 7.22386 11 7.5V8.5C11 9.88071 9.88071 11 8.5 11H2.5C1.11929 11 0 9.88071 0 8.5V2.5C0 1.11929 1.11929 0 2.5 0H3.5C3.77614 0 4 0.223858 4 0.5C4 0.776142 3.77614 1 3.5 1H2.5Z",fill:o||"#2041E0"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.00001 0.5C6.00001 0.223858 6.22387 0 6.50001 0H10.5C10.7761 0 11 0.223858 11 0.5V4.5C11 4.77614 10.7761 5 10.5 5C10.2239 5 10 4.77614 10 4.5V1.69208L4.85001 6.84207C4.65475 7.03733 4.33817 7.03733 4.14291 6.84207C3.94764 6.64681 3.94764 6.33023 4.14291 6.13496L9.27787 1H6.50001C6.22387 1 6.00001 0.776142 6.00001 0.5Z",fill:o||"#2041E0"})]}))));var l})),y=o.memo(h)},144943:(e,t,r)=>{r.d(t,{H:()=>a,u:()=>l});var n=r(667294),o=r(363119),s=r(99127);const a=e=>"UNI"===e||"UNI-V2"===e||"SLP"===e,l=(e,t)=>{const{activeWalletId:r,lpTokensByWallet:a}=(0,o.v9)((e=>e.wallets));return(0,n.useMemo)((()=>{if(e&&t&&a&&a[r]){const n=(0,s.uz)(t.id||t.address,e);return a[r][n]}}),[a,r,t,e])}},995928:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(785893),o=r(876777),s=r(15145),a=Object.defineProperty,l=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u=e=>{var t=e,{dataTestId:r}=t,a=((e,t)=>{var r={};for(var n in e)i.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&c.call(e,n)&&(r[n]=e[n]);return r})(t,["dataTestId"]);return(0,n.jsx)(s.Z,((e,t)=>{for(var r in t||(t={}))i.call(t,r)&&d(e,r,t[r]);if(l)for(var r of l(t))c.call(t,r)&&d(e,r,t[r]);return e})({fontSize:14,lineHeight:"20px",color:o.wL.midGrey,fontWeight:400,"data-testid":r},a))}},691292:(e,t,r)=>{r.a(e,(async(e,n)=>{try{r.d(t,{Z:()=>b,c:()=>f});var o=r(785893),s=r(667294),a=r(363119),l=r(457817),i=r(281672),c=e([l,i]);[l,i]=c.then?(await c)():c;var d=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(u)for(var r of u(t))g.call(t,r)&&h(e,r,t[r]);return e};const f=(0,s.createContext)({}),b=({children:e,type:t})=>{const r=(0,i.UW)(),{walletNotifications:n,dappNotifications:c}=(0,a.v9)((e=>e.notifications)),d=(0,s.useCallback)((e=>{var o,s;switch(t){case"wallet":(null==e?void 0:e.message)&&(null==e?void 0:e.message)===(null==(o=n[0])?void 0:o.message)||r.addWalletNotification(y({},e));break;case"dapp":(null==e?void 0:e.message)!==(null==(s=c[0])?void 0:s.message)&&r.addDappNotification(y({},e));break;default:throw`Invalid type: ${t}`}}),[r,c,n,t]),u=(0,s.useCallback)((()=>{switch(t){case"wallet":r.removeWalletNotification();break;case"dapp":r.removeDappNotification();break;default:throw`Invalid type: ${t}`}}),[r,t]),p={addNotification:d,removeNotification:u,type:t},g=(0,a.v9)((e=>{var r,n,o,s;return"wallet"===t?null!=(n=null==(r=null==e?void 0:e.notifications)?void 0:r.walletNotifications)?n:[]:null!=(s=null==(o=null==e?void 0:e.notifications)?void 0:o.dappNotifications)?s:[]}));return(0,o.jsxs)(f.Provider,{value:p,children:[e,!!(null==g?void 0:g.length)&&(0,o.jsx)(l.ZP,{notification:null==g?void 0:g[0],onClose:u,type:null==g?void 0:g[0].type},g[0].id)]})};n()}catch(e){n(e)}}))},721892:(e,t,r)=>{r.d(t,{Z:()=>M});var n=r(379562),o=r(778121),s=r(822485),a=r(651298),l=r(774677),i=r(731241),c=r(875039),d=r(59917),u=r(871190),p=r.n(u),g=r(661820),h=r(679742),y=r(617656),f=r(592479),b=r(939165),m=r(953518),v=r(327194),w=r(879821),_=r(968447),Z=r(208004),x=r(117221),P=r(739989),C=r(369943),A=r(605930),S=r(256371),T=r(46461),I=r(684448),E=r(691438),k=r(99127),D=r(995920),Buffer=r(348764).Buffer,O=Object.defineProperty,j=Object.defineProperties,$=Object.getOwnPropertyDescriptors,B=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,X=(e,t,r)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,F=(e,t,r)=>new Promise(((n,o)=>{var s=e=>{try{l(r.next(e))}catch(e){o(e)}},a=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);l((r=r.apply(e,t)).next())}));const H="44'/60'/0'/0/X";class M extends D.Z{constructor(){var e;super(...arguments),X(this,"symbol"!=typeof(e="checkETHAppVersion")?e+"":e,(e=>F(this,null,(function*(){const{version:t}=yield e.getAppConfiguration();if(!(0,A.RP)(t,"1.9.6"))throw(0,T.t)("app:controller_errors.ledger.please_upgrade_ethereum_on_ledger")}))))}getChainTypes(){return Object.values(E.J)}getEIP1024PublicEncryptionKey(e){return F(this,arguments,(function*(e,t=H){const r=this.getDerivationPathWithOffset(t,e),n=yield c.Z.create();try{const e=new l.Z(n);yield this.checkETHAppVersion(e);const t=yield e.getEIP1024PublicEncryptionKey(r);return P.Z.debug({res:t}),t.publicKey}catch(e){throw P.Z.debug({err:e}),e}finally{n.close()}}))}getEIP1024SharedSecret(e,t,r="44'/60'/0'/0/X"){return F(this,null,(function*(){const n=r.replace("X",t.toString()),o=yield c.Z.create();try{const t=new l.Z(o);yield this.checkETHAppVersion(t);const r=yield t.getEIP1024SharedSecret(n,e);return P.Z.debug({res:r}),r.sharedSecret}catch(e){throw P.Z.debug({err:e}),e}finally{o.close()}}))}getEVMAddresses(e){return F(this,arguments,(function*(e,t=0,r=5,n){const o=n||H;let s;try{s=yield c.Z.create();const n=new l.Z(s),a=e.getConfig().tokenSymbol,i=yield n.getAddress(o.replace("X","0")),d=(0,k.Zy)(e.getType(),o,i.address),u=[];for(let s=t;s<t+r;s++){const t=o.replace("X",s.toString());try{const r=yield n.getAddress(t);u.push({id:`${a}-${t}`,derivation:o,address:r.address,publicKey:r.publicKey,testnetDerivation:o,testnetAddress:r.address,testnetPublicKey:r.publicKey,label:`Account ${s}`,balance:"0",fiatBalance:"0",selected:!1,chainId:e.getId(),walletIndex:s,rootWalletId:d})}catch(e){P.Z.error(`Error: on getting adddress from path ${t}`,e)}}return u}catch(e){throw P.Z.debug({err:e}),e}finally{s.close()}}))}static getFantomAddress(e,t=0,r){return F(this,null,(function*(){const n=yield this.getFantomAddresses(e,t,1,r);if(n.length)return n[0];throw(0,T.t)("app:controller_errors.no_account_found")}))}static getFantomAddresses(e){return F(this,arguments,(function*(e,t=0,r=5,n){let o;const s=[];try{o=yield c.Z.create();const a=new I.ZP(o),l=yield a.listAddresses(t,t,r);if(l.length>0)for(let r=0;r<l.length;r++){const o=l[r],i=r+t,c=n||H,d=c.replace("X",i.toString()),u=yield a.getPublicKey(i);u&&s.push({id:`fantom-${d}-${i}`,derivation:c,address:o,publicKey:b.hexlify(u.publicKey),testnetDerivation:c,testnetAddress:o,testnetPublicKey:b.hexlify(u.publicKey),label:`Account ${i}`,balance:"0",fiatBalance:"0",selected:!1,chainId:e.getId(),walletIndex:i})}return P.Z.debug({results:s}),s}catch(e){throw P.Z.debug({err:e}),e}finally{o.close()}}))}signEVMTransaction(e,t,r){return F(this,null,(function*(){const n=m.serialize(r).substring(2),o=e.replace("X",t.toString()),s=yield c.Z.create();try{const e=new l.Z(s);yield this.checkETHAppVersion(e);const t=yield e.signTransaction(o,n);return P.Z.debug({sig:t}),{v:v.O$.from("0x"+t.v).toNumber(),r:"0x"+t.r,s:"0x"+t.s}}catch(e){throw P.Z.debug({err:e}),e}finally{s.close()}}))}rejectTransaction(){return F(this,null,(function*(){const e=yield c.Z.openConnected();try{const t=new l.Z(e);yield this.checkETHAppVersion(t).then((e=>P.Z.info("then",e))).catch((e=>P.Z.info("catch",e))),yield t.signTransaction("","")}catch(e){throw P.Z.info("🚀 ~ file: LedgerController.ts:396 ~ LedgerController ~ rejectTransaction ~ err",e),e}finally{e.close()}}))}signETHPersonalMessage(e,t,r){return F(this,null,(function*(){P.Z.info({derivPath:e,msgHash:r});const n=e.replace("X",t.toString()),o=yield c.Z.create();try{const e=new l.Z(o),t=r.startsWith("0x")?r.substring(2):r,s=yield e.signPersonalMessage(n,t);P.Z.info({result:s});const a={v:v.O$.from("0x"+s.v).toNumber(),r:"0x"+s.r,s:"0x"+s.s};return b.joinSignature(a)}catch(e){throw P.Z.debug({err:e}),e}finally{o.close()}}))}signEIP712MessageLegacy(e,t,r){return F(this,null,(function*(){const n=(0,C.e)(r);return this.signETHPersonalMessage(e,t,n)}))}signEIP712Message(e,t,r,n=!0){return F(this,null,(function*(){const{message:o,domain:s}=(0,C.M)(r,n);return this.signEIP712HashedMessage(e,t,s.toString("hex"),o.toString("hex"))}))}signEIP712HashedMessage(e,t,r,n){return F(this,null,(function*(){P.Z.info({derivPath:e,domainSeparatorHex:r,hashStructMessageHex:n});const o=e.replace("X",t.toString()),s=yield c.Z.create();try{const e=new l.Z(s);let t=yield e.signEIP712HashedMessage(o,r,n);return a=((e,t)=>{for(var r in t||(t={}))N.call(t,r)&&X(e,r,t[r]);if(B)for(var r of B(t))K.call(t,r)&&X(e,r,t[r]);return e})({},t),i={r:"0x"===t.r.substring(0,2)?t.r:"0x"+t.r,s:"0x"===t.s.substring(0,2)?t.s:"0x"+t.s},t=j(a,$(i)),P.Z.debug({res:t}),(0,S.joinSignature)(t)}catch(e){throw P.Z.debug({err:e}),e}finally{s.close()}var a,i}))}static signAVAXTransaction(e,t,r){return F(this,null,(function*(){const n=e.replace("X",t.toString()),o=yield c.Z.create();try{const e=new l.Z(o),t=yield e.signTransaction(`m/${n}`,r);return P.Z.debug({res:t}),t}catch(e){throw P.Z.debug({err:e}),e}finally{o.close()}}))}signFantomTransaction(e,t){return F(this,null,(function*(){const r=w.yl(),n=new f.Z(r,e);try{const e=yield n.signTransaction(t);return P.Z.debug({res:e}),e}catch(e){throw P.Z.debug({err:e}),e}finally{yield n.closeTransport()}}))}getTHORChainAddresses(e){return F(this,arguments,(function*(e,t=0,r=5,n){const o=yield c.Z.create();try{const s=new g.ZP(o),a=n||"44'/931'/0'/0/X",l=yield s.getAddressAndPubKey(a.replace("X","0").replaceAll("'","").split("/").map((e=>Number(e))),"tthor"),i=(0,k.Zy)(e.getType(),a,l.bech32Address),c=[];for(let n=t;n<t+r;n++){const t=a.replace("X",n.toString()),r=t.replace("'","").split("/").map((e=>parseInt(e,10))),o=yield s.getAddressAndPubKey(r,"tthor"),l=yield s.getAddressAndPubKey(r,"thor");P.Z.info({testnetRes:o,mainnetRes:l});const d=[o,l].find((e=>"No errors"!==e.errorMessage));if(d)throw`Error [${d.returnCode}] ${d.errorMessage}`;c.push({id:`thor-${t}`,derivation:a,address:l.bech32Address,publicKey:l.compressedPk.toString("base64"),testnetDerivation:a,testnetAddress:o.bech32Address,testnetPublicKey:o.compressedPk.toString("base64"),label:`Account ${n}`,balance:"0",fiatBalance:"0",selected:!1,chainId:e.getId(),walletIndex:n,rootWalletId:i})}return P.Z.debug({results:c}),c}catch(e){throw P.Z.debug({err:e}),e}finally{o.close()}}))}signTHORTransaction(e,t,r){return F(this,null,(function*(){const n=e.replace("X",t.toString()).replace("'","").split("/").map((e=>parseInt(e,10)));P.Z.info({derivPath:e,currentPathArr:n,rawTxHex:r});const o=yield c.Z.create();try{const e=new g.ZP(o),t=yield e.sign(n,r);return P.Z.debug({res:t}),this.getNormalizedSignature(t.signature)}catch(e){throw P.Z.debug({err:e}),e}finally{o.close()}}))}getUTXOAddresses(e,t,r,n){if(e.getType()===E.J.Bitcoin)return this.getBtcAddresses(e.selfCast(),t,r,n);throw(0,T.t)("app:controller_errors.not_supported_chain_type",{chainType:e.getType()})}signUTXOTransaction(e,t,r,n){if(e.getType()===E.J.Bitcoin)return this.signBtcTransaction(e,t,r,n);throw(0,T.t)("app:controller_errors.not_supported_chain_type",{chainType:e.getType()})}getBtcAddresses(e){return F(this,arguments,(function*(e,t=0,r=5,n){var o,a,l,i;const d=n||"84'/0'/0'/0/X",u=yield c.Z.create(),p=null!=(l=null==(a=null==(o=e.getConfig().derivationPath)?void 0:o.find((e=>e.value===d)))?void 0:a.format)?l:"bech32";try{const n=new s.Z({transport:u,currency:null==(i=e.getType())?void 0:i.toLowerCase()}),o=yield n.getWalletPublicKey(d.replace("X","0"),{format:p}),a=(0,k.Zy)(e.getType(),d,o.bitcoinAddress),l=[];for(let o=t;o<t+r;o++){const t=d.replace("X",o.toString()),r=yield n.getWalletPublicKey(t,{format:p});P.Z.info({res:r}),l.push({id:`btc-${t}`,derivation:d,address:r.bitcoinAddress,publicKey:r.publicKey,testnetDerivation:d,testnetPublicKey:r.publicKey,testnetAddress:r.bitcoinAddress,label:`Account ${o}`,balance:"0",fiatBalance:"0",selected:!1,chainId:e.getId(),walletIndex:o,rootWalletId:a})}return P.Z.debug({results:l}),l}catch(e){throw P.Z.debug({err:e}),e}finally{u.close()}}))}signBtcTransaction(e,t,r,n){return F(this,null,(function*(){var o,a,l,i;P.Z.debug({function:"signBtcTransaction",derivPath:t,walletIndex:r,tx:n});const d=yield c.Z.create(),u=new s.Z({transport:d,currency:null==(o=E.J.Bitcoin)?void 0:o.toLowerCase()});try{const o=[],s=n.inputs.map((e=>{const n=t.replace("X",r.toString());o.push(n);const s=y.YW.fromHex(e.txHex);return[u.splitTransaction(e.txHex,s.hasWitnesses()),e.index,null,null]})),c=n.psbt.data.globalMap.unsignedTx.toBuffer().toString("hex"),d=u.splitTransaction(c,!0),p=u.serializeTransactionOutputs(d).toString("hex"),g=null!=(i=null==(l=null==(a=e.getConfig().derivationPath)?void 0:a.find((e=>e.value===t)))?void 0:l.format)?i:"bech32",h={inputs:s,associatedKeysets:o,outputScriptHex:p,additionals:(e=>{switch(e){case"bech32":case"bech32m":return[e];case"p2sh":case"legacy":return[];default:throw(0,T.t)("app:controller_errors.unkwon_derivation_path_format")}})(g),segwit:"legacy"!==g,useTrustedInputForSegwit:!0};P.Z.debug({params:h});return yield u.createPaymentTransaction(h)}catch(e){throw P.Z.debug({err:e}),e}finally{d.close()}}))}getTerraAddresses(e){return F(this,arguments,(function*(e,t=0,r=5,n){let o;try{o=yield c.Z.create();const s=new(p())(o),a=yield s.initialize();try{this.checkLedgerErrors("Terra",a)}catch(e){console.log(e)}const l=n||"44'/330'/0'/0/X",i=yield s.getAddressAndPubKey(l.replace("X","0").replaceAll("'","").split("/").map((e=>Number(e))),"terra"),d=(0,k.Zy)(e.getType(),l,i.bech32_address),u=[];for(let n=t;n<t+r;n++){const t=l.replace("X",n.toString());try{const r=t.replace("'","").split("/").map((e=>parseInt(e,10))),o=yield s.getAddressAndPubKey(r,"terra");this.checkLedgerErrors("Terra",o),u.push({id:`terra-${t}`,derivation:l,address:o.bech32_address,publicKey:Buffer.from(o.compressed_pk).toString("base64"),testnetDerivation:l,testnetAddress:o.bech32_address,testnetPublicKey:Buffer.from(o.compressed_pk).toString("base64"),label:`Account ${n}`,balance:"0",fiatBalance:"0",selected:!1,chainId:e.getId(),walletIndex:n,rootWalletId:d})}catch(e){console.error(`Error: on getting address from path ${t}`,e)}}return P.Z.debug({results:u}),u}catch(e){throw P.Z.debug({err:e}),e}finally{o.close()}}))}signTerraTransaction(e,t,r){return F(this,null,(function*(){const n=e.replace("X",t.toString()).replace("'","").split("/").map((e=>parseInt(e,10)));P.Z.info({derivPath:e,currentPathArr:n,message:r});const o=yield c.Z.create();try{const e=new(p())(o),t=yield e.initialize();this.checkLedgerErrors("Terra",t);const s=yield e.sign(n,r.toString());return this.checkLedgerErrors("Terra",s),Buffer.from((0,x.signatureImport)(Buffer.from(s.signature)))}catch(e){throw P.Z.debug({err:e}),e}finally{o.close()}}))}getNearAddresses(e){return F(this,arguments,(function*(e,t=0,r=5,n){let o;try{o=yield c.Z.create();const s=yield(0,Z.eI)(o),a=n||"44'/397'/0'/0'/X'",l=yield s.getPublicKey(a.replace("X","0")),i=Buffer.from(l).toString("hex"),d=(0,k.Zy)(e.getType(),a,i),u=[];for(let n=t;n<t+r;n++){const t=a.replace("X",n.toString());try{const r=yield s.getPublicKey(t),o=Buffer.from(r).toString("hex"),l=new _.utils.PublicKey({keyType:_.utils.key_pair.KeyType.ED25519,data:r});u.push({id:`near-${t}`,derivation:a,address:o,publicKey:l.toString(),testnetDerivation:a,testnetAddress:o,testnetPublicKey:l.toString(),label:`Account ${n}`,balance:"0",fiatBalance:"0",selected:!1,chainId:e.getId(),walletIndex:n,rootWalletId:d})}catch(e){console.error(`Error: on getting address from path ${t}`,e)}}return P.Z.debug({results:u}),u}catch(e){throw P.Z.debug({err:e}),e}finally{o.close()}}))}signNearTransaction(e,t,r){return F(this,null,(function*(){const n=e.replace("X",t.toString()),o=yield c.Z.create();try{const e=yield(0,Z.eI)(o);return yield e.sign(r,n)}catch(e){throw P.Z.debug({err:e}),e}finally{o.close()}}))}solanaSignTransaction(e,t){return F(this,null,(function*(){const r=yield c.Z.create();try{const n=new i.Z(r);return(yield n.signTransaction(e,t)).signature}catch(e){throw P.Z.debug({err:e}),e}finally{r.close()}}))}getSolanaAddresses(e){return F(this,arguments,(function*(e,t=0,r=5,n){const o=yield c.Z.create();try{const s=new i.Z(o),a=n||"44'/501'/X'/0",l=yield s.getAddress(a.replace("X","0")),c=(0,k.Zy)(e.getType(),a,Buffer.from(l.address).toString("base64")),u=[];for(let n=t;n<t+r;n++){const t=a.replace("X",n.toString()),r=yield s.getAddress(t,!1);P.Z.info({mainnetRes:r});const o=new d.nh(r.address).toString();u.push({id:`solana-${t}`,derivation:a,address:o,publicKey:o,testnetDerivation:a,testnetAddress:o,testnetPublicKey:o,label:`Account ${n}`,balance:"0",fiatBalance:"0",selected:!1,chainId:e.getId(),walletIndex:n,rootWalletId:c})}return P.Z.debug({results:u}),u}catch(e){throw P.Z.debug({err:e}),e}finally{o.close()}}))}getNormalizedSignature(e){if(e.length<64)throw Error((0,T.t)("app:controller_errors.ledger.too_short"));if(48!==e[0])throw Error((0,T.t)("app:controller_errors.ledger.encoding_expected_first_byte"));if(e[1]+2!==e.length)throw Error((0,T.t)("app:controller_errors.ledger.length_does_not_match_tlv"));if(2!==e[2])throw Error((0,T.t)("app:controller_errors.ledger.expected_length_type"));const t=e[3];let r=e.slice(4,t+4);if(33===r.length&&0===r[0])r=r.slice(1,33);else if(33===r.length)throw Error((0,T.t)("app:controller_errors.ledger.r_too_long"));for(;r.length<32;)r.unshift(0);if(2!==e[t+4])throw Error((0,T.t)("app:controller_errors.ledger.expected_length_type"));if(4+t+2+e[t+5]!==e.length)throw Error((0,T.t)("app:controller_errors.ledger.byte_length_not_match_length"));let n=e.slice(t+6,e.length);if(33===n.length&&0===n[0])n=n.slice(1,33);else if(33===n.length)throw Error((0,T.t)("app:controller_errors.ledger.s_too_long"));for(;n.length<32;)n.unshift(0);if(32!==r.length||32!==n.length)throw Error((0,T.t)("app:controller_errors.ledger.must_be_32_bytes_each"));return(0,h.fromByteArray)(Buffer.concat([r,n]))}getCosmosAddresses(){return F(this,arguments,(function*(e=0,t=5,r,n="cosmos",o){const s=yield c.Z.create();try{const l=o||"44'/118'/X'/0/0",i=new a.Z(s),c=yield i.getAddress(l.replace("X","0"),n,!1),d=(0,k.Zy)(r.getType(),l,c.address),u=[];for(let o=e;o<e+t;o++){const e=l.replace("X",o.toString()),t=yield i.getAddress(e,n,!1);P.Z.debug({mainnetRes:t}),u.push({id:`${n}-${e}`,derivation:l,address:t.address,publicKey:t.publicKey,testnetDerivation:l,testnetAddress:t.address,testnetPublicKey:t.publicKey,label:`Account ${o}`,balance:"0",fiatBalance:"0",selected:!1,chainId:r.getId(),walletIndex:o,rootWalletId:d})}return P.Z.debug({results:u}),u}catch(e){throw P.Z.debug({err:e}),e}finally{s.close()}}))}cosmosSignTransaction(e,t,r,s){return F(this,null,(function*(){P.Z.debug({path:r,message:s});const a=yield c.Z.create();P.Z.debug("transport",a);try{const l=new o.IM(a,{testModeAllowed:!0,hdPaths:[(0,n.stringToPath)(`m/${r}`)],prefix:e}),i=yield l.signAmino(t,s),c=i.signature;if(P.Z.debug({res:i}),!c)throw"signCosmos failed: signature is empty";return Buffer.from(c.signature,"base64")}catch(e){throw P.Z.debug({err:e}),e}finally{a.close()}}))}getBinanceAddresses(e,t,r,n){throw"Method not implemented."}signBinanceTransaction(e,t){return F(this,null,(function*(){throw"Method not implemented."}))}checkLedgerErrors(e,t){if(t){if(t.device_locked)throw(0,T.t)("app:controller_errors.ledger.ledger_screen_saver");if(t.error_message.startsWith("TransportRaceCondition"))throw(0,T.t)("app:controller_errors.ledger.please_finish_previous_action");if(t.error_message.startsWith("DisconnectedDeviceDuringOperation"))throw(0,T.t)("app:controller_errors.ledger.open_the_app_in_your_ledger",{app:e});switch(t.error_message){case"U2F: Timeout":throw(0,T.t)("app:controller_errors.ledger.could_not_find_a_connected_ledger");case"App does not seem to be open":throw(0,T.t)("app:controller_errors.ledger.open_the_app_in_your_ledger",{app:e});case"Command not allowed":throw(0,T.t)("app:controller_errors.ledger.transaction_rejected");case"Transaction rejected":throw(0,T.t)("app:controller_errors.ledger.user_rejected_transaction");case"Unknown Status Code: 26628":throw(0,T.t)("app:controller_errors.ledger.ledger_screen_saver");case"Instruction not supported":throw(0,T.t)("app:controller_errors.ledger.please_check_your_ledger_is_latest_version",{app:e});case"No errors":break;default:throw t.error_message}}}hasPermission(){return F(this,null,(function*(){return(yield c.Z.list()).length>0}))}requestPermission(){return F(this,null,(function*(){try{return yield c.Z.request(),!0}catch(e){return!1}}))}}},593159:(e,t,r)=>{r.a(e,(async(e,n)=>{try{r.d(t,{Z:()=>I});var o=r(802305),s=r(831352),a=r(564586),l=r(496519),i=r(458233),c=r(667294),d=r(287536),u=r(230811),p=r(363119),g=r(996974),h=r(972819),y=r(691438),f=r(680528),b=r(739989),m=r(244586),v=r(281672),w=r(144943),_=r(330101),Z=r(616310),x=r(626423),P=r(87029),C=e([h,v]);[h,v]=C.then?(await C)():C;var A=(e,t,r)=>new Promise(((n,o)=>{var s=e=>{try{l(r.next(e))}catch(e){o(e)}},a=e=>{try{l(r.throw(e))}catch(e){o(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,a);l((r=r.apply(e,t)).next())}));const S=(e,t,r)=>A(void 0,null,(function*(){var n;if(r)try{const o=(yield(0,_.Io)(r)).result[0],i=null!=(n=o.ABI)?n:a;return{mainContract:new l.CH(e,i,t),isProxy:(null==o?void 0:o.Proxy)===(0,x.Bw)(s.yp.Ethereum)}}catch(e){b.Z.error(e)}return{mainContract:new l.CH(e,a,t),isProxy:!1}})),T=(e,t)=>{var r,n,o;if(e&&t&&t.length>0){const e=t[t.length-1];if(null==(o=null==(n=null==(r=e.raw)?void 0:r.params)?void 0:n.params)?void 0:o.options){const{symbol:t,decimals:r,address:n,image:o}=e.raw.params.params.options;return{symbol:t,address:n,image:o,decimals:r,chainId:e.chainId}}}},I=e=>{const{t}=(0,u.$G)("app"),r=(0,g.s0)(),n=(0,v.fU)(),s=(0,v.JB)(),{addNotification:a}=(0,h.Z)(),l=(0,p.v9)((e=>e.dappsMessages.messages)),{wallets:_,activeWalletId:x}=(0,p.v9)((e=>({wallets:e.wallets.wallets,activeWalletId:e.wallets.activeWalletId}))),C=_[x],I=(0,c.useMemo)((()=>n.getAllChainControllerIds().filter((e=>n.getChainControllerById(e).support(y.B.CustomToken)&&void 0!==_[x].chainData[e]))),[x,n,_]),{ethereumProvider:E}=(0,p.v9)((e=>({ethereumProvider:e.dappsProviders.settings.ethereumProvider}))),k=(0,c.useRef)(T(e,l));(0,c.useEffect)((()=>{e&&!k.current&&window.close()}),[e]);const[D,O]=(0,c.useState)((()=>k.current?k.current.chainId:e&&E&&E.windowEthereumChain?E.windowEthereumChain:I[0])),j=(0,c.useMemo)((()=>D?n.getChainControllerById(D):null),[n,D]),$=(0,i.I)(D),B=(0,c.useMemo)((()=>Z.Ry({address:Z.Z_().required(t("custom_token.validation.address_required")).test(((e,r)=>A(void 0,null,(function*(){if(!e||!$.current||!j)return!0;if(j.getType()===y.J.Cosmos){return!!(yield j.isToken(e))||r.createError({message:t("validation.not_a_valid_cosmos_address")})}return!!j.validateAddress(e,{inclTokenAddress:!0})||r.createError({message:t("validation.not_a_valid_address")})})))),symbol:Z.Z_().required(t("custom_token.validation.symbol_required")).matches(/^\S*$/,t("custom_token.validation.symbol_whitespace")).min(2,t("custom_token.validation.symbol_required")).max(15,t("custom_token.validation.symbol_required")),decimals:Z.Z_().required(t("custom_token.validation.precision_required")).test({test:e=>{const t=Number(e);return Number.isInteger(t)&&t>=0&&t<=256},message:t("validation.invalid_precision_0_256")})})),[$,t,j]),{register:N,handleSubmit:K,formState:{errors:X},setValue:F,watch:H}=(0,d.cI)({defaultValues:k.current,resolver:(0,o.X)(B),reValidateMode:"onChange"}),M=H("address"),[L,W]=(0,c.useState)(!1);(0,c.useEffect)((()=>{I.includes(D)||O(I[0])}),[D,I,O]);const U=(0,c.useCallback)((e=>A(void 0,null,(function*(){var o,l,i;W(!0);try{const c=C.chainData[D].address,d=yield n.getChainControllerById(D).getTokenBalance(e.address,c),u=Object.values(C.chainData[D].tokens);if(Object.values(u||{}).filter((t=>{var r,n,o,s,a;return(null==(r=t.address)?void 0:r.toUpperCase())===(null==(n=e.address)?void 0:n.toUpperCase())||!(0,w.H)(null==(o=e.symbol)?void 0:o.toUpperCase())&&(null==(s=t.symbol)?void 0:s.toUpperCase())===(null==(a=e.symbol)?void 0:a.toUpperCase())})).length>0)return void a({title:t("alert.general.token.error.add_token.title"),type:"error",message:t("alert.general.token.error.add_token.messages.added")});if((null==(o=null==j?void 0:j.getConfig().tokenSymbol)?void 0:o.toLowerCase())===(null==(l=e.symbol)?void 0:l.toLowerCase()))return void a({title:t("alert.general.token.error.add_token.title"),type:"error",message:t("alert.general.token.error.add_token.messages.chain_symbol")});const p=s.getAssetToken(D,e.symbol,e.address);if(p)s.addTokenToWallet(D,p,x);else{const t=(0,m.Z)();s.addTokenToWallet(D,{contractId:t,address:e.address,balance:d.toString(),id:t,symbol:e.symbol,name:e.symbol,image:(null==(i=k.current)?void 0:i.image)||"",decimals:Number(e.decimals),isCustom:!0},x)}r(f.ft)}catch(e){b.Z.error({err:e}),a({title:t("alert.general.token.error.invalid_token.title"),type:"error",message:t("alert.general.token.error.invalid_token.message")})}W(!1)}))),[C.chainData,x,a,s,n,r,D,j,t]);return(0,c.useEffect)((()=>{A(void 0,null,(function*(){if(!M)return;const e=n.getChainControllerById(D);if(e.getType()===y.J.Evm&&!e.validateAddress(M))return;W(!0);let r="",o="";const l=s.getTokenByAddress(D,M);try{if(l)r=l.symbol,l.decimals&&(o=l.decimals);else if(e.getType()===y.J.Evm){const t=e.getProvider(),s=e.selfCast().getConfig().network.explorer,a=s?`${s}/api?module=contract&action=getsourcecode&address=${M}`:void 0,{mainContract:l,isProxy:i}=yield S(M,t,a);if((0,P.w)(l,i)){const e=yield(0,P.h)(l,n,D,M,t);r=yield e.symbol(),o=yield e.decimals()}else{r=yield l.symbol();try{o=yield l.decimals()}catch(e){o=f.KV.A18.toString()}}}else if(e.getType()===y.J.Terra){const t=yield e.getTokenInfo(M);r=t.symbol,o=t.decimals}}catch(e){b.Z.error("Error ocurred while fetching token data",{error:e}),a({title:t("general.error"),type:"error",message:t("alert.general.token.error.while_fetching_token_data.message")})}F("symbol",r,{shouldValidate:!!r}),F("decimals",o.toString(),{shouldValidate:!!o}),W(!1)}))}),[M,D]),{submitHandler:U,setSelectedChain:O,selectedChain:D,availableChains:I,register:N,handleSubmit:K,errors:X,loading:L}};n()}catch(e){n(e)}}))},87029:(e,t,r)=>{r.d(t,{h:()=>i,w:()=>l});var n=r(831352),o=r(496519),s=r(330101);const a={[n.yp.BinanceSmartChain]:"0xBA5Fe23f8a3a24BEd3236F05F2FcF35fd0BF0B5C",[n.yp.Ethereum]:"NO_DEFAULT_ADDRESS",[n.yp.Polygon]:"NO_DEFAULT_ADDRESS",[n.yp.Avalanche]:"NO_DEFAULT_ADDRESS",[n.yp.Arbitrum]:"0x3f770ac673856f105b586bb393d122721265ad46",[n.yp.Fantom]:"NO_DEFAULT_ADDRESS",[n.yp.Aurora]:"NO_DEFAULT_ADDRESS",[n.yp.CronosEvm]:"NO_DEFAULT_ADDRESS",[n.yp.Optimism]:"NO_DEFAULT_ADDRESS",[n.yp.Klaytn]:"NO_DEFAULT_ADDRESS",[n.yp.CantoEvm]:"NO_DEFAULT_ADDRESS",[n.yp.Gnosis]:"NO_DEFAULT_ADDRESS"},l=(e,t)=>e.hasOwnProperty("implementation")||t,i=(e,t,r,n,l)=>{return i=void 0,c=null,d=function*(){try{const a=yield e.implementation(),i=(yield(0,s.Io)(`${t.getChainControllerById(r).getConfig().network.explorer}/api?module=contract&action=getsourcecode&address=${a}`)).result[0].ABI;return new o.CH(n,i,l)}catch(e){const i=(yield(0,s.Io)(`${t.getChainControllerById(r).getConfig().network.explorer}/api?module=contract&action=getsourcecode&address=${a[r]}`)).result[0].ABI;return new o.CH(n,i,l)}},new Promise(((e,t)=>{var r=e=>{try{o(d.next(e))}catch(e){t(e)}},n=e=>{try{o(d.throw(e))}catch(e){t(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,n);o((d=d.apply(i,c)).next())}));var i,c,d}},75224:(e,t,r)=>{r.d(t,{l:()=>n});const n=300},168129:(e,t,r)=>{r.a(e,(async(e,n)=>{try{r.d(t,{E:()=>l});var o=r(818117),s=r(308787),a=e([s]);s=(a.then?(await a)():a)[0];const l=(0,o.ZP)(s.ConfirmLedger)`
  position: fixed;
  height: 90px;
`;n()}catch(e){n(e)}}))},518949:(e,t,r)=>{r.a(e,(async(e,n)=>{try{r.d(t,{j:()=>d});var o=r(667294),s=r(363119),a=r(834392),l=r(299246),i=r(281672),c=e([i]);i=(c.then?(await c)():c)[0];const d=()=>{const e=(0,s.v9)((e=>e.settings.currency)),[t,r]=(0,o.useState)([]),n=(0,i.UW)(),c=(0,o.useCallback)(((e,r,n)=>{var o,s;if(e===r)return n;const a=null==(o=t.find((t=>t.name===e)))?void 0:o.scale,l=null==(s=t.find((e=>e.name===r)))?void 0:s.scale;return a&&l?n*l/a:0}),[t]),d=(0,o.useCallback)((t=>c("USD",e.name,t)),[e,t,c]),u=(0,o.useCallback)((t=>{const{name:r,symbol:n}=e;if(isNaN(t))return"N/A";const o=(0,l.pF)(t,a.UX,{trimTrailingZero:!0});return isNaN(t)?"N/A":t>0&&t<.001?`< ${n}0.001 ${r}`:`${n}${o} ${r}`}),[e,t]),p=(0,o.useCallback)((t=>{const r=c("USD",e.name,t);return u(r)}),[e,t]),g=(0,o.useCallback)((()=>{return e=void 0,t=null,o=function*(){const e=(yield n.getCachedCurrencies()).fiatCurrencies.map((e=>{var t;return{symbol:e.character||"",name:e.symbol,title:e.name||"",scale:Number(null==(t=e.price)?void 0:t.amount)}}));r(e)},new Promise(((r,n)=>{var s=e=>{try{l(o.next(e))}catch(e){n(e)}},a=e=>{try{l(o.throw(e))}catch(e){n(e)}},l=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,a);l((o=o.apply(e,t)).next())}));var e,t,o}),[]);return(0,o.useEffect)((()=>{g()}),[]),{getConvertedPrice:p,currency:e,allCurrencies:t,convertPrice:c,getFormatedPriceStr:u,getConvertedPriceFromUSD:d}};n()}catch(e){n(e)}}))},458233:(e,t,r)=>{r.d(t,{I:()=>o});var n=r(667294);const o=e=>{const t=(0,n.useRef)(e);return t.current!==e&&(t.current=e),t}}}]);
//# sourceMappingURL=1077.bundle.js.map