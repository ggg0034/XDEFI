!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4f819f0a-120e-4e57-b763-d04ab4911a7f",e._sentryDebugIdIdentifier="sentry-dbid-4f819f0a-120e-4e57-b763-d04ab4911a7f")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"28.2.2"},(self.webpackChunkxdefi_extension=self.webpackChunkxdefi_extension||[]).push([[6025],{236048:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=236048,e.exports=t},569252:(e,t,n)=>{"use strict";n.d(t,{BA:()=>u});var a=n(785893),r=n(667294),s=n(771341),o=n(38187),i=n(876777),l=n(818117);const d=l.ZP.div`
  border-left: 1px solid ${i.wL.darkGrey};
  height: ${({lastElement:e})=>e?"30px":"100%"};
  position: absolute;
  left: -24px;
`,c=l.ZP.div`
  width: 16px;
  height: 16px;
  border-radius: 8px;
  background-color: ${({color:e})=>e||i.wL.charcoal};
`,h=(0,l.ZP)(o.Z).attrs({flexDirection:"row"})`
  position: relative;
  margin-left: 36px;
  height: 100%;
`;var u=(e=>(e.Successful="SUCCESS",e.Pending="PENDING",e.Revert="REVERT",e.Idle="IDLE",e))(u||{});const p=(0,l.ZP)(o.Z).attrs({justifyContent:"center",alignItems:"center"})`
  height: inherit;
`,f=l.ZP.div`
  left: -40px;
  top: 12px;
  width: 32px;
  height: 32px;
  position: absolute;
`,g=(0,l.ZP)(c)`
  width: 24px;
  height: 24px;
  border-radius: 16px;
`,m=l.ZP.div`
  width: 16px;
  height: 16px;
  border-radius: 8px;
  border: 2px solid ${i.wL.white};
  border-bottom-color: transparent;
  animation: ${i.O2} 2000ms linear infinite;
`,y=()=>(0,a.jsx)(g,{children:(0,a.jsx)(p,{children:(0,a.jsx)(s.aM,{color:"red"})})}),v=()=>(0,a.jsx)(g,{children:(0,a.jsx)(p,{children:(0,a.jsx)(m,{})})}),b=()=>(0,a.jsx)(g,{children:(0,a.jsx)(p,{children:(0,a.jsx)(s.Ye,{color:i.wL.lime})})}),w=({state:e,circleColor:t})=>{switch(e){case"IDLE":default:return(0,a.jsx)(c,{color:t});case"REVERT":return(0,a.jsx)(y,{});case"SUCCESS":return(0,a.jsx)(b,{});case"PENDING":return(0,a.jsx)(v,{})}};(0,r.memo)((({info:e,circleColor:t=i.wL.charcoal})=>(0,a.jsx)(o.Z,{flexDirection:"column",maxHeight:"509px",children:e.map((({element:n,state:r},s)=>(0,a.jsxs)(h,{"data-testid":"swapTransactionBlock",children:[(0,a.jsx)(d,{lastElement:e.length-1===s}),(0,a.jsx)(f,{children:(0,a.jsx)(p,{children:(0,a.jsx)(w,{state:r,circleColor:t})})}),n]},`${s}-${r}`)))})))},406253:(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{j4:()=>f});var r=n(785893),s=n(667294),o=n(814401),i=n(561277),l=n(412252),d=n(458038),c=n(230811),h=n(281672),u=n(245936),p=e([h,u]);[h,u]=p.then?(await p)():p;var f=(e=>(e.Approval="APPROVAL",e.Bridge="BRIDGE",e.Ibc="IBC",e.Redeem="REDEEM",e.Swap="SWAP",e))(f||{});const g={APPROVAL:"swaps_route.approval",BRIDGE:"swaps_route.bridge",REDEEM:"swaps_route.redeem",SWAP:"swaps_route.swap",IBC:"swaps_route.bridge"},m=({inputSymbol:e,outputChainId:t,outputSymbol:n,tradeType:a,name:p,time:f,icon:m})=>{const y=(0,s.useMemo)((()=>{const e=Math.floor(Number(f)/60),t=Number(f)%60;return e&&t?`~${e}m ${t}s`:e?`~${e}m`:t?`${t}s`:`~${t}s`}),[f]),{t:v}=(0,c.$G)("app"),b=(0,h.fU)(),w=()=>{switch(a){case"APPROVAL":case"REDEEM":return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.xu,{children:(0,r.jsx)(o.Z,{children:`${v(g[a])} `})}),(0,r.jsx)(u.xu,{children:(0,r.jsx)(i.Z,{dataTestId:"inputTokenCode",children:e})})]});case"SWAP":return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.xu,{children:(0,r.jsx)(o.Z,{children:`${v(g[a])} `})}),(0,r.jsx)(u.xu,{children:(0,r.jsx)(i.Z,{dataTestId:"inputTokenCode",children:e})}),(0,r.jsx)(u.xu,{children:(0,r.jsx)(o.Z,{children:v("swaps_route.for")})}),(0,r.jsx)(u.xu,{children:(0,r.jsx)(i.Z,{dataTestId:"outputTokenCode",children:n})})]});case"BRIDGE":return e===n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.xu,{children:(0,r.jsx)(o.Z,{children:`${v(g[a])} `})}),(0,r.jsx)(u.xu,{children:(0,r.jsx)(i.Z,{dataTestId:"inputTokenCode",children:e})}),(0,r.jsx)(u.xu,{children:(0,r.jsx)(o.Z,{children:v("swaps_route.to")})}),(0,r.jsx)(u.xu,{children:(0,r.jsx)(i.Z,{children:b.getChainControllerById(t).getConfig().longName})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.xu,{children:(0,r.jsx)(o.Z,{children:`${v(g.SWAP)} `})}),(0,r.jsx)(u.xu,{children:(0,r.jsx)(i.Z,{dataTestId:"inputTokenCode",children:e})}),(0,r.jsx)(u.xu,{children:(0,r.jsx)(o.Z,{children:v("swaps_route.to")})}),(0,r.jsx)(u.xu,{children:(0,r.jsx)(i.Z,{children:n})}),(0,r.jsx)(u.xu,{children:(0,r.jsx)(o.Z,{children:v("swaps_route.on")})}),(0,r.jsx)(u.xu,{children:(0,r.jsx)(i.Z,{children:b.getChainControllerById(t).getConfig().longName})})]});case"IBC":return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.xu,{children:(0,r.jsx)(o.Z,{children:"Transfer "})}),(0,r.jsx)(u.xu,{children:(0,r.jsx)(i.Z,{dataTestId:"inputTokenCode",children:e})}),(0,r.jsx)(u.xu,{children:(0,r.jsx)(o.Z,{children:"to"})}),(0,r.jsx)(u.xu,{children:(0,r.jsx)(i.Z,{children:b.getChainControllerById(t).getConfig().longName})})]})}};return(0,r.jsxs)(u.Zb,{children:[(0,r.jsx)(u.h4,{divider:!0,"data-testid":"routeTitle",children:(0,r.jsx)(w,{})}),(0,r.jsxs)(u.Hp,{children:[(0,r.jsxs)(u.b$,{children:[(0,r.jsx)(l.Z,{children:v("swaps_route.protocol")}),(0,r.jsxs)(u.B4,{"data-testid":"routeProtocol",children:[(0,r.jsx)(u.LC,{src:m}),(0,r.jsx)(d.Z,{children:p})]})]}),(0,r.jsxs)(u.qp,{children:[(0,r.jsx)(l.Z,{children:v("swaps_route.time")}),(0,r.jsx)(u.B4,{"data-testid":"routeTime",children:(0,r.jsx)(d.Z,{children:"APPROVAL"===a?"~30sec":y})})]})]})]})};(0,s.memo)(m);a()}catch(e){a(e)}}))},866565:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var a=n(519416),r=n(739989),s=n(496486),o=Object.defineProperty,i=(e,t,n)=>(((e,t,n)=>{t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),l=(e,t,n)=>new Promise(((a,r)=>{var s=e=>{try{i(n.next(e))}catch(e){r(e)}},o=e=>{try{i(n.throw(e))}catch(e){r(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,o);i((n=n.apply(e,t)).next())}));class d{constructor(e){i(this,"POPUP_HEIGHT",628),i(this,"POPUP_WIDTH",400),i(this,"popupId"),i(this,"isDebug",!1),i(this,"htmlPage",""),i(this,"showPopup",(0,s.debounce)((e=>l(this,null,(function*(){const t=yield this.getPopup();if(t&&t.id)r.Z.info("/// showPopup: Popup found ",t),yield a.browser.windows.update(t.id,{focused:!0}),r.Z.info("/// showPopup: Popup focused ",t.id);else{r.Z.info("/// showPopup: Popup not found, opening a new one ");const t=yield a.browser.windows.getLastFocused(),{posX:n,posY:s}=this.getPosPopup(t);"mac"===(yield a.browser.runtime.getPlatformInfo()).os?this.POPUP_WIDTH=400:this.POPUP_WIDTH=413;const o=yield a.browser.windows.create({url:this.htmlPage+(e||""),type:"popup",width:this.POPUP_WIDTH,height:this.POPUP_HEIGHT,left:n,top:s});this.popupId=o.id}}))),500)),this.htmlPage=e}getPosPopup(e){if(e&&e.left&&e.width&&e.top)return{posX:e.left+100,posY:e.top+100};{const{screenX:e,screenY:t}=window;return{posX:e+100,posY:t+100}}}getPopup(){return l(this,null,(function*(){r.Z.info("/// getPopup: popupId ",this.popupId);const e=yield a.browser.windows.getAll();if(e)return r.Z.info("/// getPopup: windows ",e),e.find((e=>e&&"popup"===e.type&&e.id===this.popupId))}))}}},820813:(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{Z:()=>ee});var r=n(264487),s=n(701120),o=n(620531),i=n(691438),l=n(829419),d=n(136438),c=n(847001),h=n(831352),u=n(626423),p=n(46461),f=n(496486),g=n(363119),m=n(596111),y=n(25022),v=n(739989),b=n(640610),w=n(446010),I=n(42763),C=n(316683),A=n(330101),k=n(605930),T=n(834392),B=n(299246),S=n(476154),D=n(459457),x=n(882591),P=n(33802),E=n(729357),F=n(247210),_=n(989508),O=n(209030),Z=n(630292),j=n(99127),N=e([o,l,I,Z]);[o,l,I,Z]=N.then?(await N)():N;var U,R=Object.defineProperty,K=Object.defineProperties,M=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,J=(e,t,n)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,X=(e,t)=>{for(var n in t||(t={}))W.call(t,n)&&J(e,n,t[n]);if($)for(var n of $(t))L.call(t,n)&&J(e,n,t[n]);return e},q=(e,t)=>K(e,M(t)),H=(e,t,n)=>(J(e,"symbol"!=typeof t?t+"":t,n),n),z=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},V=(e,t,n)=>(z(e,t,"read from private field"),n?n.call(e):t.get(e)),G=(e,t,n)=>new Promise(((a,r)=>{var s=e=>{try{i(n.next(e))}catch(e){r(e)}},o=e=>{try{i(n.throw(e))}catch(e){r(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,o);i((n=n.apply(e,t)).next())}));const Y={TOKEN:"AssetTokenType",LP_TOKEN:"AssetTokenType",CRYPTOCURRENCY:"AssetCryptoCurrencyType"};class Q{constructor(e){var t,n,a,s;((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,U,void 0),H(this,"topTokens"),H(this,"nativeTokens",[]),H(this,"priceSubscription"),H(this,"ownedTokens",[]),H(this,"lastUpdatedFetchedOwnedTokensTime",new Date),H(this,"lastUpdatedWalletId",""),H(this,"iBCPaths"),H(this,"analytics"),H(this,"updatePrices",(()=>{const e=this.getAllTokenIds().filter((e=>!e.includes("==")));(0,P.v)(e).then((e=>{e.data.assets.allAssets.page.edges.forEach((e=>{var t,n;(null==(n=null==(t=e.node)?void 0:t.price)?void 0:n.amount)&&D.Lp.cache.modify({id:`${Y[e.node.type]}:${e.node.id}`,fields:{price:t=>q(X({},t),{amount:e.node.price.amount})}})}))})).catch((e=>{v.Z.info("ERROR in prices",e),(0,r.Tb)(e)}))})),H(this,"mapLPAssets",((e,t)=>{const n=Object.keys(e),a={};return n.forEach((n=>{const r=e[n],s=t.find((e=>e.address===r.address));if(r&&s){const e=(0,j.uz)(n||r.id||r.address,(0,j.qM)(null==s?void 0:s.network));a[e]=s}})),a})),H(this,"updateNativeTokens",(e=>{try{const t=e.cryptoCurrencies;t.length&&(this.nativeTokens=(0,f.unionBy)([],t,this.nativeTokens,"id"))}catch(t){v.Z.warn(`Failed to load assets from db: ${t}, `,{data:e}),r.Tb(t)}})),H(this,"updateTopTokens",(e=>G(this,null,(function*(){const t=e.tokens;try{yield l.Z.formatTopAssets(this.topTokens,t),yield this.upgradeTokens()}catch(e){v.Z.error(`Failed to load assets from db: ${e}`),r.Tb(e)}})))),H(this,"getTopTokensByChain",(e=>{var t;const n=V(this,U).chains.getChainControllerById(e);switch(n.getType()){case i.J.Evm:switch(n.getConfig("network.chainId")){case(0,u.Bw)(h.yp.Ethereum):return this.topTokens.topErc20;case(0,u.Bw)(h.yp.BinanceSmartChain):return this.topTokens.topBep20;case(0,u.Bw)(h.yp.Polygon):return this.topTokens.topPolygon;case(0,u.Bw)(h.yp.Fantom):return this.topTokens.topFantom;case(0,u.Bw)(h.yp.Arbitrum):return this.topTokens.topArbitrum;case(0,u.Bw)(h.yp.Aurora):return this.topTokens.topAurora;case(0,u.Bw)(h.yp.Avalanche):return this.topTokens.topAvalanche;case(0,u.Bw)(h.yp.Gnosis):return this.topTokens.gnosis;case(0,u.Bw)(h.yp.Optimism):return this.topTokens.optimism;case(0,u.Bw)(h.yp.Klaytn):return this.topTokens.klaytn;case(0,u.Bw)(h.yp.CronosEvm):return this.topTokens.cronosEVM;case(0,u.Bw)(h.yp.CantoEvm):return this.topTokens.cantoEVM;default:return[]}case i.J.Binance:return this.topTokens.topBnb;case i.J.Terra:return this.topTokens.topTerra;case i.J.Solana:return this.topTokens.topSolana;case i.J.Thorchain:return this.topTokens.topThorSynths;case i.J.Near:return this.topTokens.topNear;case i.J.Cosmos:{const e=u.hv[n.getConfig("network.chainId")];return null!=(t=this.topTokens[e])?t:[]}default:{const e=u.hv[n.getConfig("network.chainId")];return Array.isArray(this.topTokens[String(e)])?this.topTokens[String(e)]:[]}}})),H(this,"findTopAsset",(e=>{var t;if(e)for(const n of Object.values(this.topTokens))for(const a of n)if((null==(t=a.address)?void 0:t.toLowerCase())===(null==e?void 0:e.toLowerCase()))return a})),H(this,"getTokenById",((e,t)=>this.getTopTokensByChain(e).find((e=>e.id===t)))),H(this,"getTokenByAddress",((e,t)=>this.getTopTokensByChain(e).find((e=>e.address===t)))),H(this,"addTokenToWallet",((e,t,n)=>{var a,r,s,o,i,l;const d=I.Z.getState().wallets.activeWalletId,c=(0,f.cloneDeep)(I.Z.getState().wallets.wallets),h=c[n],u=X({},t);if((null==(a=this.findNativeToken(e))?void 0:a.id)===u.id){if(h.chainData[e].nativeTokenVisible)return!1;h.chainData[e].nativeTokenVisible=!0}else{const t=Object.values((null==(s=null==(r=null==h?void 0:h.chainData)?void 0:r[e])?void 0:s.tokens)||{}).find((e=>e.contractId===u.contractId)),n=Object.values((null==(l=null==(i=null==(o=c[d])?void 0:o.chainData)?void 0:i[e])?void 0:l.tokens)||{}).find((e=>e.address===u.address));if(t||n)return!1;h.chainData[e].tokens=q(X({},h.chainData[e].tokens),{[u.contractId]:q(X({},u),{isPinned:!1})}),h.chainData[e].tokens=q(X({},h.chainData[e].tokens),{[u.contractId]:q(X({},u),{isPinned:!1})})}return this.analytics.track(y.uT.AddTokenToWallet,{tokens:[{chain:e,symbol:u.symbol,address:u.address||"",isCustom:!!u.isCustom}]}),I.Z.dispatch((0,C.K8)({wallet:h})),V(this,U).chains.updateBalancesForWallet(n),this.subscribePriceUpdates(),!0})),H(this,"addTokensToWallet",((e,t)=>{try{const n=(0,f.groupBy)(e,(e=>e.chainId)),{lpTokensByWallet:a}=I.Z.getState().wallets,r=(0,f.cloneDeep)(I.Z.getState().wallets.wallets)[t];(0,g.dC)((()=>{(0,f.forEach)(n,((e,n)=>{let s={};V(this,U).chains.getChainControllerById(n).getType()===i.J.Binance?e.forEach((e=>{if(e.isNativeAsset)return void(r.chainData[n].nativeTokenVisible=e.isNativeAsset);const o=(0,j.uz)(e.token.id,n),i=a[t]?a[t][o]:void 0;s=q(X({},s),{[e.token.contractId]:{id:e.token.id,contractId:e.token.contractId,free:"0",frozen:"0",isRemoved:!1,locked:"0",symbol:e.token.symbol,image:e.token.image,address:e.token.address,decimals:e.token.decimals,lpTokenInfo:i?(0,j.FL)(i):void 0}})})):s=(0,f.reduce)(e,((e,s)=>{if(s.isNativeAsset)return r.chainData[n].nativeTokenVisible=s.isNativeAsset,e;const o=(0,j.uz)(s.token.id,n),i=a[t]?a[t][o]:void 0;return e[s.token.contractId||o]=q(X({},s.token),{lpTokenInfo:i?(0,j.FL)(i):void 0}),e}),{}),r.chainData[n].tokens=X(X({},r.chainData[n].tokens),s)})),this.analytics.track(y.uT.AddTokenToWallet,{tokens:e.map((e=>({chain:e.chainId,symbol:e.token.symbol,address:e.token.address||"",isCustom:!!e.token.isCustom})))})})),I.Z.dispatch((0,C.K8)({wallet:r})),this.subscribePriceUpdates(),setTimeout((()=>V(this,U).chains.updateBalancesForWallet(t)),0)}catch(e){throw v.Z.error("Error - addTokensToWallet",e),r.Tb(e),(0,p.t)("app:controller_errors.error_addoing_new_token")}})),H(this,"removeTokenFromWallet",((e,t,n,a,r)=>{I.Z.dispatch((0,C.gy)({chainId:e,contractId:t,walletId:a,isNativeAsset:r})),I.Z.dispatch((0,b.mJ)({chainId:e,address:n,walletId:a})),this.subscribePriceUpdates()})),H(this,"togglePinnedToken",((e,t,n,a,r)=>{I.Z.dispatch((0,C.bJ)({chainId:e,symbol:t,walletId:n,isNativeAsset:a,isPinned:r}))})),H(this,"getAllAssets",((e=I.Z.getState().wallets.activeWalletId)=>{var t;const{wallets:n}=I.Z.getState().wallets,a=(null==(t=n[e])?void 0:t.chainData)||{};return V(this,U).chains.getAllChainControllers().reduce(((e,t)=>{const n=a[t.getId()];if(!n)return e;if(n.nativeTokenVisible){const a=this.findNativeToken(t.getId()),r=t.getConfig().tokenSymbol,s=a?a.id:r;e.push({token:{id:s,contractId:s,symbol:r,image:(null==a?void 0:a.icon)?a.icon:t.getConfig().image,isPinned:!1,name:t.getConfig().longName},chainId:t.getId(),isNativeAsset:!0,isNativeTokenPinned:n.isNativeTokenPinned})}let r=Object.values(n.tokens||{});return t.getType()===i.J.Binance&&(r=(0,f.filter)(r,(e=>!e.isRemoved))),e=e.concat((0,f.map)(r,(e=>({token:e,chainId:t.getId(),isNativeAsset:!1,isNativeTokenPinned:!1}))))}),[])})),H(this,"getNativeToken",((e,t)=>{const n=V(this,U).chains.getChainControllerById(e);return{token:{id:t.id,symbol:n.getConfig().tokenSymbol,decimals:n.getConfig().decimals,name:n.getConfig().longName,contractId:t.id},chainId:e,isNativeAsset:!0}})),H(this,"getAllTopAssets",(()=>{const e=V(this,U).chains.getAllChainControllers();let t=[],n=[];const{wallets:a,activeWalletId:r}=I.Z.getState().wallets,s=Object.keys(a[r].chainData);return e.forEach((e=>{if(!s.includes(e.getId()))return;const a=this.findNativeToken(e.getId());a&&n.push(this.getNativeToken(e.getId(),a));const r=this.getTopTokensByChain(e.getId());(null==r?void 0:r.length)>0&&(t=t.concat(l.Z.formatTokenToSearchToken(r,e)))})),n=n.concat(t),n})),H(this,"getIcon",((e,t,n)=>{var a;if(t.image)return Array.isArray(t.image)?t.image[0]:t.image;const r=V(this,U).chains.getChainControllerById(e);if(n){const e=this.nativeTokens.find((e=>e.id===t.id));return"string"==typeof(null==e?void 0:e.icon)?null==e?void 0:e.icon:(null==(a=null==e?void 0:e.icon)?void 0:a.data)||r.getConfig().fallbackImage}return r.getConfig().fallbackImage})),H(this,"getTokenBalanceMulti",(e=>G(this,null,(function*(){var t;const{wallets:n,activeWalletId:a}=I.Z.getState().wallets,s=null==(t=n[a])?void 0:t.chainData,o=(0,f.groupBy)(e,(e=>e.chainId));try{return(yield Promise.allSettled((0,f.map)(o,((t,n)=>G(this,null,(function*(){const a=n,r=V(this,U).chains.getChainControllerById(a),o=s[a].address;if(r.getType()===i.J.Evm)return r.selfCast().getTokenBalanceMulti(o,t.map((e=>{var t;return(null==(t=e.token)?void 0:t.address)||""}))).then((e=>e.map((e=>{var n,r;return{chainId:a,id:null!=(r=null==(n=t.find((t=>t.token.address===e.address)))?void 0:n.token.id)?r:e.address,balance:e.balance}}))));if(r.getType()===i.J.Thorchain){const t=yield r.selfCast().getBalance(o);return e.reduce(((e,n)=>{if(n.isNativeAsset)return e;const r=t.find((e=>(0,k.lA)(e.asset,n.token.asset)));return r&&e.push({chainId:a,balance:r.amount.amount().toString(),id:n.token.id,contractId:n.token.contractId}),e}),[])}if(r.getType()===i.J.Cosmos){const t=yield r.selfCast().getBalances();return e.reduce(((e,n)=>{const r=Object.entries(t).find((e=>n.token.address===e[0]));return r&&e.push({chainId:a,balance:r[1],id:n.token.id,contractId:n.token.contractId}),e}),[])}return r.getType()===i.J.Near?(0,E.l)("near",o).then((({data:t})=>t.near.balances.map((t=>{var n;return{chainId:a,id:null==(n=e.find((e=>e.token.address===t.asset.contract)))?void 0:n.token.id,balance:t.amount.value}})))):r.getType()===i.J.Binance?this.fetchBinanceOwnedTokens().then((t=>e.reduce(((e,n)=>{const r=t.find((e=>n.token.id===e.id));return r&&e.push({chainId:a,balance:`${(0,B.pF)((null==r?void 0:r.free)||"0",T.DF,{trimTrailingZero:!0})}`,id:n.token.id,contractId:n.token.contractId}),e}),[]))):[]})))))).reduce(((e,t)=>("fulfilled"===t.status&&(e=e.concat(t.value)),e)),[])}catch(e){return v.Z.info("getTokenBalanceMulti error",e),r.Tb(e),[]}})))),H(this,"fetchAllOwnedTokens",(()=>G(this,null,(function*(){var e;const t=new Date;if(this.ownedTokens.length>0&&this.lastUpdatedFetchedOwnedTokensTime&&t.getTime()-this.lastUpdatedFetchedOwnedTokensTime.getTime()<6e4&&this.lastUpdatedWalletId===I.Z.getState().wallets.activeWalletId)return this.ownedTokens;const{wallets:n,activeWalletId:a}=I.Z.getState().wallets,r=null==(e=n[a])?void 0:e.chainData;this.lastUpdatedWalletId=a;try{const e=[],t=[];V(this,U).chains.getChainControllerByFeature(i.B.NativeSupport).forEach((n=>{var s,o;const l=null==(s=r[n.getId()])?void 0:s.address,d=(a,r=5e3)=>{e.push((0,A.nK)(a,r).catch((e=>(v.Z.error(`Error: Fetching owned Tokens failed on ${n.getId()} `,e),t))))},c=this.findNativeToken(n.getId());if(c&&e.push(n.getChainBalanceStateUpdate(a).then((e=>Number(e.chainBalance)>0?[q(X({},this.getNativeToken(n.getId(),c)),{balance:e.chainBalance})]:t))),!l)return void Promise.resolve(t);const p=u.hv[n.getConfig().network.chainId];switch(p){case h.yp.Ethereum:case h.yp.Polygon:case h.yp.BinanceSmartChain:case h.yp.Fantom:case h.yp.Avalanche:case h.yp.Arbitrum:case h.yp.Aurora:case h.yp.Terra:case h.yp.SeiTestnet:case h.yp.CantoEvm:case h.yp.CronosEvm:d(this.getOwnedAssets({chainId:p,address:l,id:n.getId()}));break;case h.yp.Gnosis:case h.yp.Optimism:d(this.getTokenListByAddress({address:l,chainId:p,chain:n}),1e4);break;case h.yp.Klaytn:d(this.getTokenListByAddress({address:l,chainId:p,chain:n,customQuery:`/accounts/${l}/ftBalances?page=1`}),1e4);break;case h.yp.Near:d((0,E.l)("near",l).then((({data:e})=>e.near.balances.map((e=>({chainId:n.getId(),token:{id:e.asset.id,image:e.asset.image,symbol:e.asset.symbol,name:e.asset.name,address:e.asset.contract,decimals:e.amount.scalingFactor},balance:e.amount.value,isNativeAsset:n.getConfig().tokenSymbol===e.asset.symbol}))).filter((e=>!e.isNativeAsset)))));break;case h.yp.Binance:d(this.fetchBinanceOwnedTokens().then((e=>e.reduce(((e,t)=>(n.getConfig().tokenSymbol!==t.symbol&&e.push({chainId:n.getId(),token:t,isNativeAsset:!1,balance:t.free}),e)),[]))));break;case h.yp.Solana:d(n.selfCast().getOwnedSplTokens(l).then((e=>e.reduce(((e,t)=>{const n=this.topTokens.topSolana.find((e=>e.address===t.token.address));return n?[...e,q(X({},t),{token:n})]:e}),[]))));break;case h.yp.Thorchain:d(this.fetchOwnedSynthTokens(l).then((e=>e.map((e=>({chainId:n.getId(),token:e,isNativeAsset:!1,balance:e.balance}))))));break;default:if(n.getType()===i.J.Cosmos){const s=null==(o=r[n.getId()])?void 0:o.address,i=this.getTopTokensByChain(n.getId());s&&i.length||e.push(Promise.resolve(t)),d(n.selfCast().getBalances(a).then((e=>{const t=Object.entries(e),a=[];return t.forEach((e=>{const t=i.find((t=>t.address===e[0]));if(t){const r={token:q(X({},t),{image:t.image,symbol:t.symbol,id:t.id,address:t.address,decimals:t.decimals}),chainId:n.getId(),isNativeAsset:!1,balance:e[1]};a.push(r)}})),a})))}}}));const n=(yield Promise.allSettled(e)).filter((e=>"fulfilled"===e.status));return this.ownedTokens=n.map((e=>e.value)).flat(1),this.lastUpdatedFetchedOwnedTokensTime=new Date,this.ownedTokens}catch(e){return v.Z.error(`!!! fetch owned erc20 tokens error: ${e}`),[]}})))),H(this,"updateNFTItemPinStatus",((e,t,n,a)=>{I.Z.dispatch((0,C.F2)({chainId:e,itemId:n,walletId:t,pinned:a}))})),H(this,"updateActiveAssetChain",(e=>{I.Z.dispatch((0,w.$F)({activeChain:e}))})),H(this,"updateActiveNFTChain",(e=>{I.Z.dispatch((0,w.Vq)({activeChain:e}))})),H(this,"updateActiveAssetChains",(e=>{I.Z.dispatch((0,w.Sm)({activeChains:e}))})),H(this,"updateActiveNFTChains",(e=>{I.Z.dispatch((0,w.mf)({activeChains:e}))})),H(this,"getAssetToken",((e,t,n)=>{var a,r;const s=V(this,U).chains.getChainControllerById(e),o=e=>{var a,r;return n?(null==n?void 0:n.toLowerCase())===(null==(a=e.address)?void 0:a.toLowerCase()):(null==(r=e.symbol)?void 0:r.toLowerCase())===(null==t?void 0:t.toLowerCase())};let i;if((null==t?void 0:t.toLowerCase())!==(null==(a=s.getConfig().tokenSymbol)?void 0:a.toLowerCase())||e===h.yp.Thorchain&&(null==t?void 0:t.toLowerCase())!==(null==(r=s.getConfig().tokenSymbol)?void 0:r.toLowerCase()))i=this.getTopTokensByChain(e).find(o);else{const t=this.findNativeToken(e);if(t)return q(X({},t),{contractId:t.id})}return i})),H(this,"getAssetTokenId",((e,t,n)=>{const a=this.getAssetToken(e,t,n);return null==a?void 0:a.id})),H(this,"mapFromGrpcResults",((e,t)=>{const n=V(this,U).chains.getChainControllerById(e);return(0,f.reduce)(t,((e,t)=>{if(n.getType()===i.J.Evm){const a=this.getAssetToken(n.getId(),t.symbol,t.address);a?e[a.id]=a:e[t.id]=q(X({},t),{contractId:t.id})}else e[t.id]=q(X({},t),{contractId:t.id});return e}),{})})),H(this,"getAssetFromCache",(e=>(0,d.N)(e))),H(this,"getUpdateTokenId",((e,t)=>{const n=t.address;return this.getAssetToken(e,t.symbol,n)})),H(this,"_upgradeTokens",(()=>{const{wallets:e}=I.Z.getState().wallets,t=(0,f.cloneDeep)(e);try{Object.keys(e).forEach((n=>{(0,f.forEach)(e[n].chainData,((e,a)=>{const r=Object.values(e.tokens),s=(0,f.cloneDeep)(e.tokens);if(r.length>0){r.map((e=>this.getUpdateTokenId(a,e)||e)).map((({contractId:e,id:t,address:n})=>({key:e||t,id:t,address:n}))).forEach((({key:e,id:t,address:n})=>{s[e]?s[e].id=t:Object.keys(s).forEach((a=>{s[a].address===n&&(s[e]=q(X({},s[a]),{id:t}),delete s[a])}))})),t[n].chainData[a].tokens=s}}))}))}catch(e){v.Z.error({method:"upgradeTokenIds",error:e})}finally{I.Z.dispatch((0,C.QB)({wallets:t}))}})),H(this,"upgradeLPTokenIds",(()=>G(this,null,(function*(){var e;const t=yield(0,O.X5)(),n=I.Z.getState().wallets,a=null!=(e=null==n?void 0:n.lpTokensByWallet)?e:{};(0,g.dC)((()=>{(0,f.forEach)(t,((e,t)=>{let n={};(0,f.forEach)(e,((e,t)=>{if(e.tokens.length>0){const a=e.tokens.map(j.D8);if(a.length>0){const r=this.mapFromGrpcResults(t,a),s=this.mapLPAssets(r,e.tokens);n=X(X({},n),s)}}})),a[t]=n}))})),I.Z.dispatch((0,C.UY)({lpTokensByWallet:a}))})))),H(this,"upgradePrevAddedAssetsToLp",(()=>G(this,null,(function*(){const{wallets:e,lpTokensByWallet:t}=I.Z.getState().wallets,n=(0,f.cloneDeep)(e);(0,f.forEach)(e,((e,a)=>{(0,f.forEach)(e.chainData,((e,r)=>{const s=e.tokens;Object.keys(s).length>0&&(Object.keys(s).forEach((e=>{const n=(0,j.uz)(s[e].id,r),o=t&&t[a]?t[a][n]:void 0;o&&(s[e].lpTokenInfo=(0,j.FL)(o))})),n[a].chainData[r].tokens=s)}))})),I.Z.dispatch((0,C.QB)({wallets:n}))})))),H(this,"upgradeTokens",(()=>G(this,null,(function*(){const e=I.Z.getState().wallets.wallets;(0,f.isEmpty)(e)||(yield this._upgradeTokens())})))),H(this,"upgradeLpIfPossible",(()=>{const{wallets:e}=I.Z.getState().wallets;(0,f.isEmpty)(e)||(this.upgradeLPTokenIds(),this.upgradePrevAddedAssetsToLp())})),H(this,"addTokenToAllWallets",(()=>{const{wallets:e}=I.Z.getState().wallets,{chains:t}=I.Z.getState().chains,n=(0,f.cloneDeep)(e);Object.keys(e).forEach((a=>{const r=e[a];Object.keys(r.chainData).forEach((e=>{var s,o;if(null==(s=r.chainData)?void 0:s[e]){const s=t.find((t=>t.id===e)),i=null!=(o=null==s?void 0:s.defaultTokens)?o:[];i&&i.forEach((t=>{const s=this.getAssetToken(e,t.symbol,t.address);if(s){Object.values(r.chainData[e].tokens).find((e=>e.address===s.address))||(n[a].chainData[e].tokens=q(X({},n[a].chainData[e].tokens),{[s.contractId]:q(X({},s),{isPinned:!1})}))}}))}}))})),I.Z.dispatch((0,C.QB)({wallets:n}))})),H(this,"getAllTokenIds",(()=>{const{wallets:e,activeWalletId:t}=I.Z.getState().wallets;if(0===Object.values(e).length)return[];const n=[],a=e[t];return(0,f.forEach)(a.chainData,(e=>{const t=V(this,U).chains.getChainControllerById(e.chainId);if(!t)return;const a=this.getAssetTokenId(e.chainId,t.getConfig().tokenSymbol);a&&n.push(a);const r=Object.values(e.tokens).filter(Boolean);n.push(...r.reduce(((e,t)=>(t.id&&t.id!==t.address&&e.push(t.id),e)),[]))})),(0,f.uniq)(n)})),H(this,"getNFTIcons",((e,t)=>{var n;const a=V(this,U).chains.getChainControllerById(e);if((null==a?void 0:a.getConfig().tokenSymbol)===t.contractTickerSymbol)return[a.getConfig().image];const{image:r,image_256:s,animationUrl:o}=null!=(n=t.nftData.externalData)?n:{},i=[];return r&&"gif"!==(0,u.pr)(r)&&s&&i.push(s),r&&i.push(r),o&&i.push(o),i})),a=e,z(t=this,n=U,"write to private field"),s?s.call(t,a):n.set(t,a),this.analytics=new o.Z,this.topTokens=(0,f.cloneDeep)(l.N),this.iBCPaths={}}subscribePriceUpdates(){const e=this.getAllTokenIds().filter((e=>!e.includes("==")));if(this.priceSubscription&&!this.priceSubscription.closed&&this.priceSubscription.unsubscribe(),0===e.length)return;try{this.updatePrices()}catch(e){(0,r.Tb)(e,{tags:{component:"AssetsController",method:"subscribePriceUpdates::updatePrices"}})}const t=D.Lp.subscribe({query:_.q,variables:{ids:e}});this.priceSubscription=t.subscribe((({data:e,errors:t})=>{if(t||!(null==e?void 0:e.price.id)||!(null==e?void 0:e.price.price.amount))return;const n=(0,d.N)(e.price.id);n&&D.Lp.cache.modify({id:`${n.__typename}:${n.id}`,fields:{price:t=>X(X({},t),e.price.price)}})}))}updateCache(e){for(const t of d.F)e[t.field].forEach((e=>{var n;(null==(n=e.price)?void 0:n.amount)&&D.Lp.writeFragment({id:`${t.prefix}:${e.id}`,fragment:t.fragment,fragmentName:t.name,data:e})}))}update(e){return G(this,null,(function*(){this.updateNativeTokens(e),yield this.updateTopTokens(e),this.updateCache(e),0===Object.keys(this.iBCPaths).length&&(this.iBCPaths=s.d),this.subscribePriceUpdates()}))}fetchOwnedBep20Tokens(e){return G(this,null,(function*(){try{const t=V(this,U).chains.getChainControllerById(Z.m1.BinanceSmartChain),n=yield t.getInteractedErc20(e),a=[];return this.topTokens.topBep20.length>0&&(v.Z.debug({topBep20Tokens:this.topTokens.topBep20}),n.forEach(((e,t)=>{const r=this.topTokens.topBep20.find((t=>t.address===e.address));r?a.push(r):a.push(q(X({},n[t]),{contractId:crypto.randomUUID()}))}))),v.Z.debug({tokenList:n}),a}catch(e){return v.Z.error({e}),(0,r.Tb)(e),[]}}))}fetchBinanceOwnedTokens(){return G(this,null,(function*(){var e;const{wallets:t,activeWalletId:n}=I.Z.getState().wallets,a=V(this,U).chains.getChainControllersByType(i.J.Binance)[0],s=null==(e=t[n])?void 0:e.chainData[a.getId()],{address:o}=s;try{const e=(0,m.V)(),t=(yield e.getBalance(o)).map((e=>{const t=this.getAssetToken(a.getId(),a.getConfig().tokenSymbol==e.symbol?e.symbol:"",e.symbol);if(t){if(a.getConfig().tokenSymbol===e.symbol){const n=t.id;return q(X({},e),{contractId:n,id:n})}return q(X({},t),{free:e.free})}return q(X({},e),{id:e.symbol,address:e.symbol,contractId:e.symbol})}));return v.Z.debug(t),t}catch(e){v.Z.error(e),(0,r.Tb)(e)}return[]}))}fetchOwnedSynthTokens(e){return G(this,null,(function*(){try{const t=yield V(this,U).chains.getChainControllersByType(i.J.Thorchain)[0].getBalance(e),n=[];return t.forEach((e=>{let t=this.topTokens.topThorSynths.find((t=>(0,k.lA)(t.asset,e.asset)));t||(t=this.topTokens.topThorSynths.find((t=>t.asset.symbol===e.asset.symbol&&e.asset.symbol===e.asset.ticker&&t.asset.ticker===e.asset.ticker))),t&&n.push(q(X({},t),{balance:e.amount.amount().toString()}))})),n}catch(e){return v.Z.error(e),r.Tb(e),[]}}))}findNativeToken(e){var t,n,a,r;const s=V(this,U).chains.getChainControllerById(e);if(!s)return;if(s.getType()===i.J.Bitcoin)return this.nativeTokens.find((e=>{var t,n;return(null==(t=e.symbol)?void 0:t.toLowerCase())===(null==(n=s.getConfig().tokenSymbol)?void 0:n.toLowerCase())}));const o=[null==(t=s.getConfig().shortName)?void 0:t.toLowerCase(),null==(n=s.getConfig().longName)?void 0:n.toLowerCase(),null==(a=s.getConfig().longName.replaceAll(" ",""))?void 0:a.toLowerCase(),null==(r=h.GK[u.hv[s.getConfig().network.chainId]])?void 0:r.toLowerCase()];return this.nativeTokens.find((e=>{var t,n,a;return-1!==o.indexOf(null==(t=e.chain)?void 0:t.toLowerCase())&&(null==(n=e.symbol)?void 0:n.toLowerCase())===(null==(a=s.getConfig().tokenSymbol)?void 0:a.toLowerCase())}))}getApi(e){switch(e){case h.yp.CantoEvm:return`${c.Z.get("CANTO_EXPLORER_MAINNET")}/api`;case h.yp.Gnosis:return`${c.Z.get("GNOSIS_EXPLORER_MAINNET")}/api`;case h.yp.Optimism:return`${c.Z.get("OPTIMISM_EXPLORER_MAINNET")}/api`;case h.yp.Klaytn:return`${c.Z.get("KLAYTN_EXPLORER_MAINNET")}`;case h.yp.CronosEvm:return`${c.Z.get("CRONOSEVM_EXPLORER_PROXY")}/api`;default:return}}getOwnedAssets(e){return G(this,arguments,(function*({chainId:e,address:t,id:n}){const a=[];try{const{data:r}=yield(0,F.$)({chainId:e,address:t}),s=V(this,U).assets.getTopTokensByChain(n);e in x.u&&r[x.u[e]].balances.forEach((e=>{const t=e.asset.contract;if(t){const r=s.find((e=>e.address===t));r&&a.push({token:r,chainId:n,isNativeAsset:!1,balance:e.amount.value})}}))}catch(e){v.Z.error(`!!! getOwnedAssets error: ${e}`)}return a}))}getTokenListByAddress(e){return G(this,arguments,(function*({address:e,chainId:t,chain:n,customQuery:a}){const r=[],s=this.getApi(t);if(!s)throw(0,p.t)("app:controller_errors.chain_not_supported",{chainId:t});try{const t=a||`?module=account&action=tokenlist&address=${e}`,o=yield fetch(`${s}${t}`),i=(yield o.json()).result;if(i){const t=V(this,U).assets.getTopTokensByChain(n.getId());for(const a of i){const s=t.find((e=>e.address===a.contractAddress||e.address===a.tokenAddress));if(s){if(-1===r.findIndex((e=>e.token.address===s.address||e.token.address===a.tokenAddress))){let t="0";try{t=s.address?yield V(this,U).chains.getChainControllerById(n.getId()).selfCast().getTokenBalance(s.address,e):a.balance||a.amount||a.value}catch(e){t=a.balance||a.amount||a.value||"0",v.Z.error(`!!! getBalance error: ${e}`)}r.push({token:s,chainId:n.getId(),isNativeAsset:!1,balance:String(Number(t))})}}}}}catch(e){v.Z.error(`!!! getTokenListByAddress error: ${e}`)}return[...r]}))}fetchUserLPTokens(){return G(this,null,(function*(){var e;try{const{wallets:t,activeWalletId:n}=I.Z.getState().wallets,a=V(this,U).chains.getChainControllerById((0,u.Bw)(h.yp.Ethereum)),r=null==(e=t[n])?void 0:e.chainData[a.getId()];if(!r)return void setTimeout((()=>{this.fetchUserLPTokens()}),1e3);const{address:s}=r,o=yield this.fetchLPTokens(s),i=(yield(0,O.X5)())||{};i[n]||(i[n]=S.v2);const l=o.reduce(((e,t)=>{const n=(0,j.qM)(t.network);return e[n]||(e[n]=[]),e[n].push(t),e}),{});Object.keys(l).forEach((e=>{V(this,U).chains.getChainControllersByType(e).forEach((t=>{const a=i[n][t.getId()];a&&(a.tokens=l[e])}))})),yield(0,O.lR)(i),this.upgradeLpIfPossible()}catch(e){v.Z.error(`Failed to load LP assets: ${e}`),r.Tb(e)}}))}fetchLPTokens(e){return G(this,null,(function*(){const t=yield(0,A.Io)(`${c.Z.get("LP_TOKENS_API")}/?address=${e}`);return Object.values(t.value.balance).reduce(((e,t)=>t.app?[...e,...t.app.data]:e),[])}))}}U=new WeakMap;const ee=Q;a()}catch(e){a(e)}}))},81331:(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{Z:()=>ie});var r=n(264487),s=n(691438),o=n(496486),i=n(831352),l=n(25022),d=n(739989),c=n(626423),h=n(640610),u=n(905479),p=n(446010),f=n(42763),g=n(556138),m=n(316683),y=n(693246),v=n(330101),b=n(605930),w=n(46461),I=n(740661),C=n(603874),A=n(519416),k=n(923840),T=n(557715),B=n(129341),S=n(287455),D=n(882591),x=n(606237),P=n(469607),E=n(196329),F=n(63081),_=n(919985),O=n(379372),Z=n(368042),j=n(632314),N=n(682435),U=n(623696),R=n(503402),K=n(630292),M=n(730876),$=n(628790),Buffer=n(348764).Buffer,W=e([f,x,P,E,F,_,O,Z,j,N,U,R,K]);[f,x,P,E,F,_,O,Z,j,N,U,R,K]=W.then?(await W)():W;var L,J=Object.defineProperty,X=Object.defineProperties,q=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,G=(e,t,n)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Y=(e,t)=>{for(var n in t||(t={}))z.call(t,n)&&G(e,n,t[n]);if(H)for(var n of H(t))V.call(t,n)&&G(e,n,t[n]);return e},Q=(e,t)=>X(e,q(t)),ee=(e,t,n)=>(G(e,"symbol"!=typeof t?t+"":t,n),n),te=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ne=(e,t,n)=>(te(e,t,"read from private field"),n?n.call(e):t.get(e)),ae=(e,t,n)=>new Promise(((a,r)=>{var s=e=>{try{i(n.next(e))}catch(e){r(e)}},o=e=>{try{i(n.throw(e))}catch(e){r(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,o);i((n=n.apply(e,t)).next())}));const re={pinnedNftIds:[],address:"",pubKey:void 0,chainId:C.y2,tokens:{},nft:{},hiddenNftIds:[],viewedNftIds:[],isNativeTokenPinned:!1,nativeTokenVisible:!0,recentSentAddresses:[]},se=(e,t)=>{const n=new Set(e.map((e=>e.id))),a=new Set(t.map((e=>e.id)));return n.size===a.size&&[...n].every((e=>a.has(e)))};class oe{constructor(e){var t,n,a,r;ee(this,"chainsStore",new Map),ee(this,"lastUpdated"),ee(this,"refreshRate"),ee(this,"lastUpdatedWalletId"),((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)})(this,L,void 0),ee(this,"getEVMChainController",(e=>this.getChainControllerById(e).selfCast())),ee(this,"getCosmosChainController",(e=>this.getChainControllerById(e).selfCast())),ee(this,"updateBalancesForWallet",((e,t=!1)=>{var n,a,r;const s=f.Z.getState().wallets.wallets[e];if(!s)return;const o=new Date;if((null==(n=this.lastUpdatedWalletId)?void 0:n.balances)===e&&this.lastUpdated&&o.getTime()-(null==(a=this.lastUpdated)?void 0:a.balances.getTime())<(null==(r=this.refreshRate)?void 0:r.balances)&&t)return;this.lastUpdatedWalletId.balances=e;const i=this.getAllChainControllers().filter((e=>{var t,n,a,r,o;return(null==(n=null==(t=s.chainData)?void 0:t[e.getId()])?void 0:n.nativeTokenVisible)||Object.keys(null!=(o=null==(r=null==(a=s.chainData)?void 0:a[e.getConfig().id])?void 0:r.tokens)?o:{}).length}));Promise.allSettled(i.map((t=>(0,v.nK)(this.getChainControllerById(t.getId()).updateBalance(e),45e3)))).then((e=>e.flat().reduce(((e,t)=>("fulfilled"===t.status&&e.push(t.value),e)),[]))).then((e=>e.reduce(((e,t)=>(e.chainBalanceStateUpdate.push(t.chainBalanceStateUpdate),t.tokenBalancesStateUpdate&&e.tokenBalancesStateUpdate.push(t.tokenBalancesStateUpdate),e)),{chainBalanceStateUpdate:[],tokenBalancesStateUpdate:[]}))).then((e=>{const t=e.tokenBalancesStateUpdate,n=e.chainBalanceStateUpdate;f.Z.dispatch((0,h.jr)(t)),f.Z.dispatch((0,h.Nx)(n))})).catch((e=>{d.Z.error({msg:"updateBalancesForWallet",error:e})})).finally((()=>{f.Z.dispatch((0,p.Xt)({loading:!1})),this.lastUpdated.balances=new Date}))})),ee(this,"updateChainBalanceForActiveWallet",(e=>ae(this,null,(function*(){const t=f.Z.getState().wallets.activeWalletId;return this.getChainControllerById(e).updateBalance(t)})))),ee(this,"updateAllChainsBalanceForActiveWallet",((...e)=>ae(this,[...e],(function*(e=[]){const t=[],n=[];for(const a of e)try{const e=yield this.updateChainBalanceForActiveWallet(a);(null==e?void 0:e.tokenBalancesStateUpdate)&&n.push(e.tokenBalancesStateUpdate),t.push(e.chainBalanceStateUpdate)}catch(e){d.Z.warn(`Error while trying to update balance on ${a}`,e)}n.length&&f.Z.dispatch((0,h.jr)(n)),f.Z.dispatch((0,h.Nx)(t))})))),ee(this,"addWalletChain",((e,t,n)=>{const a=e.walletInfo.data;let r=(0,o.cloneDeep)(e.chainData);return n.forEach((e=>{let n={};n=t instanceof M.H?{seed:{seed:t,walletIndex:a.walletIndex}}:{pk:t};const s=this.getAddress(e,n);r[e]||(r[e]=re),r=Q(Y({},r),{[e]:Q(Y({},r[e]),{address:s.address,pubKey:s.pubKey&&Buffer.from(s.pubKey.buffer).toString("hex"),chainId:e})})})),r})),ee(this,"addWalletChainWithAddress",((e,t,n)=>(t.forEach((t=>{e.chainData[t]||(e.chainData[t]=re),e.chainData=Q(Y({},e.chainData),{[t]:Q(Y({},e.chainData[t]),{address:n.address,pubKey:n.pubKey&&Buffer.from(n.pubKey.buffer).toString("hex"),chainId:t})})})),e.chainData))),a=e,te(t=this,n=L,"write to private field"),r?r.call(t,a):n.set(t,a);const s=6e4;this.refreshRate={allBalances:3e5,balances:9e4,transactions:s,nft:18e4},this.lastUpdated={balances:new Date,nft:new Date,transactions:new Date,chainId:"all"},this.lastUpdatedWalletId={balances:"",nft:"",transactions:""},this.initChainsStore()}setCustomRpcUrls(e,t){return ae(this,null,(function*(){yield this.checkCustomRpcUrlsValidity(e.getId(),t[e.getId()]),f.Z.dispatch((0,u.fH)({chainId:e.getId(),nodeUrl:t[e.getId()]})),e.reloadJsonRpcProvidersUrls()}))}checkCustomRpcUrlsValidity(e,t){return ae(this,null,(function*(){try{const n=this.getChainControllerById(e);if(!n)throw(0,w.t)("app:controller_errors.error_grabbing_controller",{chainKey:e});yield(0,v.nK)(n.checkCustomRpcUrl(e,t),5e3,(0,w.t)("app:error_helper.rpc_promise_timed_out"))}catch(e){throw e}}))}fetchTransactions(e,t){return ae(this,null,(function*(){var n,a,r;const s=new Date;if(!(this.lastUpdated.chainId===t&&(null==(n=this.lastUpdatedWalletId)?void 0:n.transactions)===e&&this.lastUpdated&&s.getTime()-(null==(a=this.lastUpdated)?void 0:a.transactions.getTime())<(null==(r=this.refreshRate)?void 0:r.transactions)))try{yield this.getTransactions(t),this.lastUpdated.transactions=new Date,this.lastUpdatedWalletId.transactions=e,this.lastUpdated.chainId=t}finally{return}}))}initChainWithConfig(e,t){switch(e){case s.J.Evm:return new O.xP(ne(this,L),t);case s.J.Bitcoin:return new E.Z(t);case s.J.Litecoin:return new Z.Z(t);case s.J.Dogecoin:return new _.Z(t);case s.J.BitcoinCash:return new P.Z(t);case s.J.Binance:return new x.Z(t);case s.J.Cosmos:return new F.ZP(t);case s.J.Thorchain:return new R.Z(t);case s.J.Solana:return new N.Z(ne(this,L),t);case s.J.Terra:return new U.y8(t);case s.J.Near:return new j.E(t);default:throw`Chain type "${e}" is not supported`}}addChainController(e){const t=this.initChainWithConfig(e.type,e);this.chainsStore.has(e.id)||this.chainsStore.set(e.id,Object.seal(t))}removeChainController(e){this.chainsStore.delete(e)}getChainControllersByType(e){const t=this.getAllChainControllers().filter((t=>t.getType()===e));if(!t.length)throw`Chain with type "${e}" not found in the store`;return t}getFirstChainControllerByType(e){const t=this.getChainControllersByType(e);if(!t.length)throw`Chain with type "${e}" not found in the store`;return t[0]}getChainControllerById(e){const{chains:t}=f.Z.getState().chains;let n=t.find((t=>t.id===e));if(n||(n=t.find((t=>t.network.chainId===e))),n||(n=t.find((t=>t.network.chainId===(0,c.Bw)(e)))),!n)throw`Chain with ID "${e}" not found in the store`;return this.chainsStore.get(n.id)}getChainControllerByFeature(e){const t=this.getAllChainControllers().filter((t=>t.support(e)));if(!t.length)throw`Chain with feature "${e}" not found in the store`;return t}getAllChainControllers(){return Array.from(this.chainsStore.values())}getAllChainControllerIds(){return this.getAllChainControllers().map((e=>e.getId()))}getAllChainNetworkIds(){return this.getAllChainControllers().map((e=>e.getConfig().network.chainId))}hasChainController(e){return this.chainsStore.has(e)}initChainsStore(e=f.Z.getState().chains.chains){for(const t of e)this.addChainController(t);const t=f.Z.subscribe((()=>{const n=f.Z.getState().chains.chains;se(n,e)||(this.initChainsStore(n),e=n,t())}));return()=>t()}getAddress(e,t){return this.getChainControllerById(e).getAddress(t)}getPrivateKey(e,t){return this.getChainControllerById(e).getPrivateKey(t)}getPrivateKeys(e,t){const n=this.getChainControllerById(C.y2).getPrivateKey(t);return e.filter((e=>this.hasChainController(e))).map((e=>{const a=this.getChainControllerById(e);if(a.hasType(s.J.Evm))return{privateKey:n,chainId:e};return{privateKey:a.getPrivateKey(t),chainId:e}}))}getAllAddresses(e,t=[]){const n=this.getFirstChainControllerByType(s.J.Evm).getAddress(e);return this.getAllChainControllerIds().reduce(((a,r)=>{var o,l;const d=this.getChainControllerById(r),h=d.getType()===s.J.Evm?n:this.getAddress(r,e);let u={};d.hasTypeAndChainId(s.J.Evm,K.m1.Ethereum)&&(u=this.getDefaultTokens(r,["XDEFI"]));const p=!(null==t?void 0:t.includes(d.getConfig().network.chainId));let f="";const g=(null==(o=e.seed)?void 0:o.seed.toString())||e.pk;if(d.getConfig().network.chainId===(0,c.Bw)(i.yp.Bitcoin)&&g){f=E.Z.getBtcKeys(g,null==(l=e.seed)?void 0:l.walletIndex,(0,c.XL)(d.selfCast().getConfig().network.activeNetwork)).publicKey.toString("hex")}return a[r]=Q(Y({},re),{nativeTokenVisible:p,isNativeTokenPinned:!1,address:h.address,pubKey:""!==f?f:h.pubKey&&Buffer.from(h.pubKey.buffer).toString("hex"),chainId:d.getId(),tokens:u}),a}),{})}getDefaultTokens(e,t){const n={},a=t.map((t=>{var n;return null==(n=ne(this,L).chains.getChainControllerById(e).getDefaultTokens())?void 0:n.find((e=>e.symbol===t))})).filter((e=>!!e));return a.length&&a.forEach((t=>{if(t){const a=ne(this,L).assets.getAssetToken(e,t.symbol,t.address);a&&(n[a.id]=Q(Y({},a),{isPinned:!1}))}})),n}updateBalancesForAllWallets(){var e,t;const{wallets:n}=f.Z.getState().wallets;if(Object.keys(n).length>0){const n=new Date;if((null==(e=this.lastUpdated)?void 0:e.allBalances)&&n.getTime()-(null==(t=this.lastUpdated.allBalances)?void 0:t.getTime())<this.refreshRate.allBalances)return;this.lastUpdated.allBalances=new Date,Promise.all(this.getAllChainControllers().map((e=>void 0===e.updateAllBalance?Promise.resolve([]):e.updateAllBalance().then((t=>t.reduce(((t,n)=>("fulfilled"===n.status?t.push(n.value):d.Z.error({msg:"Unable to resolve wallet balance for "+e.getType(),chainWalletBalance:n}),t)),[])))))).then((e=>e.flat())).then((e=>e.reduce(((e,t)=>(e.chainBalanceStateUpdate.push(t.chainBalanceStateUpdate),t.tokenBalancesStateUpdate&&e.tokenBalancesStateUpdate.push(t.tokenBalancesStateUpdate),e)),{chainBalanceStateUpdate:[],tokenBalancesStateUpdate:[]}))).then((e=>{const t=e.tokenBalancesStateUpdate,n=e.chainBalanceStateUpdate;try{f.Z.dispatch((0,h.jr)(t))}catch(e){d.Z.error({msg:"updateTokenBalances",error:e,tokenBalancesStateUpdates:t})}try{f.Z.dispatch((0,h.Nx)(n))}catch(e){d.Z.error({msg:"updateChainBalances",chainBalanceStateUpdates:n,e})}})).catch((e=>{d.Z.error({msg:"updateBalancesForAllWallets",error:e})}))}f.Z.dispatch((0,p.Xt)({loading:!1}))}getNFTBalanceRequests(e){const t=[],n=this.getChainControllerByFeature(s.B.Nft),a={[this.getFirstChainControllerByType(s.J.Solana).getId()]:S.Wt,[this.getFirstChainControllerByType(s.J.Bitcoin).getId()]:S.to,[this.getChainControllerById((0,c.Bw)(i.yp.Stargaze)).getId()]:S.v9,[this.getChainControllerById((0,c.Bw)(i.yp.Juno)).getId()]:S.aW,[this.getFirstChainControllerByType(s.J.Evm).getId()]:S.E_};return Object.entries(a).forEach((([a,r])=>{var s;if(!(null==(s=e[a])?void 0:s.address))return;const o=new Promise(((t,s)=>ae(this,null,(function*(){r(e[a].address).then((e=>{const a=n.reduce(((t,n)=>{var a,r,s,o,i,l,d;const h=n.getConfig().network.chainId,u=null!=(a=D.u[c.hv[h]])?a:c.hv[h],p=[...null!=(o=null==(s=null==(r=e.data)?void 0:r[u])?void 0:s.nfts)?o:[],...null!=(d=null==(l=null==(i=e.data)?void 0:i[u])?void 0:l.legacyNFTs)?d:[]];return h&&0!==p.length?(t[h]=(0,v.JE)(p,String(h)),t):t}),{});t(a)})).catch((e=>{s(e)}))}))));t.push(o)})),t}checkForSentNFTs(){const e=f.Z.getState()[g.StoreKeys.Wallets].wallets[f.Z.getState()[g.StoreKeys.Wallets].activeWalletId],t=(0,o.clone)(e.sentNFTIDs),n=Object.keys(e.sentNFTIDs);Promise.all(n.map((e=>{const n=this.getChainControllerById(t[e].chainId);if(n.getType()===s.J.Evm)try{n.getTransactionByHash(t[e].txHash).then((n=>{(null==n?void 0:n.blockNumber)||delete t[e]}))}catch(t){d.Z.error(`error while checking transaction for ${e}`,{error:t})}}))).then((()=>{this.updateSentNFTIDs(e.id,t)}))}updateNFTData(e){return ae(this,null,(function*(){var t,n,a,i;const l=new Date;if((null==(t=this.lastUpdatedWalletId)?void 0:t.nft)===e&&(null==(n=this.lastUpdated)?void 0:n.nft)&&l.getTime()-(null==(i=null==(a=this.lastUpdated)?void 0:a.nft)?void 0:i.getTime())<this.refreshRate.nft)return;this.lastUpdatedWalletId.nft=e;const{activeWalletId:c,wallets:h}=f.Z.getState().wallets;return new Promise((e=>ae(this,null,(function*(){try{const e=h[c].chainData,t=this.getNFTBalanceRequests(e);if(!(null==t?void 0:t.length))return;f.Z.dispatch((0,m.no)({walletId:c,nftLoading:!0}));let n=yield Promise.allSettled(t);if(n=n.filter((e=>{var t;return"fulfilled"===(null==e?void 0:e.status)&&!(null==(t=null==e?void 0:e.value)?void 0:t.error)})),n.length<1)return void f.Z.dispatch((0,m.no)({walletId:c,nftLoading:!1}));this.checkForSentNFTs();const a=n.reduce(((e,t)=>{var n,a,r;return[...e,...Object.values(null!=(r=null!=(a=null==(n=t.value)?void 0:n.value)?a:t.value)?r:{}).flat()]}),[]).filter((e=>{var t,n;return!Object.keys(h[c].sentNFTIDs).includes(null!=(n=null==(t=e.nftData)?void 0:t.tokenId)?n:e.id)})).reduce(((e,t)=>{const n=this.getChainControllerById(t.chainId);return e[t.id]=Q(Y({},t),{chainId:n.getId()}),e}),{}),r=(0,o.clone)(h[c].nftIdOrders),i={},l=Object.keys(a).reduce(((e,t)=>{var n,s;const o=a[t];return r.includes(o.id)||r.unshift(o.id),o.nftData.isNftSpam&&(i[o.chainId]=(null!=(n=i[o.chainId])?n:[]).concat(t)),Q(Y({},e),{[o.chainId]:Q(Y({},null!=(s=e[o.chainId])?s:{}),{[t]:o})})}),{});f.Z.dispatch((0,m.fX)({walletId:c,nftIdOrders:r}));const d=[],u=(0,o.cloneDeep)(h[c]);this.getChainControllerByFeature(s.B.Nft).forEach((t=>{var n;const a=t.getId();if(void 0!==e[a]){const e=u.chainData[a].nft;(null!=(n=i[a])?n:[]).forEach((t=>{const n=null==e?void 0:e[t];n&&void 0!==n.nftData.isNftSpam||d.push(t)})),u.chainData[a].nft=l[a]}}));const{hiddenNFTIDs:p=[]}=u;u.hiddenNFTIDs=[...new Set([...p,...d])],f.Z.dispatch((0,m.rO)({wallet:u})),this.lastUpdated.nft=new Date}catch(e){d.Z.error(e),r.Tb(e)}finally{f.Z.dispatch((0,m.no)({walletId:c,nftLoading:!1}))}e()}))))}))}getTransactions(e){return ae(this,null,(function*(){try{return this.getChainControllerById(e).getTransactions()}catch(e){throw e}}))}getBalance(e,t,n,a=f.Z.getState().wallets.activeWalletId){var r,o,i;const l=f.Z.getState().balances[a],c=null==l?void 0:l.chains[e];let h=t;const u=ne(this,L).chains.getChainControllerById(e);switch(u.getType()){case s.J.Evm:if(h!==u.getConfig().tokenSymbol&&n&&(h=n),h===u.getConfig().tokenSymbol)return(null==c?void 0:c.balance)||0;n&&(h=n);break;case s.J.Binance:if("BNB"===h)return(null==c?void 0:c.balance)||0;if(h!==u.getConfig().tokenSymbol&&n&&(h=n),h===u.getConfig().tokenSymbol)return(null==c?void 0:c.balance)||0;n&&(h=n);break;case s.J.Solana:case s.J.Near:if(h!==u.getConfig().tokenSymbol&&n&&(h=n),h===u.getConfig().tokenSymbol)return(null==c?void 0:c.balance)||0;break;case s.J.Terra:const t=["luna","lunc","uluna"];if(-1===t.indexOf(null==h?void 0:h.toLowerCase())&&n&&(h=n),-1!=t.indexOf(null==h?void 0:h.toLowerCase()))return(null==c?void 0:c.balance)||0;break;case s.J.Litecoin:case s.J.Bitcoin:case s.J.BitcoinCash:case s.J.Dogecoin:case s.J.Thorchain:return(null==c?void 0:c.balance)||0;case s.J.Cosmos:if(h!==u.getConfig().tokenSymbol&&n&&(h=n),h===u.getConfig().tokenSymbol)return(null==c?void 0:c.balance)||0;break;default:throw`getBalance not implemented for ${e}`}if(!c)return"0";try{const e=(null==(o=c.tokens[null!=(r=null==h?void 0:h.toLowerCase())?r:""])?void 0:o.balance)||(null==(i=c.tokens[h])?void 0:i.balance)||"0";return void 0!==(null==e?void 0:e._hex)?null==e?void 0:e._hex:e}catch(e){return d.Z.error({e}),"0"}}getBalanceThorchain(e,t=f.Z.getState().wallets.activeWalletId){var n,a;const r=this.getChainControllersByType(s.J.Thorchain)[0],o=null==(n=f.Z.getState().balances[t])?void 0:n.chains[r.getId()];if(e&&(0,b.lA)(e,B.pM))return o.balance;if(!o)return"0";try{const t=(0,B.Ck)(e);return(null==(a=o.tokens[t])?void 0:a.balance)||"0"}catch(e){return d.Z.error({e}),"0"}}updateNFTIdOrders(e,t){f.Z.dispatch((0,m.fX)({walletId:e,nftIdOrders:t}))}addRecentSentAddress(e,t,n){f.Z.dispatch((0,m.cx)({chainId:e,walletId:t,address:n}))}updateSentNFTIDs(e,t){f.Z.dispatch((0,m.tl)({walletId:e,sentNFTIDs:t}))}addCustomChainItems(e){return ae(this,null,(function*(){var t,n,a;try{this.chainsStore.has(e.id)||(f.Z.dispatch((0,u.ws)(e)),this.addChainController(e));const r=e.id,i=(0,o.cloneDeep)(f.Z.getState().wallets.wallets),d=this.getCosmosChainController(C.Re),c=[];for(const o of Object.keys(i)){if(!ne(this,L).wallets.doesWalletHaveChainType(e.type,o))continue;c.push({chainId:r,walletId:o,chainBalance:"0"});const l=i[o];let h,u="";if((null==e?void 0:e.type)===s.J.Evm)u=l.chainData[C.y2].address;else{if((null==e?void 0:e.type)!==s.J.Cosmos)throw e;{if(![y.c.Keystore,y.c.Ledger].includes(l.walletInfo.type))continue;const r=this.getCosmosChainController(e.id),s=d.getConfig().slip44coinType,o=r.getConfig().slip44coinType,i=null==(n=null==(t=l.chainData)?void 0:t[C.Re])?void 0:n.pubKey;if(l.walletInfo.type===y.c.Keystore)if(o!==s){const e=null==(a=l.walletInfo.data)?void 0:a.keystore,t=yield ne(this,L).masterKeys.generatePasswordFromKeystore(e,ne(this,L).masterKeys.masterPassword),n=yield(0,$.WR)(e,t),{address:s,pubKey:o}=r.getAddress({seed:{seed:n,walletIndex:l.walletInfo.data.walletIndex}});u=s,h=o}else i&&(u=F.ZP.generateIBCChainAddress(i,e.chainAddressPrefix),h=Uint8Array.from(Buffer.from(i,"hex")));else if(l.walletInfo.type===y.c.Ledger){if(o!==s)continue;if(!i)throw e;u=F.ZP.generateIBCChainAddress(i,e.chainAddressPrefix),h=Uint8Array.from(Buffer.from(i,"hex"))}}}i[o].chainData=this.addWalletChainWithAddress(i[o],[r],{address:u,pubKey:h||void 0})}f.Z.dispatch((0,m.QB)({wallets:i})),f.Z.dispatch((0,h.Nx)(c)),ne(this,L).analytics.track(l.uT.CustomChainAdded,{chainId:e.network.chainId,chainName:e.longName})}catch(t){throw d.Z.error("addCustomChainItems",{error:t}),yield this.deleteChainConfig(e.id),t}}))}addChainItems(){return ae(this,null,(function*(){const{chains:e}=f.Z.getState().chains,t=Object.values(e),n=(0,o.cloneDeep)(f.Z.getState().wallets.wallets);yield Promise.all(Object.keys(n).map((e=>ae(this,null,(function*(){var a,r;let o;for(const i of t)try{const t=n[e];this.chainsStore.has(i.id)||(f.Z.dispatch((0,u.ws)(i)),this.addChainController(i));const l=i.id;if(t.chainData[l])continue;if(!ne(this,L).wallets.doesWalletHaveChainType(i.type,e))continue;const d=null==(r=null==(a=t.chainData)?void 0:a[C.Re])?void 0:r.pubKey,c=this.getCosmosChainController(C.Re);if((null==i?void 0:i.type)===s.J.Evm){const a=t.chainData[C.y2].address;n[e].chainData=this.addWalletChainWithAddress(n[e],[l],{address:a});continue}if((null==i?void 0:i.type)===s.J.Cosmos&&d&&(null==i?void 0:i.slip44coinType)===c.getConfig().slip44coinType){const t=F.ZP.generateIBCChainAddress(d,i.chainAddressPrefix);n[e].chainData=this.addWalletChainWithAddress(n[e],[l],{address:t,pubKey:Uint8Array.from(Buffer.from(d,"hex"))});continue}if(t.walletInfo.type!==y.c.Keystore||o)t.walletInfo.type===y.c.Keystore&&o&&(n[e].chainData=this.addWalletChain(n[e],o,[l]));else{const a=t.walletInfo.data,r=yield ne(this,L).masterKeys.generatePasswordFromKeystore(a.keystore,ne(this,L).masterKeys.masterPassword);o=yield(0,$.WR)(a.keystore,r),n[e].chainData=this.addWalletChain(n[e],o,[l])}}catch(e){throw d.Z.error("addChainItems",{error:e}),e}}))))),f.Z.dispatch((0,m.QB)({wallets:n}))}))}addChainConfig(e){f.Z.dispatch((0,u.ws)(e)),this.addChainController(e)}editChainConfig(e){return ae(this,null,(function*(){yield this.checkCustomRpcUrlsValidity(e.id,e.network.jsonRpcProviderUrl),this.removeChainController(e.id),f.Z.dispatch((0,u.ZC)(e.id)),this.addChainConfig(e)}))}deleteChainConfig(e){return ae(this,null,(function*(){const t=this.getChainControllerById(e);return new Promise(((n,a)=>{try{this.removeChainController(e),f.Z.dispatch((0,u.ZC)(e)),this.deleteCustomChainFromWallets(e),t.getType()===s.J.Evm&&(ne(this,L).dappsProviders.setWindowEthereumChain(C.y2),A.browser.extension.getBackgroundPage().processor.getDefaultConfiguration()),ne(this,L).assets.updateActiveAssetChain("all"),ne(this,L).assets.updateActiveNFTChain("all"),f.Z.dispatch((0,I.gs)({chain:e})),f.Z.dispatch((0,k.Yf)()),f.Z.dispatch((0,T.o_)()),n()}catch(e){a(e),d.Z.error("deleteChainConfig",{error:e}),f.Z.getState().chains.chains.find((e=>e.id===t.getId()))?this.addChainController(t.getConfig()):this.addCustomChainItems(t.getConfig())}}))}))}deleteCustomChainFromWallets(e){const t=(0,o.cloneDeep)(f.Z.getState().wallets.wallets),n=Object.keys(t);for(const a of n){const n=t[a],r=(0,o.cloneDeep)(n.chainData);delete r[e],t[a].chainData=r}f.Z.dispatch((0,m.QB)({wallets:t})),f.Z.dispatch((0,h.rT)({walletIds:n,chainId:e}))}hideNFT(e,t){f.Z.dispatch((0,m.Tv)({walletId:e,nftId:t}))}unhideNFT(e,t){f.Z.dispatch((0,m.Mf)({walletId:e,nftId:t}))}}L=new WeakMap;const ie=oe;a()}catch(e){a(e)}}))},159655:(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{Z:()=>z});var r=n(409669),s=n.n(r),o=n(575019),i=n(831352),l=n(496486),d=n(42763),c=n(25022),h=n(739989),u=n(740661),p=n(923840),f=n(557715),g=n(943193),m=n(316683),y=n(519416),v=n(620531),b=n(866565),w=n(63081),I=n(630292),C=n(691438),A=e([o,d,v,w,I]);[o,d,v,w,I]=A.then?(await A)():A;var k,T,B,S,D,x=Object.defineProperty,P=Object.defineProperties,E=Object.getOwnPropertyDescriptors,F=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,Z=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,j=(e,t)=>{for(var n in t||(t={}))_.call(t,n)&&Z(e,n,t[n]);if(F)for(var n of F(t))O.call(t,n)&&Z(e,n,t[n]);return e},N=(e,t)=>P(e,E(t)),U=(e,t,n)=>(Z(e,"symbol"!=typeof t?t+"":t,n),n),R=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},K=(e,t,n)=>(R(e,t,"read from private field"),n?n.call(e):t.get(e)),M=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},$=(e,t,n,a)=>(R(e,t,"write to private field"),a?a.call(e,n):t.set(e,n),n);const W="http://localhost",L="https://api.llama.fi/protocols",J="dappconnect.html",X="multiTxMsgSign.html",q="importAccount.html";class H{constructor(e){M(this,k,void 0),M(this,T,void 0),M(this,B,void 0),M(this,S,void 0),M(this,D,void 0),U(this,"getChainsController",(()=>y.browser.extension.getBackgroundPage().masterController.chains)),U(this,"getAddressesForDApp",((e,t)=>{if(h.Z.debug({method:"getAddressesForDApp",chainId:e,walletIds:t}),!t)return[];const{wallets:n,activeWalletId:a}=d.Z.getState().wallets,r=[...t],s=t.indexOf(a)||-1;-1!==s&&(r.splice(s,1),r.unshift(a));const o=this.getChainsController().getChainControllerById(e);return o.getType()===C.J.Cosmos?w.ZP.getAccountDataForDapp(e,r,n)[0]:r.reduce(((t,a)=>{if(void 0!==n[a].chainData[e]){let r=n[a].chainData[e].address;return r&&o.getType()===C.J.Evm&&(r=null==r?void 0:r.toLowerCase()),[...t,r]}return t}),[])})),U(this,"getAddressesAndPublicKeyForDApp",((e,t)=>{if(!t)return[];const{wallets:n,activeWalletId:a}=d.Z.getState().wallets,r=[...t],s=t.indexOf(a)||-1;return-1!==s&&(r.splice(s,1),r.unshift(a)),r.reduce(((t,a)=>{var r;if(void 0!==n[a].chainData[e]){const s=n[a].chainData[e].address,o=(null==(r=n[a].chainData[e])?void 0:r.pubKey)||"";return[...t,{address:s,publicKey:o}]}return t}),[])})),U(this,"getFavIconUrlForDapp",(e=>{var t;const{connected:n}=d.Z.getState().dapps;return null==(t=n[e])?void 0:t.faviconUrl})),U(this,"getConnectedWallets",(e=>{const t=this.isDAppConnected(e);if(!t||!t.walletIds.length)return[];const{wallets:n,activeWalletId:a}=d.Z.getState().wallets;return t.walletIds.reduce(((t,r)=>{var s;const o=null==(s=n[r].chainData)?void 0:s[e.chainId];if(void 0===o)return t;const i={id:r,label:n[r].label,address:o.address};return i.id===a?[i,...t]:[...t,i]}),[])})),U(this,"updateAddressesForDApp",(e=>{var t;const{connected:n,currentTab:a}=d.Z.getState().dapps,r=null==(t=n[a.id])?void 0:t.walletIds,s=this.getAddressesForDApp(e,r||[]),i=this.getChainsController().getChainControllerById(e);if(i.getType()===C.J.Evm&&Array.isArray(s)){if((0,o.qC)(s),!s){const e=i.getConfig().network.chainId===I.m1.Ethereum?"Evm_137":i.getId(),t=this.getChainsController().getChainControllerById(e),n=t.getConfig("network.defaultRpc"),a=Number(t.getConfig().network.chainId);(0,o.iT)(a,n)}const e=i.getConfig("network.defaultRpc"),t=Number(i.getConfig().network.chainId);(0,o.iT)(t,e)}})),U(this,"updateActiveAddressesForDApp",((e,t=!1)=>{const{wallets:n}=d.Z.getState().wallets,a=d.Z.getState().dappsProviders.settings.ethereumProvider.windowEthereumChain;if(!(a in n[e].chainData))return;const{address:r}=n[e].chainData[a];if(t);else{(0,o.qC)([r]);const e=this.getChainsController().getChainControllerById(a),t=e.getConfig("network.defaultRpc"),n=Number(e.getConfig().network.chainId);(0,o.iT)(n,t)}})),U(this,"handleCurrentTab",(e=>{var t,n,a,r,s,i,l,c,h;if(!e.active)return;const p=(null==e?void 0:e.url)||"";if(e.id===K(this,T).popupId||"complete"!==e.status)return;if(!p||!p.startsWith("http")&&!p.startsWith("https"))return void d.Z.dispatch((0,u.gt)());const f=new URL(p).hostname;if(f===(null==(a=null==(n=null==(t=d.Z.getState())?void 0:t.dapps)?void 0:n.currentTab)?void 0:a.domain))return;const m={id:f,url:p,domain:f,title:(null==e?void 0:e.title)||"",favicon:(null==e?void 0:e.favIconUrl)||""};if(d.Z.dispatch((0,u.TH)(m)),(null==(i=null==(s=null==(r=d.Z.getState())?void 0:r.dapps.connected[f])?void 0:s.chains)?void 0:i[0])&&(null==(l=d.Z.getState())?void 0:l.dapps.connected[f].chains[0])!==d.Z.getState().dappsProviders.settings.ethereumProvider.windowEthereumChain){const e=null==(c=d.Z.getState())?void 0:c.dappsProviders.settings,t=null==(h=d.Z.getState())?void 0:h.dapps.connected[f].chains[0];if(t){const n=this.getChainsController().getChainControllerById(t);n.getType()===C.J.Evm&&d.Z.dispatch((0,g.I)({settings:N(j({},e),{ethereumProvider:N(j({},null==e?void 0:e.ethereumProvider),{windowEthereumChain:n.getId()})})}));const a=n.getConfig("network.defaultRpc"),r=Number(n.getConfig().network.chainId);(0,o.iT)(r,a)}}})),U(this,"isDAppConnected",(e=>{var t,n,a;const{connected:r}=d.Z.getState().dapps;if(h.Z.debug({connected:r,method:"isDappConnected",msg:e}),!r||!Object.keys(r).length)return!1;const s=new URL((null==(t=e.origin)?void 0:t.url)||W).hostname;return!!(null==(a=null==(n=null==r?void 0:r[s])?void 0:n.chains)?void 0:a.includes(null==e?void 0:e.chainId))&&r[s]})),U(this,"sendDappAddresses",(e=>{var t,n,a,r,s,l;const c=this.isDAppConnected(e);if(!c)return!1;const{locked:h}=d.Z.getState().masterKeystore;if(h)return!1;const p=d.Z.getState().wallets.activeWalletId;let f;f=e.raw.method===i.tV.RequestAccountsAndKeys?this.getAddressesAndPublicKeyForDApp(e.chainId,c.walletIds):this.getAddressesForDApp(e.chainId,c.walletIds);const g=new URL((null==(t=e.origin)?void 0:t.url)||W).hostname;if((null==(n=c.chains)?void 0:n.includes(e.chainId))||d.Z.dispatch((0,u.aN)({chain:e.chainId,dappId:g})),!f||Array.isArray(f)&&!f.length)return!1;(null==(a=c.walletIds)?void 0:a.includes(p))||d.Z.dispatch((0,m.sm)({walletId:c.walletIds[0]}));const{ethereumProvider:{windowEthereumChain:y}}=null==(r=d.Z.getState())?void 0:r.dappsProviders.settings;if(null==(l=null==(s=e.origin)?void 0:s.tab)?void 0:l.id){const e=this.getChainsController().getChainControllerById(y),t=e.getConfig("network.defaultRpc"),n=Number(e.getConfig().network.chainId);(0,o.iT)(n,t)}return f})),U(this,"handleRequestedDApps",((e,t,n)=>{var a;const r=(null==(a=null==e?void 0:e.sender)?void 0:a.url)||"",{xdefiId:s}=t;if(""===r)return!1;const o=this.sendDappAddresses(t),i=this.getChainsController().getChainControllerById(t.chainId);if(!o&&n&&i.getType()!==C.J.Cosmos){if((new Date).getTime()-n.getTime()<2e3)return{name:"xdefiprovider",data:{id:s,name:"result",jsonrpc:"2.0",result:[]}}}return o?{name:"xdefiprovider",data:{id:s,name:"result",jsonrpc:"2.0",result:o}}:(K(this,T).showPopup(),d.Z.dispatch((0,p.mQ)(t)),!0)})),$(this,k,e),$(this,T,new b.Z(J)),$(this,B,new b.Z(X)),$(this,S,new b.Z(q)),$(this,D,new v.Z)}getWalletsSupportingDApp(e,t){const{wallets:n}=d.Z.getState().wallets;return t.filter((t=>void 0!==n[t].chainData[e]))}popRequestMessage(e){d.Z.dispatch((0,p.Pb)(e))}pushSignMessage(e){d.Z.dispatch((0,f.L9)(e))}popSignMessage(){d.Z.dispatch((0,f.bw)())}removeMessageById(e){d.Z.dispatch((0,f.ln)({id:e}))}resetSignMessages(){d.Z.dispatch((0,f.o_)())}showMultiTxMsgSign(){K(this,B).showPopup()}showImportAccount(){K(this,S).showPopup()}openAddAssetDialog(){K(this,T).showPopup("#/watch-asset")}openCustomRPCDialog(e){K(this,T).showPopup(`#/custom-rpc/${e}`)}openGetDecryptDialog(e){K(this,T).showPopup(`#/decrypt?xdefiId=${e}`)}openGetEncryptionPublicKeyDialog(e){K(this,T).showPopup(`#/public-key-encryption?xdefiId=${e}`)}addRequstedDApp(e,t,n,a,r){var s;if(e.includes(":"))throw Error("dappId must be a hostname");const{connected:o}=d.Z.getState().dapps,i=this.getWalletsSupportingDApp(t,n);if(!(e in o)||!o[e].chains.includes(t)){if(!(i.length>0))throw"Selected accounts doesn't have wallet for this DApp";{const n=null==(s=d.Z.getState())?void 0:s.dappsProviders.settings;K(this,k).setDappsProvidersSettings({settings:N(j({},n),{establishedConnectionDate:new Date})}),d.Z.dispatch((0,u.yg)({dappId:e,walletIds:i,faviconUrl:a,chain:t,title:r})),this.updateAddressesForDApp(t),K(this,D).track(c.uT.ConnectToDapp,{chainId:t,dappId:e})}}}removeWalletFromDApp(e,t){const{currentTab:n}=d.Z.getState().dapps;d.Z.dispatch((0,u.x1)({dappId:t||n.id,walletId:e})),this.updateAddressesForDApp(this.getChainsController().getFirstChainControllerByType(C.J.Evm).getId()),y.browser.extension.getBackgroundPage().processor.emit("XFI_DISCONNECT",n.id)}removeAllWalletsFromDapp(e){const{currentTab:t}=d.Z.getState().dapps;d.Z.dispatch((0,u.Io)({dappID:e})),this.updateAddressesForDApp(this.getChainsController().getFirstChainControllerByType(C.J.Evm).getId()),y.browser.extension.getBackgroundPage().processor.emit("XFI_DISCONNECT",t.id)}removeAllWalletsFromAllDapps(){const{connected:e}=d.Z.getState().dapps;Object.keys(e).forEach((e=>{this.removeAllWalletsFromDapp(e)}))}addWalletToDApp(e,t){const{currentTab:n}=d.Z.getState().dapps;d.Z.dispatch((0,u.zw)({dappId:t||n.id,walletId:e})),this.updateAddressesForDApp(this.getChainsController().getFirstChainControllerByType(C.J.Evm).getId())}addDappToFavourite(e,t,n){d.Z.dispatch((0,u.b8)({dappId:e,faviconUrl:t,title:n}))}removeDappFromFavourites(e){d.Z.dispatch((0,u.yw)({dappId:e}))}setFavourites(e){d.Z.dispatch((0,u.Ou)({favourites:e}))}removeWallet(e){d.Z.dispatch((0,u.h1)({walletId:e})),this.updateAddressesForDApp(this.getChainsController().getFirstChainControllerByType(C.J.Evm).getId())}removeWallets(e){d.Z.dispatch((0,u.dL)({walletIDs:e})),this.updateAddressesForDApp(this.getChainsController().getFirstChainControllerByType(C.J.Evm).getId())}isWalletConnected(e){var t,n,a;const{connected:r,currentTab:s}=d.Z.getState().dapps;return!!(null==r?void 0:r[null==s?void 0:s.id])&&((0,l.isArray)(null==(t=null==r?void 0:r[null==s?void 0:s.id])?void 0:t.walletIds)?null==(a=null==(n=null==r?void 0:r[null==s?void 0:s.id])?void 0:n.walletIds)?void 0:a.includes(e):(d.Z.dispatch((0,u.nb)({dappId:null==s?void 0:s.id})),!1))}getSuggestedDapps(){return e=this,t=null,n=function*(){let e;try{e=yield s().get(L)}catch(e){h.Z.error(e)}return e},new Promise(((a,r)=>{var s=e=>{try{i(n.next(e))}catch(e){r(e)}},o=e=>{try{i(n.throw(e))}catch(e){r(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,o);i((n=n.apply(e,t)).next())}));var e,t,n}addChainToDapp(e,t){d.Z.dispatch((0,u.aN)({dappId:e,chain:t}))}}k=new WeakMap,T=new WeakMap,B=new WeakMap,S=new WeakMap,D=new WeakMap;const z=H;a()}catch(e){a(e)}}))},943333:(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{Z:()=>w});var r=n(42763),s=n(943193),o=n(519416),i=n(575019),l=e([r,i]);[r,i]=l.then?(await l)():l;var d=Object.defineProperty,c=Object.defineProperties,h=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,g=(e,t,n)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t)=>{for(var n in t||(t={}))p.call(t,n)&&g(e,n,t[n]);if(u)for(var n of u(t))f.call(t,n)&&g(e,n,t[n]);return e},y=(e,t)=>c(e,h(t)),v=(e,t,n)=>(g(e,"symbol"!=typeof t?t+"":t,n),n);class b{constructor(){v(this,"getChainsController",(()=>o.browser.extension.getBackgroundPage().masterController.chains)),v(this,"setDappsProvidersSettings",(e=>{var t;const{currentTab:n}=r.Z.getState().dapps,a=null==(t=this.getChainsController().getChainControllerById(e.settings.ethereumProvider.windowEthereumChain))?void 0:t.getId();r.Z.dispatch((0,s.I)(y(m({},e),{settings:y(m({},e.settings),{ethereumProvider:{windowEthereumChain:a}})}))),window.processor.emitChangeConfig({configChanges:e.settings,tabId:n.id})})),v(this,"setPrioritiseXdefi",(e=>{var t;const n=null==(t=r.Z.getState())?void 0:t.dappsProviders.settings;return this.setDappsProvidersSettings({settings:y(m({},n),{prioritiseXdefi:e})})})),v(this,"setEthSignEnabled",(e=>{var t;const n=null==(t=r.Z.getState())?void 0:t.dappsProviders.settings;return this.setDappsProvidersSettings({settings:y(m({},n),{ethSignEnabled:e})})})),v(this,"setWindowEthereumChain",(e=>{var t;const n=null==(t=r.Z.getState())?void 0:t.dappsProviders.settings;this.setDappsProvidersSettings({settings:y(m({},n),{ethereumProvider:y(m({},null==n?void 0:n.ethereumProvider),{windowEthereumChain:e})})});const a=this.getChainsController().getChainControllerById(e),s=a.getConfig("network.defaultRpc"),o=Number(a.getConfig().network.chainId);(0,i.iT)(o,s)}))}}const w=b;a()}catch(e){a(e)}}))},606237:(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{Z:()=>$});var r=n(258298),s=n(264487),o=n(783313),i=n(645722),l=n(942274),d=n(276749),c=n(148771),h=n(225071),u=n(409669),p=n.n(u),f=n(135974),g=n(255357),m=n(209030),y=n(855192),v=n(831352),b=n(830492),w=n(46461),I=n(596111),C=n(626423),A=n(42763),k=n(693246),T=n(739989),B=n(628790),S=n(630292),Buffer=n(348764).Buffer,D=e([y,A,S]);[y,A,S]=D.then?(await D)():D;var x=Object.defineProperty,P=Object.defineProperties,E=Object.getOwnPropertyDescriptors,F=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,Z=Math.pow,j=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,N=(e,t)=>{for(var n in t||(t={}))_.call(t,n)&&j(e,n,t[n]);if(F)for(var n of F(t))O.call(t,n)&&j(e,n,t[n]);return e},U=(e,t)=>P(e,E(t)),R=(e,t,n)=>(j(e,"symbol"!=typeof t?t+"":t,n),n),K=(e,t,n)=>new Promise(((a,r)=>{var s=e=>{try{i(n.next(e))}catch(e){r(e)}},o=e=>{try{i(n.throw(e))}catch(e){r(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,o);i((n=n.apply(e,t)).next())}));class M extends S.NL{constructor(e){super(e),R(this,"api"),R(this,"sendTx",((e,t,n)=>K(this,null,(function*(){const{wallets:a}=A.Z.getState().wallets,s=a[t];try{switch(s.walletInfo.type){case k.c.Keystore:const t=s.walletInfo.data;if(!n)throw(0,w.t)("app:controller_errors.no_credentionals_passed");const a=""!==e.address?(0,c.m8)(`BNB.${e.address}`):i.ff;if(!a)throw(0,w.t)("app:controller_errors.asset_not_supported");return T.Z.info({binanceSendTx:U(N({},e),{asset:a})}),yield this.normalBinanceTx(e.fromAddress,e.toAddress,Number(e.amount),a,e.memo,t.keystore,n.walletPassword,t.walletIndex);case k.c.PkKeystore:{if(!n)throw(0,w.t)("app:controller_errors.no_credentionals_passed");const t=s.walletInfo.data,a=yield(0,B.Jy)(t.keystore,n.walletPassword),o=B.Si.fromString(a).nspk.value.pk,l=new r.TR(this.getClientUrl());yield l.initChain(),l.chooseNetwork(v.g5.Mainnet),yield l.setPrivateKey(o),T.Z.debug({method:"sendTx::bncClient loaded"});const d=r.eL.generatePubKey(Buffer.from(o,"hex")).encode("hex",!0),h="bnb",u=r.eL.getAddressFromPublicKey(d,h);if(u!==e.fromAddress)return Promise.reject(`from address not matching wallet ${u} != ${e.fromAddress}`);const p=""!==e.address?(0,c.m8)(`BNB.${e.address}`):i.ff;if(!p)throw(0,w.t)("app:controller_errors.asset_not_supported");return(yield l.transfer(u,e.toAddress,(0,c.pw)(Number(e.amount)).amount().toString(),p.symbol,e.memo)).result.map((e=>{var t;return null!=(t=null==e?void 0:e.hash)?t:""}))[0]}default:throw(0,w.t)("app:controller_errors.not_supported")}}catch(e){throw e}}))));const t=(0,f.setupCache)({maxAge:6e4});this.api=p().create({adapter:t.adapter})}getOwnedTokens(e){return Promise.resolve([])}getFees(){throw"Method not implemented."}reloadJsonRpcProvidersUrls(){T.Z.warn("BinanceController: the reloadJsonRpcProvidersUrls is not implemented")}validateAddress(e){return o.validate(e,"bnb")}static validateAddress(e){return o.validate(e,"bnb")}getAddress(e){if(!e.seed&&!e.pk||e.pk&&e.seed)throw"getAddress: Wrong arguments";if(e.pk)return{address:r.eL.getAddressFromPrivateKey(e.pk,"bnb")};if(e.seed){return{address:new i.KU({network:l.Network.Mainnet,phrase:e.seed.seed.toString()}).getAddress(e.seed.walletIndex)}}throw"getAddress: wrong arguments"}getPrivateKey(e){if(!e.seed)throw"getPrivateKey: Wrong arguments";if(e.seed)return r.eL.getPrivateKeyFromMnemonic(e.seed.toString(),!0,e.walletIndex);throw"getPrivateKey: wrong arguments"}getBalanceViaBinance(e){return K(this,null,(function*(){const{balance:t}=yield(0,m.i9)(),{request:n,response:a}=t.binanceExtensionMainnet,{url:r,isUrlMulti:s}=n,o=new b.JSONPatch(a),i=(0,b.urlTransformator)(r,s)({addresses:[e]});try{const e=yield this.api.get(i[0]);return yield o.apply(e.data)}catch(e){return"0"}}))}getChainBalanceStateUpdate(e){return new Promise(((t,n)=>{try{const{wallets:a}=A.Z.getState().wallets,r=this.getId(),{address:s}=a[e].chainData[r]||{};return s?this.getBalanceViaBinance(s).then((n=>t({walletId:e,chainId:r,chainBalance:String(n)}))).catch(n):t({walletId:e,chainId:r,chainBalance:"0"})}catch(e){T.Z.error("Binance update balance error:",e),n(e)}}))}getTokenBalance(){return K(this,null,(function*(){return Promise.reject()}))}getTokenBalancesStateUpdate(e){return new Promise(((t,n)=>{try{const{wallets:a}=A.Z.getState().wallets,r=this.getId(),{address:s}=a[e].chainData[r]||{};if(!s)return t({walletId:e,chainId:r,tokenBalances:{}});return(0,I.V)().getBalance(s).then((n=>{const a=n.reduce(((e,t)=>{var n;return"BNB"!==t.symbol&&(e[null==(n=t.symbol)?void 0:n.toLowerCase()]=U(N({},t),{balance:String((null==t?void 0:t.free)||0)})),e}),{});return t({walletId:e,chainId:r,tokenBalances:a})})).catch(n)}catch(e){T.Z.error("binance update balance error:",e),n(e)}}))}updateBalance(e=A.Z.getState().wallets.activeWalletId){return new Promise(((t,n)=>{try{Promise.allSettled([this.getChainBalanceStateUpdate(e),this.getTokenBalancesStateUpdate(e)]).then((([e,a])=>{"fulfilled"===e.status?"fulfilled"===a.status?t({chainBalanceStateUpdate:e.value,tokenBalancesStateUpdate:a.value}):(T.Z.error("Binance error updating token balances"),t({chainBalanceStateUpdate:e.value})):(T.Z.error("Binance error updating chain balance"),n("Binance error updating chain balance"))}))}catch(e){T.Z.error(e),s.Tb(e),n(e)}}))}getTransactions(){return K(this,null,(function*(){var e,t,n,a;const{activeWalletId:r,wallets:s}=A.Z.getState().wallets,o=this.getId(),i=null==(n=null==(t=null==(e=null==s?void 0:s[r])?void 0:e.chainData)?void 0:t[o])?void 0:n.address;try{if(i){const e=(0,I.V)(),t=yield e.getTransactions(i),n=((null==(a=null==t?void 0:t.result)?void 0:a.tx)||[]).reduce(((e,{fromAddr:t,toAddr:n,txHash:a,txType:r,value:s,txAsset:l,timeStamp:d})=>{const c=this.getConfig().image,h=t===i;return e.push({date:new Date(d),to:n,from:t,hash:a,action:"TRANSFER"===r?h?"send":"receive":"unknown",amount:s,status:"successful",symbol:l,isSender:h,icon:c,chainId:o}),e}),[]);n.length&&(yield(0,g.h4)({walletId:r,chainId:o,transactions:n}))}}catch(e){T.Z.error(`Error: ${e}`)}}))}normalBinanceTx(e,t,n,a,r,s,o,l){return K(this,null,(function*(){try{const h=yield(0,d.decryptFromKeystore)(s,o),u=new i.KU({phrase:h.toString(),network:(0,C.XL)(v.g5.Mainnet)}),p=u.getAddress(l);return p!==e?Promise.reject(`from address not matching wallet ${p} != ${e}`):u.transfer({walletIndex:l,amount:(0,c.tb)((0,c.pw)(n)),recipient:t,asset:a,memo:r})}catch(e){throw e}}))}getTransactionsDetails({transactions:e,senderAddress:t,assetCode:n}){return e.filter((e=>!n||e.txAsset===n)).map((e=>{const n=h.toString(),a=e.fromAddr===t;return{prefix:a?"-":"+",icon:n,dateInfo:new Date(e.timeStamp),isSender:a,toAddress:e.toAddr,fromAddress:e.fromAddr,balance:e.value,assetSymbol:e.txAsset,hash:e.txHash,txQueryString:"binance/transaction"}}))}getClientUrl(){return"https://bbc-dex.xdefiservices.com"}approveDappTransaction(e,t,n){return K(this,null,(function*(){var a;T.Z.debug({method:"approveDappTransaction",dappMessage:e,walletId:t});const{wallets:s}=A.Z.getState().wallets,o=s[t];if(this.getId()!==e.chainId)throw(0,w.t)("app:controller_errors.dapp_mesage_must_be_active_network");switch(o.walletInfo.type){case k.c.Keystore:{if(!n)throw(0,w.t)("app:controller_errors.no_credentionals_passed");const t=o.walletInfo.data,a=yield(0,d.decryptFromKeystore)(t.keystore,n.walletPassword),s=e.raw;let l,c,h,u;const p=S.j8.getFromAccountIMessage(e);if(!p)throw"dApp did not provide a `from` address";T.Z.debug({method:"approveDappTransaction",fromAddr:p});const f=new i.KU({phrase:a,network:(0,C.XL)(v.g5.Mainnet)}),g=f.getAddress(t.walletIndex);T.Z.debug({method:"approveDappTransaction::bncClient loaded"});const m=r.eL.getPrivateKeyFromMnemonic(a,!0,t.walletIndex),y=r.eL.generatePubKey(Buffer.from(m,"hex")).encode("hex",!0);if(g!==p)return Promise.reject(`from address not matching wallet ${g} != ${p}`);switch(T.Z.debug({method:"pubkey loaded"}),s.method){case v.c$.SignTransaction:if(l=s.params[0],p!==g)throw"XDEFI BinanceDEX 'from' parameter doesn't match the passed seed phrase ";return u=new Uint8Array(Object.values((null==l?void 0:l.signBytes)||{})),h=Buffer.from(u),c=r.eL.generateSignature(h.toString("hex"),m).toString("hex"),{pubKey:y,sig:c};case v.c$.Transfer:T.Z.debug({method:"transfer"}),l=s.params[0],T.Z.debug({method:"transfer params",params:l});const e=yield f.transfer({asset:l.asset||i.ff,recipient:l.recipient,amount:(0,v.MS)(l.amount),walletIndex:t.walletIndex,memo:l.memo});return T.Z.debug({res:e}),e;default:throw`XDEFI BinanceDEX Method '${s.method}' not supported`}}case k.c.PkKeystore:{if(!n)throw(0,w.t)("app:controller_errors.no_credentionals_passed");const t=o.walletInfo.data,s=yield(0,B.Jy)(t.keystore,n.walletPassword),l=e.raw;let d;const h=S.j8.getFromAccountIMessage(e);if(!h)throw"dApp did not provide a `from` address";T.Z.debug({method:"approveDappTransaction",fromAddr:h});const u=B.Si.fromString(s).nspk.value.pk,p=new r.TR(this.getClientUrl());yield p.initChain(),p.chooseNetwork(v.g5.Mainnet),yield p.setPrivateKey(u),T.Z.debug({method:"approveDappTransaction::bncClient loaded"});const f=r.eL.generatePubKey(Buffer.from(u,"hex")).encode("hex",!0),g="bnb",m=r.eL.getAddressFromPublicKey(f,g);if(m!==h)return Promise.reject(`from address not matching wallet ${m} != ${h}`);if(T.Z.debug({method:"pubkey loaded"}),l.method===v.c$.Transfer){T.Z.debug({method:"transfer"}),d=l.params[0],T.Z.debug({method:"transfer params",params:d});return(yield p.transfer(m,d.recipient,(0,c.Bo)((0,v.MS)(d.amount)).amount().toString(),(null==(a=d.asset)?void 0:a.symbol)||i.ff.symbol,d.memo)).result.map((e=>{var t;return null!=(t=null==e?void 0:e.hash)?t:""}))[0]}throw`XDEFI BinanceDEX Method '${l.method}' not supported`}default:throw`approveDappTransaction not working for walletType ${o.walletInfo.type}`}}))}validateTx(e){const t={};return""===e?t.toAddress="Address is required":this.validateAddress(e)||(t.toAddress="Address is not valid."),t}isSignMessage(){return!1}getSendFee(){return K(this,null,(function*(){try{const e=yield this.api.get("https://bbc-dex.xdefiservices.com/api/v1/fees"),t=e.data.find((e=>(0,y.di)(e)&&"send"===(null==e?void 0:e.fixed_fee_params.msg_type)))||void 0;return((null==t?void 0:t.fixed_fee_params.fee)||0)/Z(10,8)}catch(e){return 0}}))}}const $=M;a()}catch(e){a(e)}}))},469607:(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{Z:()=>ae});var r=n(177616),s=n(321862),o=n(264487),i=n(985493),l=n(942274),d=n(276749),c=n(148771),h=n(409669),u=n.n(h),p=n(135974),f=n(53079),g=n(244431),m=n(617656),y=n(608193),v=n.n(y),b=n(603030),w=n.n(b),I=n(847001),C=n(831352),A=n(496486),k=n(59854),T=n.n(k),B=n(255357),S=n(680528),D=n(739989),x=n(626423),P=n(42763),E=n(693246),F=n(46461),_=n(628790),O=n(803418),Z=n(661195),j=n(16547),N=n(712685),U=n(882591),R=n(729357),K=n(728147),M=n(630292),$=n(99127),W=n(666293),Buffer=n(348764).Buffer,L=e([P,M]);[P,M]=L.then?(await L)():L;var J=Object.defineProperty,X=Object.defineProperties,q=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,G=(e,t,n)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Y=(e,t,n)=>(G(e,"symbol"!=typeof t?t+"":t,n),n),Q=(e,t,n)=>new Promise(((a,r)=>{var s=e=>{try{i(n.next(e))}catch(e){r(e)}},o=e=>{try{i(n.throw(e))}catch(e){r(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,o);i((n=n.apply(e,t)).next())}));const ee=e=>e===C.g5.Testnet?v().bitcoincash.test.toBitcoinJS():v().bitcoincash.main.toBitcoinJS(),te={[l.Network.Mainnet]:"m/44'/145'/0'/0/",[l.Network.Testnet]:"m/44'/1'/0'/0/",[l.Network.Stagenet]:"m/44'/145'/0'/0/"};class ne extends M.Pu{constructor(e){super(e),Y(this,"api"),Y(this,"removeDetrimentalUXTOFromAmount",(e=>Q(this,null,(function*(){const{activeWalletId:t,wallets:n}=P.Z.getState().wallets,a=n[t].chainData[this.getId()].address,r=yield this.scanUTXOs(a),s=Number(e.toFixed(S.KV.A0));return(0,$.Fs)(r,s)})))),Y(this,"buildTxAux",(e=>Q(this,[e],(function*({amount:e,recipient:t,memo:n,feeRate:a,sender:r}){const o=(0,x.XL)(C.g5.Mainnet),i=f.toCashAddress(t);if(!this.validateAddress(i))throw new Error("Invalid address");const l=yield this.scanUTXOs(r);if(0===l.length)throw new Error("No utxos to send");const d=Number(a.toFixed(0)),c=n?this.compileMemo(n):null,h=[];h.push({address:t,value:e.amount().toNumber()});const{inputs:u,outputs:p}=w()(l,h,d);if(!u||!p)throw new Error("Balance insufficient for transaction");const g=new s.TransactionBuilder(ee(o));return u.forEach((e=>g.addInput(s.Transaction.fromBuffer(Buffer.from(e.txHex||"","hex")),e.index))),p.forEach((e=>{let t;e.address?e.address&&(t=s.address.toOutputScript(f.toLegacyAddress(e.address),ee(o))):t=s.address.toOutputScript(f.toLegacyAddress(r),ee(o)),g.addOutput(t,e.value)})),c&&g.addOutput(c,0),{builder:g,utxos:l,inputs:u}})))),Y(this,"broadcastTx",(e=>Q(this,null,(function*(){try{const t=yield(0,N.I)(C.yp.BitcoinCash,e);return D.Z.info("BCH",{hash:t}),t}catch(e){throw(0,F.t)("app:controller_errors.failed_to_broadcast_transaction",{error:e})}})))),Y(this,"sendTx",((e,t,n)=>Q(this,null,(function*(){const{wallets:a}=P.Z.getState().wallets,r=a[t],o=e.memo;if(o&&o.length>80)throw(0,F.t)("app:controller_errors.memo_length_validation");const i=(0,x.XL)(C.g5.Mainnet);switch(r.walletInfo.type){case E.c.PkKeystore:{if(!n)throw(0,F.t)("app:controller_errors.no_credentionals_passed");const t=r.walletInfo.data,a=yield(0,_.Jy)(t.keystore,n.walletPassword),o=_.Si.fromString(a),{builder:i,inputs:l}=yield this.buildTxAux({amount:(0,c.XZ)(T()(new g.BigNumber(e.amount).multipliedBy(1e8).toNumber())),sender:e.fromAddress,recipient:e.toAddress,memo:e.memo,feeRate:e.feeRate||(yield this.getFeeRates()).average}),d=s.ECPair.fromWIF(o.nspk.value.pk,this.bchNetwork(C.g5.Mainnet));l.forEach(((e,t)=>{i.sign(t,d,void 0,65,e.witnessUtxo.value)}));return yield this.broadcastTx(i.build().toHex())}case E.c.Keystore:const t=r.walletInfo.data;if(!n)throw(0,F.t)("app:controller_errors.no_credentionals_passed");const a=yield(0,d.decryptFromKeystore)(t.keystore,n.walletPassword);return this.transfer({recipient:e.toAddress,amount:(0,c.XZ)(T()(new g.BigNumber(e.amount).multipliedBy(1e8).toNumber())),feeRate:e.feeRate,walletIndex:t.walletIndex,memo:o,phrase:a.toString(),sender:e.fromAddress});case E.c.Trezor:{const t=r.walletInfo.data;let n=e.feeRate;n||(n=(yield this.getFeeRates()).average);const a=yield this.buildTx({amount:(0,c.XZ)(new g.BigNumber(e.amount).multipliedBy(1e8).toFixed().valueOf()),recipient:"bitcoincash"!==e.toAddress.substring(0,11)?`bitcoincash:${e.toAddress}`:e.toAddress,memo:e.memo,feeRate:n,sender:e.fromAddress,network:i}),s=yield(0,O.D)(r.walletInfo.type).signUTXOTransaction(this,t.derivationPath,t.walletIndex,a);return this.broadcastTx(s)}default:throw"SendTx not supported for bitcoincash"}}))));const t=(0,p.setupCache)({maxAge:6e4});this.api=u().create({adapter:t.adapter})}getOwnedTokens(e){return Promise.resolve([])}getFees(){throw"Method not implemented."}reloadJsonRpcProvidersUrls(){(0,A.noop)()}getAddress(e){if(!e.seed&&!e.pk||e.pk&&e.seed)throw"getAddress: Wrong arguments";if(e.pk){let t;try{const n=s.ECPair.fromWIF(e.pk,v().bitcoincash.main.toBitcoinJS());t=(0,i.I1)(f.toCashAddress(n.getAddress()))}catch(e){throw`mainnet ${e}`}if(!t)throw(0,F.t)("app:controller_errors.could_not_generate_address_from_pk");return{address:t}}if(e.seed){return{address:new i.KU({phrase:e.seed.seed.toString(),network:(0,x.XL)(C.g5.Mainnet),haskoinUrl:this.getHaskoinUrlConfig()}).getAddress(e.seed.walletIndex)}}throw"getAddress: Wrong arguments"}getPrivateKey(e){if(!e.seed)throw"getPrivateKey: Wrong arguments";if(e.seed)return this.getBitcoinCashKeys(e.seed.toString(),e.walletIndex);throw"getPrivateKey: wrong arguments"}getBalance(e){return Q(this,null,(function*(){const t=C.yp.BitcoinCash,n=U.u[t];if(!n)throw new Error(`No gqlChainId for nativeChainId ${t}`);return(yield(0,R.l)(n,e)).data[n].balances[0].amount.value}))}getChainBalanceStateUpdate(e){return new Promise(((t,n)=>{try{const{wallets:a}=P.Z.getState().wallets,r=this.getId(),{address:s}=a[e].chainData[r];try{this.getBalance(s).then((n=>t({walletId:e,chainId:r,chainBalance:String(n)}))).catch(n)}catch(e){D.Z.error({msg:"BitcoinCashController::getChainBalanceStateUpdate",error:e}),o.Tb(e),n(e)}}catch(e){D.Z.log(e),n(e)}}))}getFeeRates(){return Q(this,null,(function*(){var e;const{data:t}=yield(0,Z.Z)(C.yp.BitcoinCash,"network-only"),n=null==(e=null==t?void 0:t.bitcoincash)?void 0:e.fee;return{[l.FeeOption.Fastest]:n.high/1e3,[l.FeeOption.Fast]:n.medium/1e3,[l.FeeOption.Average]:n.low/1e3}}))}getFeesWithRates(e,t){return Q(this,null,(function*(){try{const n=t?yield this.scanUTXOs(t):[],a=yield this.getFeeRates(),r=e?this.compileMemo(e):null;return{fees:{type:l.FeeType.PerByte,average:(0,c.XZ)((0,W.Gl)(n,a.average,r)),fast:(0,c.XZ)((0,W.Gl)(n,a.fast,r)),fastest:(0,c.XZ)((0,W.Gl)(n,a.fastest,r))},rates:a}}catch(e){return Promise.reject(e)}}))}getNodeUrl(e){if(e===C.g5.Mainnet)return I.Z.get("BCH_MAINNET_RPC");if(e===C.g5.Testnet)return I.Z.get("BCH_TESTNET_RPC");throw"getNodeUrl error"}validateAddress(e){return ne.validateAddress(e)}static validateAddress(e){let t=!1;try{t=(0,i.YN)(e,l.Network.Mainnet)}catch(e){return!1}return t}getBCHKeys(e,t){const n=(0,d.getSeed)(e);return s.HDNode.fromSeedBuffer(n,this.bchNetwork(C.g5.Mainnet)).derivePath(t).keyPair}transfer(e){return Q(this,null,(function*(){var t;const n=this.getFullDerivationPath(null!=(t=e.walletIndex)?t:0),a=e.feeRate||(yield this.getFeeRates())[l.FeeOption.Fast],{builder:r,inputs:s}=yield this.buildTxAux((o=((e,t)=>{for(var n in t||(t={}))z.call(t,n)&&G(e,n,t[n]);if(H)for(var n of H(t))V.call(t,n)&&G(e,n,t[n]);return e})({},e),i={feeRate:a,sender:f.toCashAddress(e.sender)},X(o,q(i))));var o,i;const d=this.getBCHKeys(e.phrase,n);s.forEach(((e,t)=>{r.sign(t,d,void 0,65,e.witnessUtxo.value)}));const c=r.build().toHex();return this.broadcastTx(c)}))}approveDappTransaction(e,t,n,a){return Q(this,null,(function*(){var r,l,c;const{wallets:h}=P.Z.getState().wallets,u=h[t];if(this.getId()!==e.chainId)throw(0,F.t)("app:controller_errors.dapp_mesage_must_be_active_network");let p;try{p=e.raw}catch(e){throw D.Z.error(e),(0,o.Tb)(e),"XDEFI Malformed BitcoinCash Payload"}const f=null==(r=p.params[0])?void 0:r.memo;if(f&&f.length>80)throw(0,F.t)("app:controller_errors.memo_length_validation");switch(u.walletInfo.type){case E.c.PkKeystore:{if(!n)throw(0,F.t)("app:controller_errors.no_credentionals_passed");const t=u.walletInfo.data,r=yield(0,_.Jy)(t.keystore,n.walletPassword);let o;const i=M.j8.getFromAccountIMessage(e);if(!i)throw"From address i";if(p.method===C.hq.Transfer)try{o=p.params[0],a&&(o=Object.assign(o,a));const e=_.Si.fromString(r),{builder:t,inputs:n}=yield this.buildTxAux({amount:(0,C.MS)(o.amount),sender:i,recipient:o.recipient,memo:o.memo,feeRate:Number((null==o?void 0:o.feeRate)||(yield this.getFeeRates()).average)}),l=s.ECPair.fromWIF(e.nspk.value.pk,this.bchNetwork(C.g5.Mainnet));return n.forEach(((e,n)=>{t.sign(n,l,void 0,65,e.witnessUtxo.value)})),this.broadcastTx(t.build().toHex())}catch(e){throw e}throw`BitcoinController: Method ${p.method} not implemented`}case E.c.Keystore:{const t=u.walletInfo.data;if(!n)throw(0,F.t)("app:controller_errors.no_credentionals_passed");const a=yield(0,d.decryptFromKeystore)(t.keystore,n.walletPassword);let r,s,c;const h=(0,i.I1)(M.j8.getFromAccountIMessage(e)||""),f=new i.KU({network:(0,x.XL)(C.g5.Mainnet),haskoinUrl:this.getHaskoinUrlConfig(),nodeUrl:{mainnet:I.Z.get("BCH_MAINNET_RPC"),testnet:I.Z.get("BCH_TESTNET_RPC"),stagenet:""},phrase:a}).getAddress(t.walletIndex);if(f!==h)throw r=`from address not matching wallet ${f} !=  + ${h}`,r;switch(p.method){case C.hq.Transfer:try{c=p.params[0]}catch(e){throw D.Z.error(e),(0,o.Tb)(e),"XDEFI Malformed BitcoinCash Transfer Payload"}try{return s=yield this.transfer({recipient:(null==c?void 0:c.recipient)||"",amount:(0,C.MS)(null==c?void 0:c.amount),feeRate:Number((null==(l=null==c?void 0:c.feeRate)?void 0:l.toString())||"0"),walletIndex:t.walletIndex,memo:null==c?void 0:c.memo,phrase:a,sender:f}),s}catch(e){throw D.Z.error(e),(0,F.t)("app:controller_errors.transfer_failed_error",{error:e})}case C.VX.RequestAccounts:throw r="XDEFI Error: Request Accounts requests should not be in popup",r;default:throw"XDEFI BitcoinCash Method not supported"}}case E.c.Trezor:switch(p.method){case C.hq.Transfer:{let e;try{e=p.params[0]}catch(e){throw(0,o.Tb)(e),"XDEFI Malformed BitcoinCache Transfer Payload"}a&&(e=Object.assign(e,a));try{const t=u.walletInfo.data,n=(0,x.XL)(C.g5.Mainnet),a=null==(c=null==e?void 0:e.feeRate)?void 0:c.toString(),r=yield this.buildTx({amount:(0,C.MS)(null==e?void 0:e.amount),sender:t.address,recipient:"bitcoincash"!==(null==e?void 0:e.recipient.substring(0,11))?`bitcoincash:${null==e?void 0:e.recipient}`:null==e?void 0:e.recipient,memo:null==e?void 0:e.memo,feeRate:Number(a),network:n}),s=yield(0,O.D)(u.walletInfo.type).signUTXOTransaction(this,t.derivationPath,t.walletIndex,r);return yield this.broadcastTx(s)}catch(e){throw(0,F.t)("app:controller_errors.transfer_failed_error",{error:e})}}case C.VX.RequestAccounts:throw"XDEFI Error: Request Accounts requests should not be in popup";default:throw"XDEFI BitcoinCache Method not supported"}default:throw`approveDappTransaction not working (bch with wallet type ${u.walletInfo.type}`}}))}validateTx(e){const t={};try{""===e?t.toAddress=(0,F.t)("app:controller_errors.addres_is_required"):this.validateAddress(e)||(t.toAddress=(0,F.t)("app:controller_errors.address_is_not_valid"))}catch(e){t.toAddress=(0,F.t)("app:controller_errors.address_is_not_valid")}return t}bchNetwork(e){if(e===C.g5.Testnet)return v().bitcoincash.test.toBitcoinJS();if(e===C.g5.Mainnet)return v().bitcoincash.main.toBitcoinJS();throw Error("bchNetwork not found")}haskoinUrl(){return"https://bch-haskoin.xdefiservices.com"}getHaskoinUrlConfig(){return{[l.Network.Testnet]:this.haskoinUrl(),[l.Network.Mainnet]:this.haskoinUrl(),stagenet:this.haskoinUrl()}}getTransactions(){return Q(this,null,(function*(){var e,t,n;const{activeWalletId:a,wallets:s}=P.Z.getState().wallets,o=null==(n=null==(t=null==(e=null==s?void 0:s[a])?void 0:e.chainData)?void 0:t[this.getId()])?void 0:n.address;try{if(o){const e=(yield(0,K.k)(C.yp.BitcoinCash,o)).map((e=>{const t=Number((0,r.formatUnits)(e.balanceChange.value,8)),n=t<0;return{date:new Date(e.timestamp),from:o,to:o,action:n?"send":"receive",hash:e.hash,amount:Math.abs(t).toString(),status:"successful",symbol:this.getConfig().tokenSymbol,isSender:n,icon:this.getConfig().image,chainId:this.getId()}}));e.length&&(yield(0,B.h4)({walletId:a,chainId:this.getId(),transactions:e,blockNumber:0}))}}catch(e){D.Z.error(`bitcoinCash transaction error: ${e}`)}}))}getTransactionFee(e){return Q(this,arguments,(function*({speed:e,txData:t}){try{if(!t.fromAddress)throw(0,F.t)("app:controller_errors.empty_from_address");const n=yield this.scanUTXOs(t.fromAddress);if(0===n.length)throw(0,F.t)("app:controller_errors.no_utxos_to_send");let a=t.feeRate;if(!a){a=(yield this.getFeesWithRates(t.memo)).rates[e]}const r=Number(a.toFixed(0)),s=t.memo?this.compileMemo(t.memo):null,o=[];o.push({address:t.toAddress,value:new g.BigNumber(t.amount).multipliedBy(1e8).toNumber()}),s&&o.push({script:s,value:0});const{fee:i}=w()(n,o,r);return new g.BigNumber(i).dividedBy(1e8)}catch(e){return new g.BigNumber(0)}}))}getFullDerivationPath(e){return te?`${te[l.Network.Mainnet]}${e}`:""}getBitcoinCashKeys(e,t=0){const n=(0,d.getSeed)(e);return s.HDNode.fromSeedBuffer(n,ee(C.g5.Mainnet)).derivePath(this.getFullDerivationPath(t)).keyPair.toWIF()}compileMemo(e){const t=Buffer.from(e,"utf8");return m._v.compile([s.opcodes.OP_RETURN,t])}isSignMessage(){return!1}scanUTXOs(e){return Q(this,null,(function*(){"bitcoincash"===e.substring(0,11)&&(e=e.substring(12));return(yield(0,j.d)(C.yp.BitcoinCash,e)).map((t=>({witnessUtxo:m.YW.fromHex(t.oTxHex).outs[t.oIndex],hash:t.oTxHash,value:Number(t.value.value),index:t.oIndex,txHex:t.oTxHex,address:e})))}))}buildTx(e){return Q(this,arguments,(function*({amount:e,recipient:t,memo:n,feeRate:a,sender:r,network:o}){const l=f.toCashAddress(t);if(!(0,i.YN)(l,o))throw(0,F.t)("app:controller_errors.invalid_address");const d=yield this.scanUTXOs(r);if(0===d.length)throw(0,F.t)("app:controller_errors.no_utxos_to_send");const c=Number(a.toFixed(0)),h=n?this.compileMemo(n):null,u=[];u.push({address:t,value:e.amount().toNumber()});const{inputs:p,outputs:g}=w()(d,u,c);if(!p||!g)throw(0,F.t)("app:controller_errors.insufficient_balance");const m=new s.TransactionBuilder(ee(o));return p.forEach((e=>m.addInput(s.Transaction.fromBuffer(Buffer.from(e.txHex||"","hex")),e.index))),g.forEach((e=>{e.address||(e.address=r)})),h&&g.push({script:h,value:0}),{utxos:d,inputs:p,outputs:g}}))}}const ae=ne;a()}catch(e){a(e)}}))},63081:(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{ZP:()=>pe});var r=n(33359),s=n(379562),o=n(778121),i=n(474087),l=n(724633),d=n(124658),c=n(174926),h=n(302387),u=n(489396),p=n(875039),f=n(942274),g=n(148771),m=n(409669),y=n.n(m),v=n(92882),b=n(244431),w=n.n(b),I=n(437786),C=n(202153),A=n(680528),k=n(72574),T=n(256371),B=n(496486),S=n(39534),D=n(739989),x=n(42763),P=n(556138),E=n(604690),F=n(46461),_=n(605930),O=n(264487),Z=n(497050),j=n(626423),N=n(847001),U=n(669240),R=n(522933),K=n(255357),M=n(628790),$=n(803418),W=n(809739),L=n(630292),J=n(691438),Buffer=n(348764).Buffer,X=e([x,E,L]);[x,E,L]=X.then?(await X)():X;var q=Object.defineProperty,H=Object.defineProperties,z=Object.getOwnPropertyDescriptors,V=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,Q=Math.pow,ee=(e,t,n)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,te=(e,t)=>{for(var n in t||(t={}))G.call(t,n)&&ee(e,n,t[n]);if(V)for(var n of V(t))Y.call(t,n)&&ee(e,n,t[n]);return e},ne=(e,t,n)=>(ee(e,"symbol"!=typeof t?t+"":t,n),n),ae=(e,t,n)=>new Promise(((a,r)=>{var s=e=>{try{i(n.next(e))}catch(e){r(e)}},o=e=>{try{i(n.throw(e))}catch(e){r(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,o);i((n=n.apply(e,t)).next())}));const re=(e,t)=>ae(void 0,null,(function*(){const n=new i.Registry([...d.defaultRegistryTypes,...S.QP,...U.wasmTypes]),a=new d.AminoTypes(te(te(te({},S.nT),(0,d.createDefaultAminoConverters)()),(0,c.tW)()));return d.SigningStargateClient.connectWithSigner(e,t,{registry:n,aminoTypes:a})}));function se(e,t,n){const a=C.Z1(t),r=(0,I.GA)(E).fromSeed(a).derivePath(`44'/${e}'/0'/0/${n}`);return Uint8Array.from(r.privateKey)}const oe="200000",ie=A.KV.A6,le=(0,g.XZ)(5e3,ie),de="https://rpc-proxy.xdefi.services/thornode/thorchain",ce=1.7,he=class extends L.NL{constructor(e){super(te({},e)),ne(this,"sdk"),ne(this,"isToken",(e=>ae(this,null,(function*(){var t,n;const a=x.Z.getState().wallets.activeWalletId,r=null==(t=x.Z.getState().wallets.wallets[a].chainData[this.getId()])?void 0:t.address;this.setPrefix();return!!((null==(n=(yield u.Z.rest.bank.allBalances(this.sdk,u.Z.AccAddress.fromString(r))).data)?void 0:n.balances)||[]).find((t=>{var n;return(null==(n=null==t?void 0:t.denom)?void 0:n.toLowerCase())===(null==e?void 0:e.toLowerCase())}))})))),ne(this,"prioritizedDomains",["xdefi.services","notional.ventures"]),ne(this,"generateIBCChainAddress",(e=>{const t=this.config.chainAddressPrefix;u.Z.config.setBech32Prefix({accAddr:t,accPub:t+"pub",valAddr:t+"valoper",valPub:t+"valoperpub",consAddr:t+"valcons",consPub:t+"valconspub"});const n=new u.Z.proto.cosmos.crypto.secp256k1.PubKey({key:Uint8Array.from(Buffer.from(e,"hex"))});return u.Z.AccAddress.fromPublicKey(n).toAccAddress().toString()})),ne(this,"getDefaultFee",((e,t=[])=>{var n;const a=t.find((t=>t.coinMinimalDenom===e));return null==(n=null==a?void 0:a.gasPriceStep)?void 0:n.average})),this.sdk=new u.Z.CosmosSDK(this.config.network.lcdURL,this.config.network.chainId)}getOwnedTokens(e){return Promise.resolve([])}reloadJsonRpcProvidersUrls(){(0,B.noop)()}setPrefix(){u.Z.config.setBech32Prefix({accAddr:this.config.chainAddressPrefix,accPub:this.config.chainAddressPrefix+"pub",valAddr:this.config.chainAddressPrefix+"valoper",valPub:this.config.chainAddressPrefix+"valoperpub",consAddr:this.config.chainAddressPrefix+"valcons",consPub:this.config.chainAddressPrefix+"valconspub"})}getAddress(e){let t,n,a;if(this.setPrefix(),e.pk)t=this.generatePrivKeyFromPK(e.pk);else{if(!e.seed)throw new Error("Case not implemented.");t=this.generatePrivKeyFromSeed(e.seed)}if(n=t.pubKey().bytes(),a=u.Z.AccAddress.fromPublicKey(t.pubKey()).toString(),60===this.config.slip44coinType){const t=this.generateEthereumInfo(e);n=t.pubKey,a=t.address}return{address:a,pubKey:n}}generatePrivKeyFromPK(e){return new u.Z.proto.cosmos.crypto.secp256k1.PrivKey({key:Uint8Array.from(Buffer.from(e,"hex"))})}generatePrivKeyFromSeed(e){return new u.Z.proto.cosmos.crypto.secp256k1.PrivKey({key:se(this.config.slip44coinType,e.seed.toString(),e.walletIndex)})}generateEthereumInfo(e){let t;if(e.pk?t=new Z.Wallet(e.pk):e.seed&&(t=Z.Wallet.fromMnemonic(e.seed.seed.toString(),`m/44'/60'/0'/0/${e.seed.walletIndex}`)),!t)throw new Error("ethWallet is undefined");const n=t.publicKey,a=t.address;return{pubKey:Uint8Array.from(Buffer.from(n.slice(2))),address:(0,l.cv)(this.config.chainAddressPrefix,Uint8Array.from(Buffer.from(a.slice(2),"hex")))}}getPrivateKey(e){if(this.setPrefix(),60===this.config.slip44coinType){return Z.Wallet.fromMnemonic(e.seed.toString(),`m/44'/60'/0'/0/${e.walletIndex}`).privateKey.slice(2)}{const t=new u.Z.proto.cosmos.crypto.secp256k1.PrivKey({key:se(this.config.slip44coinType,e.seed.toString(),e.walletIndex)});return Buffer.from(t.bytes()).toString("hex")}}validateAddress(e,t={inclTokenAddress:!1}){return he.validateAddress(e,this.config.chainAddressPrefix,{inclTokenAddress:t.inclTokenAddress})}static validateAddress(e,t,{inclTokenAddress:n=!1}){if(!e)return!1;try{const a="qpzry9x8gf2tvdw0s3jn54khce6mua7l";if(n){if(e.startsWith("ibc/")){const t=e.slice(4);return/^[0-9a-fA-F]+$/.test(t)}if(e.startsWith("u")){return/^u[a-z]+$/.test(e)}}const r=new RegExp(`^(${t})1([`+a+"]+)$");if(null!==r.exec(e)){const{words:n,prefix:a}=(0,v.decode)(e);return a===t&&32===n.length}return!1}catch(e){return!1}}getAccount(e){return ae(this,null,(function*(){this.setPrefix();const t=yield u.Z.rest.auth.account(this.sdk,e).then((e=>u.Z.codec.protoJSONToInstance(u.Z.codec.castProtoJSONOfProtoAny(e.data.account)))).catch((e=>{D.Z.error(e)}));if(!(t instanceof u.Z.proto.cosmos.auth.v1beta1.BaseAccount))throw`getAccount(: could not get account: ${t}`;return t}))}sendTx(e,t,n,a){return ae(this,null,(function*(){var a,r;D.Z.debug({msg:"cosmoshub::sendTx_txData",_walletId:t,_txData:e});try{if(!e.address&&e.isToken)throw"cosmoshub::sendTx: Address is not defined";e.isToken||e.address||(e.address=this.config.nativeAssetString),this.setPrefix();const s=x.Z.getState().wallets.wallets[t],o=S.iN.bank.v1beta1.MsgSend.fromPartial({fromAddress:e.fromAddress,toAddress:e.toAddress,amount:[{denom:e.address,amount:(0,g.XZ)(new(w())(e.amount).multipliedBy(null!=(a=Q(10,e.decimals))?a:this.config.decimals),null!=(r=e.decimals)?r:this.config.decimals).amount().toString()}]}),i=[S.iN.bank.v1beta1.MessageComposer.withTypeUrl.send(o)],l=yield this.createOfflineSigner(s,n),c=yield d.SigningStargateClient.connectWithSigner(this.config.network.jsonRpcProviderUrl.rpc,l,{broadcastTimeoutMs:6e5,broadcastPollIntervalMs:5e3}),{amount:h,denom:u}=o.amount[0],p=yield this.estimateSendTxGasLimit(u,h),f=p*(yield this.getGasPrice()),m={amount:[{denom:this.config.nativeAssetString,amount:Math.ceil(f).toString()}],gas:p.toString()},y=yield c.signAndBroadcast(e.fromAddress,i,m,e.memo);return(0,d.assertIsDeliverTxSuccess)(y),y.transactionHash}catch(e){return D.Z.error({e}),Promise.reject(e)}}))}estimateSendTxGasLimit(e,t){return ae(this,null,(function*(){try{this.setPrefix();const n=yield this.createDummyOfflineSigner(),a=S.iN.bank.v1beta1.MsgSend,r=(yield n.getAccounts())[0].address,s=a.fromPartial({fromAddress:r,toAddress:r,amount:[{denom:e,amount:t}]}),o=[S.iN.bank.v1beta1.MessageComposer.withTypeUrl.send(s)],i=yield d.SigningStargateClient.connectWithSigner(this.config.network.jsonRpcProviderUrl.rpc,n),l=yield i.simulate(r,o,"").catch((()=>Number(oe)));return Math.ceil(l*ce)}catch(e){return D.Z.error({e}),Promise.reject(e)}}))}getSignatureFromWallet(e,t,n,a){return ae(this,null,(function*(){switch(this.setPrefix(),n.walletInfo.type){case P.WalletType.Keystore:{const t=n.walletInfo.data;if(!a)throw(0,F.t)("app:controller_errors.no_credentionals_passed");const r=yield(0,M.WR)(t.keystore,a.walletPassword),s=this.getPrivateKey({seed:r,walletIndex:t.walletIndex});return new u.Z.proto.cosmos.crypto.secp256k1.PrivKey({key:Uint8Array.from(Buffer.from(s,"hex"))}).sign(e)}case P.WalletType.PkKeystore:{const t=n.walletInfo.data;if(!a)throw(0,F.t)("app:controller_errors.no_credentionals_passed");const r=yield(0,M.Jy)(t.keystore,a.walletPassword),s=M.Si.fromString(r).nspk.value.pk;return new u.Z.proto.cosmos.crypto.secp256k1.PrivKey({key:Uint8Array.from(Buffer.from(s,"hex"))}).sign(e)}case P.WalletType.Ledger:{const r=n.chainData[this.config.id].address,s=n.walletInfo.data;if(!a)throw(0,F.t)("app:controller_errors.no_credentionals_passed");if(!t)throw"getSignatureFRomWallet: Second arg undefined signDocAmino";const o=(new TextDecoder).decode(e);D.Z.debug({msg:o});const i=s.derivationPath.replace("X",s.walletIndex.toString()),l=yield(0,$.D)(P.WalletType.Ledger).cosmosSignTransaction(this.config.chainAddressPrefix,r,i,t);return D.Z.debug({sig:l}),l}default:throw"Method not implemented."}}))}approveDappTransaction(e,t,n,a){return ae(this,null,(function*(){var s,o,l,d,c,h,p,f,g,m,y,v,b,w,I,C,A,T,B,S,P,E,_,O,Z,j,N,U;D.Z.debug({_dappMessage:e,_walletId:t}),t||(t=x.Z.getState().wallets.activeWalletId);const R=x.Z.getState().wallets.wallets;switch(e.raw.type){case"request-sign-direct":{const r=e.raw.params,u=r.signer,I=r.signDoc;I.bodyBytes=Uint8Array.from(Object.values(I.bodyBytes)),I.authInfoBytes=Uint8Array.from(Object.values(I.authInfoBytes));const C=R[t].chainData[this.getId()].address;if(C!==u)throw`approveDappTransaction [request-sign-direct] signer is not the active wallet: ${C} != ${u}`;const A=R[t].chainData[this.getId()].pubKey;if(!A)throw"pubKey error";const T=Uint8Array.from(Buffer.from(A,"hex")),B=he.parseRawSignDoc(I),S=(0,i.decodeTxRaw)((0,i.makeSignBytes)(B));D.Z.debug({decoded:S});const x=S.authInfo.signerInfos.map((e=>({pubkey:e.publicKey,sequence:e.sequence.toNumber()})));if(!x.every((e=>e.pubkey)))throw"pubKey error";let P=this.config.nativeAssetString;if((null==(l=null==(o=null==(s=null==S?void 0:S.authInfo.fee)?void 0:s.amount)?void 0:o[0])?void 0:l.denom)&&(null==(h=null==(c=null==(d=null==S?void 0:S.authInfo.fee)?void 0:d.amount)?void 0:c[0])?void 0:h.denom)!==this.config.nativeAssetString){const e=this.getTokenInfo(null==(g=null==(f=null==(p=null==S?void 0:S.authInfo.fee)?void 0:p.amount)?void 0:f[0])?void 0:g.denom);P=null!=(m=null==e?void 0:e.symbol)?m:this.config.nativeAssetString}const E=(0,i.makeAuthInfoBytes)(x,[{denom:P,amount:String(a.feeAmount)}],(null==(v=null==(y=S.authInfo.fee)?void 0:y.gasLimit)?void 0:v.toNumber())||0,null==(b=S.authInfo.fee)?void 0:b.granter,null==(w=S.authInfo.fee)?void 0:w.payer,k.SignMode.SIGN_MODE_DIRECT);I.authInfoBytes=E;const F=yield this.getSignatureFromWallet((0,i.makeSignBytes)(I),void 0,R[t],n);return{signature:{pub_key:{type:"tendermint/PubKeySecp256k1",value:Buffer.from(T.buffer).toString("base64")},signature:Buffer.from(F).toString("base64")},signed:I}}case"request-sign-amino":{const s=e.raw.params,o=s.signer,i=s.signDoc,l=Uint8Array.from(Buffer.from(R[t].chainData[this.getId()].pubKey,"hex")),d=R[t].chainData[this.getId()].address;if(d!==o)throw`approveDappTransaction [request-sign-direct] signer is not the active wallet: ${d} != ${o}`;let c=this.config.nativeAssetString;if((null==(A=null==(C=null==(I=i.fee)?void 0:I.amount)?void 0:C[0])?void 0:A.denom)!==this.config.nativeAssetString){const e=this.getTokenInfo(null==(S=null==(B=null==(T=i.fee)?void 0:T.amount)?void 0:B[0])?void 0:S.denom);c=null!=(P=null==e?void 0:e.symbol)?P:this.config.nativeAssetString}const h=(K=te({},i.fee),M={amount:[{denom:c,amount:String(a.feeAmount)}]},H(K,z(M))),u=(0,r.makeSignDoc)(i.msgs,h,i.chain_id,i.memo,i.account_number,i.sequence);D.Z.debug({signDocAmino:u});const p=(0,r.serializeSignDoc)(u),f=yield this.getSignatureFromWallet(p,u,R[t],n);return{signature:{pub_key:{type:"tendermint/PubKeySecp256k1",value:Buffer.from(l.buffer).toString("base64")},signature:Buffer.from(f).toString("base64")},signed:u}}case"send-tx-to-background":{const t=e.raw.params,n={block:u.Z.rest.tx.BroadcastTxMode.Block,sync:u.Z.rest.tx.BroadcastTxMode.Sync,async:u.Z.rest.tx.BroadcastTxMode.Async},a=yield u.Z.rest.tx.broadcastTx(this.sdk,{tx_bytes:Buffer.from(new Uint8Array(Object.values(t.tx)).buffer).toString("base64"),mode:null!=(E=n[t.mode])?E:u.Z.rest.tx.BroadcastTxMode.Unspecified});if(0!==(null==(O=null==(_=null==a?void 0:a.data)?void 0:_.tx_response)?void 0:O.code))throw"Error broadcasting: "+(null==(j=null==(Z=null==a?void 0:a.data)?void 0:Z.tx_response)?void 0:j.raw_log);if(!(null==(U=null==(N=a.data)?void 0:N.tx_response)?void 0:U.txhash))throw(0,F.t)("app:controller_errors.error_broadcasting_txhash");return a.data.tx_response.txhash}default:throw"Method not implemented."}var K,M}))}static parseRawSignDoc(e){return["bodyBytes","authInfoBytes"].forEach((t=>{e[t]instanceof Uint8Array||(e[t]=Uint8Array.from(Object.values(e[t])))})),(0,i.makeSignDoc)(e.bodyBytes,e.authInfoBytes,e.chainId,e.accountNumber)}createDummyOfflineSigner(){return ae(this,null,(function*(){const e=`m/44'/${this.config.slip44coinType}'/0'/0/0`;return i.DirectSecp256k1HdWallet.fromMnemonic(N.Z.get("EXAMPLE_BIP39"),{prefix:this.config.chainAddressPrefix,hdPaths:[(0,s.stringToPath)(e)]})}))}createOfflineSigner(e,t){return ae(this,null,(function*(){switch(e.walletInfo.type){case P.WalletType.Keystore:{const n=e.walletInfo.data;if(!t)throw"No credentials passed";const a=yield(0,M.WR)(n.keystore,t.walletPassword),r=`m/44'/${this.config.slip44coinType}'/0'/0/${n.walletIndex.toString()}`;return i.DirectSecp256k1HdWallet.fromMnemonic(a.toString(),{prefix:this.config.chainAddressPrefix,hdPaths:[(0,s.stringToPath)(r)]})}case P.WalletType.PkKeystore:{const n=e.walletInfo.data;if(!t)throw"No credentials passed";const a=yield(0,M.Jy)(n.keystore,t.walletPassword),r=M.Si.fromString(a).nspk.value.pk;return i.DirectSecp256k1Wallet.fromKey(Uint8Array.from(Buffer.from(r,"hex")),this.config.chainAddressPrefix)}case P.WalletType.Ledger:{const t=e.walletInfo.data,n=t.derivationPath.replace("X",t.walletIndex.toString());let a;try{a=yield p.Z.create()}catch(e){D.Z.error({e});const t=yield p.Z.list();if(t.length>0)for(const e of t)yield e.close();a=yield p.Z.create()}return new o.IM(a,{testModeAllowed:!0,hdPaths:[(0,s.stringToPath)(`m/${n}`)],prefix:this.config.chainAddressPrefix})}default:throw`No Signer for Wallet: ${e.walletInfo.type}`}}))}swap(e,t,n){return ae(this,null,(function*(){t||(t=x.Z.getState().wallets.activeWalletId);const a=x.Z.getState().wallets.wallets,r=e.signer,s=e.signDoc,o=a[t].chainData[this.config.id].address;if(o!==r)throw`approveDappTransaction [request-sign-direct] signer is not the active wallet: ${o} != ${r}`;const i=yield this.createOfflineSigner(a[t],n),l=S.Ol.applications.transfer.v1.MsgTransfer,d=S.Xx.gamm.v1beta1.MsgSwapExactAmountIn,c=S.iN.bank.v1beta1.MsgSend,u=yield re(this.config.network.jsonRpcProviderUrl.rpc,i),p=s.msgs.map((e=>{var t,n,a;const r=(null==e?void 0:e["@type"])||(null==e?void 0:e.type)||(null==e?void 0:e.typeUrl)||"",s=S.Xx.gamm.v1beta1.AminoConverter[r],o=S.Ol.applications.transfer.v1.AminoConverter[r],i=S.iN.bank.v1beta1.AminoConverter[r],u=null!=(t=null==e?void 0:e.value)?t:e;if(o){const e=u.token.denom.split("/");"ibc"===(null==e?void 0:e[0])&&(u.token.denom=`ibc/${null==(n=null==e?void 0:e[1])?void 0:n.toUpperCase()}`);const t=l.fromPartial(u);return S.Ol.applications.transfer.v1.MessageComposer.withTypeUrl.transfer(t)}if(s){u.tokenIn.amount=u.tokenIn.amount.toString();const e=u.tokenIn.denom.split("/");"ibc"===(null==e?void 0:e[0])&&(u.tokenIn.denom=`ibc/${null==(a=null==e?void 0:e[1])?void 0:a.toUpperCase()}`),u.tokenOutMinAmount=u.tokenOutMinAmount.toString();const t=d.fromPartial(u);return S.Xx.gamm.v1beta1.MessageComposer.withTypeUrl.swapExactAmountIn(t)}if(i){u.amount=u.amount.map((e=>{var t;const n=e.denom.split("/");let a=e.denom;return"ibc"===(null==n?void 0:n[0])&&(a=`ibc/${null==(t=null==n?void 0:n[1])?void 0:t.toUpperCase()}`),{denom:a,amount:e.amount.toString()}}));const e=c.fromPartial(u);return S.iN.bank.v1beta1.MessageComposer.withTypeUrl.send(e)}if("cosmos-sdk/MsgSend"===r){u.fromAddress=u.from_address,u.toAddress=u.to_address,u.amount=u.amount.map((e=>{var t;const n=e.denom.split("/");let a=e.denom;return"ibc"===(null==n?void 0:n[0])&&(a=`ibc/${null==(t=null==n?void 0:n[1])?void 0:t.toUpperCase()}`),{denom:a,amount:e.amount.toString()}}));const e=c.fromPartial(u);return S.iN.bank.v1beta1.MessageComposer.withTypeUrl.send(e)}if("/cosmwasm.wasm.v1.MsgExecuteContract"===r)return u.msg=new Uint8Array(u.msg),{typeUrl:r,value:h.MsgExecuteContract.fromPartial(u)};throw"Swap includes unhandled msg"}));let f=yield u.simulate(r,p,s.memo).catch((()=>Number(oe)));f=Math.ceil(f*ce);const g=f*(yield this.getGasPrice()),m={amount:[{denom:this.config.nativeAssetString,amount:Math.ceil(g).toString()}],gas:f.toString()};D.Z.debug("broadcasting");const y=yield u.signAndBroadcast(r,p,m,s.memo);return D.Z.debug({txResponse:y}),y.transactionHash}))}getBalances(e,t){return ae(this,null,(function*(){var n;e||(e=x.Z.getState().wallets.activeWalletId);const a=null==(n=x.Z.getState().wallets.wallets[e].chainData[this.getId()])?void 0:n.address;this.setPrefix();const r=yield u.Z.rest.bank.allBalances(this.sdk,u.Z.AccAddress.fromString(a),void 0,void 0,BigInt(1e3));D.Z.debug({balances:r.data.balances});const s=new Map;return t&&t.forEach((e=>{s.set(e,"0")})),(0,B.forEach)(r.data.balances,(e=>{(void 0===t&&void 0!==e.denom||e.denom&&s.get(e.denom))&&s.set(e.denom,e.amount||"0")})),Object.fromEntries(s.entries())}))}updateBalance(e){return ae(this,null,(function*(){e||(e=x.Z.getState().wallets.activeWalletId);const t=yield this.getBalances(e,void 0),n=new Map;return Object.keys(t).forEach((e=>{n.set(e,{balance:t[e]})})),Promise.resolve({chainBalanceStateUpdate:{walletId:e,chainId:this.getId(),chainBalance:t[this.config.nativeAssetString]},tokenBalancesStateUpdate:{walletId:e,chainId:this.getId(),tokenBalances:Object.fromEntries(n.entries())}})}))}getTokenBalance(e,t){return ae(this,null,(function*(){var n,a;this.setPrefix();const r=null==(n=(yield u.Z.rest.bank.allBalances(this.sdk,u.Z.AccAddress.fromString(t),void 0,void 0,BigInt(1e3))).data.balances)?void 0:n.find((t=>t.denom===e));return null!=(a=null==r?void 0:r.amount)?a:"0"}))}getTokenBalancesStateUpdate(e){return ae(this,null,(function*(){const t=yield this.getBalances(e,void 0),n=new Map;return Object.keys(t).forEach((e=>{n.set(e,{balance:t[e]})})),{walletId:e,chainId:this.getId(),tokenBalances:Object.fromEntries(n.entries())}}))}getTokenInfo(e){var t,n;const a=x.Z.getState().wallets.activeWalletId,r=null==(n=null==(t=x.Z.getState().wallets.wallets[a].chainData)?void 0:t[this.getId()])?void 0:n.tokens;return(0,B.find)(r,(t=>t.address===e))}getTransactions(){return ae(this,null,(function*(){var e,t,n,a,r,s;const o=x.Z.getState().wallets.activeWalletId,i=null==(t=null==(e=x.Z.getState().wallets.wallets[o].chainData)?void 0:e[this.getId()])?void 0:t.address;if(!i)return void D.Z.debug(`No address for "getTransactions" wallet id ${o}`);const l=[];let d=0;for(const e of["transfer.sender","transfer.recipient"])try{const t=yield u.Z.rest.tx.getTxsEvent(this.sdk,[`${e}='${i}'`],void 0,void 0,BigInt(10));if(t.data.tx_responses){const s=BigInt(null!=(r=null!=(a=t.data.total)?a:null==(n=t.data.pagination)?void 0:n.total)?r:"0");if(s===BigInt(0))continue;let o=s-BigInt(10);o<0&&(o=BigInt(0));const c=yield u.Z.rest.tx.getTxsEvent(this.sdk,[`${e}='${i}'`],void 0,o,BigInt(10));c.data.tx_responses&&c.data.tx_responses.forEach((e=>{l.push(e),e.height&&parseInt(e.height,10)>d&&(d=parseInt(e.height,10))}))}}catch(e){D.Z.error("Failed to fetch cosmos based txs:",e)}if(!l.length)return;const c=null!=(s=l.reverse().reduce(((e,t)=>{var n,a,r;try{if(!t.logs)return e;const s=null==(a=null==(n=t.logs[0])?void 0:n.events)?void 0:a.find((e=>"transfer"===e.type));if(!s)return e;let o,l,d,c,h=A.KV.A0;if((0,B.forEach)(s.attributes,(e=>{var t,n,a,r;switch(e.key){case"sender":o=e.value;break;case"recipient":l=e.value;break;case"amount":const s=null==(t=e.value)?void 0:t.match(/[a-z]/);if(null==s||void 0===s.index){d="0",c=this.config.nativeAssetString;break}if(d=null==(n=e.value)?void 0:n.substring(0,s.index),c=null==(a=e.value)?void 0:a.substring(s.index),c===this.config.nativeAssetString&&(c=this.config.tokenSymbol,h=this.config.decimals),c){const e=this.getTokenInfo(c);e?(c=e.symbol,h=null!=(r=e.decimals)?r:A.KV.A0):c=c.substring(0,10)}d&&(d=(0,T.formatUnits)(d,h))}})),!o||!l)return e;const u=o===i,p={from:o,to:l,action:u?"send":"receive",hash:null!=(r=t.txhash)?r:"",amount:null!=d?d:"0",status:"successful",symbol:null!=c?c:this.config.nativeAssetString,isSender:u,date:t.timestamp?new Date(t.timestamp):new Date,chainId:this.getId()};e.push(p)}catch(e){D.Z.info("Failed to fetch transactions for cosmos based chain",e)}return e}),[]))?s:[];yield(0,K.h4)({walletId:o,chainId:this.getId(),transactions:c,blockNumber:d})}))}getRecentIBCTransactionHash(){return ae(this,null,(function*(){var e,t,n,a,r;const s=x.Z.getState().wallets.activeWalletId,o=null==(t=null==(e=x.Z.getState().wallets.wallets[s].chainData)?void 0:e[this.config.id])?void 0:t.address;if(!o)throw D.Z.debug(`No address for "getTransactions" wallet id ${s}`),`No address for "getTransactions" wallet id ${s}`;const i=[];let l=0;for(const e of["transfer.sender","transfer.recipient"])try{const t=yield u.Z.rest.tx.getTxsEvent(this.sdk,[`${e}='${o}'`],void 0,void 0,BigInt(10));if(t.data.tx_responses){const e=BigInt(null!=(r=null!=(a=t.data.total)?a:null==(n=t.data.pagination)?void 0:n.total)?r:"0");if(e===BigInt(0))continue;let s=e-BigInt(10);s<0&&(s=BigInt(0)),t.data.tx_responses&&t.data.tx_responses.forEach((e=>{i.push(e),e.height&&parseInt(e.height,10)>l&&(l=parseInt(e.height,10))}))}}catch(e){D.Z.error("Failed to fetch cosmos based txs:",e)}if(!i.length)throw`No transactions for this address: ${o}`;const d=i.find((e=>{var t,n;try{if(!e.logs)return!1;if(!(null==(n=null==(t=e.logs[0])?void 0:t.events)?void 0:n.find((e=>"transfer"===e.type))))return!1;if(!e.timestamp)return!1;const a=new Date(e.timestamp),r=new Date;return a>new Date(r.getTime()-6e4)&&a<=r}catch(e){D.Z.info("Failed to fetch transactions for cosmos based chain",e)}return!1}));if(null==d?void 0:d.txhash)return d.txhash;throw"No ibc Tx in the past minute"}))}getChainBalanceStateUpdate(e){return ae(this,null,(function*(){e||(e=x.Z.getState().wallets.activeWalletId);const t=yield this.getBalances(e,void 0);return Promise.resolve({walletId:e,chainId:this.getId(),chainBalance:t[this.config.nativeAssetString]})}))}validateTx(e){const t={};return""===e?t.toAddress="Address is required":this.validateAddress(e)||(t.toAddress="Address is not valid."),t}isSignMessage(e){return!1}getFees(){return ae(this,null,(function*(){try{const e=yield this.getFeeRateFromThorchain("GAIA"),t=ie-A.KV.A8,n=e*Q(10,t),a=(0,g.XZ)(n,ie);return(0,f.singleFee)(f.FeeType.FlatFee,a)}catch(e){return(0,f.singleFee)(f.FeeType.FlatFee,le)}}))}static getAccountDataForDapp(e,t,n){return t.reduce(((t,a)=>{if(void 0!==n[a].chainData[e]){const r=n[a].chainData[e].address,s=n[a].chainData[e].pubKey,o=Uint8Array.from(Buffer.from(null!=s?s:"","hex")),i=n[a].label,l=n[a].walletInfo.type===P.WalletType.Ledger;return[...t,{name:i,bech32Address:r,algo:"secp256k1",pubKey:o,address:r,isNanoLedger:l}]}return t}),[])}getCurrentWallet(){return x.Z.getState().wallets.wallets[x.Z.getState().wallets.activeWalletId]}thornodeAPIGet(e){return ae(this,null,(function*(){return(yield y().get(de+e)).data}))}getFeeRateFromThorchain(e){return ae(this,null,(function*(){const t=yield this.thornodeAPIGet("/inbound_addresses");if(!Array.isArray(t))throw"bad response from Thornode API";const n=t.find((t=>t.chain===e&&"string"==typeof t.gas_rate));if(!n)throw`Thornode API /inbound_addresses does not contain fees for ${e}`;return Number(n.gas_rate)}))}sortAndTestUrls(e){return ae(this,null,(function*(){if(!e||0===e.length)return[];e.sort(((e,t)=>{for(const n of this.prioritizedDomains){if(e.includes(n)&&!t.includes(n))return-1;if(!e.includes(n)&&t.includes(n))return 1}return 0}));return e.slice(0,5).map((e=>e.endsWith("/")?e.slice(0,-1):e))}))}sortExplorer(e){if(!e||0===e.length)return;const t=["mintscan","ping.pub","bigdipper"];return e.sort(((e,n)=>{for(const a of t){if(e.url&&e.url.includes(a)&&(!n.url||!n.url.includes(a)))return-1;if(n.url&&n.url.includes(a)&&(!e.url||!e.url.includes(a)))return 1}return 0})),e}getCustomRPCs(){return ae(this,null,(function*(){const e=(yield y().get("https://mkvngt2qw4.execute-api.eu-west-1.amazonaws.com/Prod/")).data.chains;return(yield Promise.all(e.filter((e=>{var t,n;return(null==(t=e.chain_id)?void 0:t.length)>2&&(null==(n=e.assets)?void 0:n.length)>0})).filter((e=>e.slip44)).map((e=>ae(this,null,(function*(){var t,n,a,r,s,o,i,l,d,c,h,u,p,f,g,m,y;const v=e.assets[0],b=null!=(t=e.image)?t:this.getConfig().fallbackImage,w=(0,_.Ot)(J.J.Cosmos,e.chain_id),I=yield this.sortAndTestUrls((null!=(a=null==(n=e.best_apis)?void 0:n.rpc)?a:[]).map((e=>e.address))),C=yield this.sortAndTestUrls((null!=(s=null==(r=e.best_apis)?void 0:r.rest)?s:[]).map((e=>e.address))),A=null==(o=this.sortExplorer(e.explorers||[]))?void 0:o[0],k=this.getDefaultFee(e.denom,null==(i=e.keplrData)?void 0:i.feeCurrencies);return{id:w,type:J.J.Cosmos,shortName:e.pretty_name,longName:(0,R.fm)(e.pretty_name),chainSymbol:e.symbol,tokenSymbol:e.symbol,image:b,defaultGasPrice:String(null!=k?k:.025),defaultFee:null!=k?k:.005,fallbackImage:this.getConfig().fallbackImage,decimals:null!=(l=null==v?void 0:v.decimals)?l:6,derivationPath:this.config.derivationPath,features:[J.B.Ledger,J.B.CustomToken],privateKey:this.getConfig().privateKey,slip44coinType:e.slip44,chainAddressPrefix:e.bech32_prefix,nativeAssetString:null!=(d=null==v?void 0:v.denom)?d:"",network:{chainId:e.chain_id,jsonRpcProviderUrl:{rpc:null!=(c=I[0])?c:""},defaultRpc:{rpc:null!=(h=I[0])?h:""},lcdURL:null!=(u=C[0])?u:"",explorer:null!=(p=null==A?void 0:A.url)?p:"",address:null!=(g=null==(f=null==A?void 0:A.account_page)?void 0:f.replace("${accountAddress}",""))?g:"",transaction:null!=(y=null==(m=null==A?void 0:A.tx_page)?void 0:m.replace("${txHash}",""))?y:""},getWallets:()=>{var e,t;return null==(t=null==(e=x.Z.getState())?void 0:e.wallets)?void 0:t.wallets},getActiveWalletId:()=>{var e,t;return null==(t=null==(e=x.Z.getState())?void 0:e.wallets)?void 0:t.activeWalletId}}})))))).filter((e=>e.network.defaultRpc&&e.network.lcdURL))}))}checkCustomRpcUrl(e,t){return ae(this,null,(function*(){const n=this.getConfig().network.chainId;if(!n)throw`checkCustomRpcUrl not supported for ${e} `;let a;try{const e=yield y().get(t[P.NodeUrlKey.Rpc]+"/status");a=e.data.result.node_info.network}catch(e){throw D.Z.error({e}),(0,O.Tb)(e),`Failed to retrieve chainId for ${t[P.NodeUrlKey.Rpc]} in ${this.config.longName}`}if(a!==n)throw`${t[P.NodeUrlKey.Rpc]} has chainID mismatch with expected ${n} and actual ${a}`}))}getGasPrice(){return ae(this,null,(function*(){if(this.config.features.includes(J.B.NativeSupport)){const e=j.hv[this.config.network.chainId],{data:t}=yield(0,W.D)(e);if(t&&e in t){const n=t[e].fee;if(Number(n.medium)>0)return Number(n.medium)}}return Number(this.config.defaultGasPrice)}))}getFee(){return ae(this,null,(function*(){const e=yield this.getGasPrice(),t=yield this.estimateSendTxGasLimit(this.config.nativeAssetString,(0,g.XZ)(new(w())(1).multipliedBy(Q(10,this.config.decimals)),this.config.decimals).amount().toString());return new(w())(t*e/Q(10,this.config.decimals))}))}};let ue=he;ne(ue,"generateIBCChainAddress",((e,t)=>{u.Z.config.setBech32Prefix({accAddr:t,accPub:t+"pub",valAddr:t+"valoper",valPub:t+"valoperpub",consAddr:t+"valcons",consPub:t+"valconspub"});const n=new u.Z.proto.cosmos.crypto.secp256k1.PubKey({key:Uint8Array.from(Buffer.from(e,"hex"))});return u.Z.AccAddress.fromPublicKey(n).toAccAddress().toString()}));const pe=ue;a()}catch(fe){a(fe)}}))},919985:(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{Z:()=>z});var r=n(177616),s=n(264487),o=n(942274),i=n(276749),l=n(147828),d=n(148771),c=n(409669),h=n.n(c),u=n(135974),p=n(244431),f=n(437786),g=n(617656),m=n(608193),y=n.n(m),v=n(603030),b=n.n(v),w=n(99127),I=n(831352),C=n(680528),A=n(45217),k=n(496486),T=n(59854),B=n.n(T),S=n(255357),D=n(739989),x=n(42763),P=n(693246),E=n(604690),F=n(46461),_=n(628790),O=n(803418),Z=n(16547),j=n(712685),N=n(728147),U=n(729357),R=n(882591),K=n(661195),M=n(630292),$=n(666293),Buffer=n(348764).Buffer,W=e([x,E,M]);[x,E,M]=W.then?(await W)():W;var L=Object.defineProperty,J=(e,t,n)=>(((e,t,n)=>{t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),X=(e,t,n)=>new Promise(((a,r)=>{var s=e=>{try{i(n.next(e))}catch(e){r(e)}},o=e=>{try{i(n.throw(e))}catch(e){r(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,o);i((n=n.apply(e,t)).next())}));class q extends M.Pu{constructor(e){super(e),J(this,"api"),J(this,"removeDetrimentalUXTOFromAmount",(e=>X(this,null,(function*(){const{activeWalletId:t,wallets:n}=x.Z.getState().wallets,a=n[t].chainData[this.getId()].address,r=yield this.scanUTXOs(a),s=Number(e.toFixed(0));return(0,w.Fs)(r,s)})))),J(this,"broadcastTx",(e=>X(this,null,(function*(){try{const t=yield(0,j.I)(I.yp.Dogecoin,e);return D.Z.info("DOGE broadcast",{hash:t}),t}catch(e){throw(0,F.t)("app:controller_errors.failed_to_broadcast_transaction",{error:e})}})))),J(this,"sendTx",((e,t,n)=>X(this,null,(function*(){const{wallets:a}=x.Z.getState().wallets,r=a[t];switch(r.walletInfo.type){case P.c.Keystore:{const t=r.walletInfo.data;if(!n)throw(0,F.t)("app:controller_errors.no_credentionals_passed");const a=yield(0,i.decryptFromKeystore)(t.keystore,n.walletPassword),s=yield this.buildTx({amount:(0,d.XZ)(B()(new p.BigNumber(e.amount).multipliedBy(1e8).toNumber())),sender:e.fromAddress,recipient:e.toAddress,memo:e.memo,feeRate:e.feeRate}),o=this.getDogeKeys(a,t.walletIndex);s.psbt.signAllInputs(o),s.psbt.finalizeAllInputs();const l=s.psbt.extractTransaction().toHex();return this.broadcastTx(l)}case P.c.PkKeystore:{if(!n)throw(0,F.t)("app:controller_errors.no_credentionals_passed");const t=r.walletInfo.data,a=yield(0,_.Jy)(t.keystore,n.walletPassword),s=JSON.parse(a),o=yield this.buildTx({amount:(0,d.XZ)(B()(new p.BigNumber(e.amount).multipliedBy(1e8).toNumber())),sender:e.fromAddress,recipient:e.toAddress,memo:e.memo,feeRate:e.feeRate}),i=this.signWithPk(o,s.value.pk);return this.broadcastTx(i)}case P.c.Trezor:{const t=r.walletInfo.data,n=yield this.buildTx({amount:(0,d.XZ)(B()(new p.BigNumber(e.amount).multipliedBy(1e8).toNumber())),sender:e.fromAddress,recipient:e.toAddress,memo:e.memo,feeRate:e.feeRate}),a=yield(0,O.D)(r.walletInfo.type).signUTXOTransaction(this,t.derivationPath,t.walletIndex,n);return this.broadcastTx(a)}default:throw"SendTx not supported for bitcoincash"}}))));const t=(0,u.setupCache)({maxAge:6e4});this.api=h().create({adapter:t.adapter})}getOwnedTokens(e){return Promise.resolve([])}getFees(){throw"Method not implemented."}reloadJsonRpcProvidersUrls(){(0,k.noop)()}getECPair(){return(0,A.eA)(E)}getBip32(){return(0,f.ZP)(E)}getAddress(e){if(!e.seed&&!e.pk||e.pk&&e.seed)throw"getAddress: Wrong arguments";if(e.pk){const t=this.getECPair().fromWIF(e.pk,y().dogecoin.main.toBitcoinJS()),{address:n}=g.PP.p2pkh({pubkey:t.publicKey,network:y().dogecoin.main.toBitcoinJS()});if(!n)throw(0,F.t)("app:controller_errors.could_not_generate_address_from_pk");return{address:n}}if(e.seed){return{address:new l.KU({phrase:e.seed.seed.toString(),network:o.Network.Mainnet}).getAddress(e.seed.walletIndex)}}throw"getAddress: Wrong arguments"}getPrivateKey(e){if(!e.seed)throw"getPrivateKey: Wrong arguments";if(e.seed){return this.getDogeKeys(e.seed.toString(),e.walletIndex).toWIF()}throw"getPrivateKey: wrong arguments"}validateAddress(e){return(0,l.YN)(e,o.Network.Mainnet)}static validateAddress(e){return(0,l.YN)(e,o.Network.Mainnet)}getBalance(e){return X(this,null,(function*(){const t=R.u[I.yp.Dogecoin];return(yield(0,U.l)(t,e)).data[t].balances[0].amount.value}))}getChainBalanceStateUpdate(e){return new Promise(((t,n)=>{try{const{wallets:a}=x.Z.getState().wallets,r=this.getId(),{address:o}=a[e].chainData[r];try{this.getBalance(o).then((n=>t({walletId:e,chainId:r,chainBalance:String(n)}))).catch(n)}catch(e){D.Z.error(e),s.Tb(e),n(e)}}catch(e){D.Z.log(e),n(e)}}))}getTransactionFee(e){return X(this,arguments,(function*({speed:e,txData:t}){try{if(!t.fromAddress)throw(0,F.t)("app:controller_errors.empty_from_address");let n=t.feeRate;if(!n){const a=yield this.getFeesWithRates(t.memo);n=(null==a?void 0:a.rates)?a.rates[e]:C.SR-1e5}const a=yield this.scanUTXOs(t.fromAddress);if(0===a.length)throw(0,F.t)("app:controller_errors.no_utxos_to_send");const r=Number(n.toFixed(0)),s=t.memo?this.compileMemo(t.memo):null,o=[];o.push({address:t.toAddress,value:new p.BigNumber(t.amount).multipliedBy(1e8).toNumber()}),s&&o.push({script:s,value:0});const{fee:i}=b()(a,o,r);return new p.BigNumber(i).dividedBy(1e8)}catch(e){return D.Z.error({msg:"getTransactionFee Dogecoin",e}),new p.BigNumber(0)}}))}getFeeRates(){return X(this,null,(function*(){var e;const{data:t}=yield(0,K.Z)(I.yp.Dogecoin,"network-only"),n=null==(e=null==t?void 0:t.dogecoin)?void 0:e.fee;return{[o.FeeOption.Fastest]:n.high/1e3,[o.FeeOption.Fast]:n.medium/1e3,[o.FeeOption.Average]:n.low/1e3}}))}getFeesWithRates(e,t){return X(this,null,(function*(){try{const n=t?yield this.scanUTXOs(t):[],a=yield this.getFeeRates(),r=e?this.compileMemo(e):null,s={fees:{type:o.FeeType.PerByte,average:(0,d.XZ)((0,$.Gl)(n,a.average,r)),fast:(0,d.XZ)((0,$.Gl)(n,a.fast,r)),fastest:(0,d.XZ)((0,$.Gl)(n,a.fastest,r))},rates:a};return s.rates.fastest>=C.SR&&(s.rates.fastest=C.SR-1e5),s}catch(e){return D.Z.error({e}),Promise.reject(e)}}))}approveDappTransaction(e,t,n,a){return X(this,null,(function*(){var r,o,l;const{wallets:d}=x.Z.getState().wallets,c=d[t];if(this.getId()!==e.chainId)throw(0,F.t)("app:controller_errors.dapp_mesage_must_be_active_network");let h;try{h=e.raw}catch(e){throw D.Z.error(e),(0,s.Tb)(e),"XDEFI Malformed Dogecoin Payload"}if(!h)throw"XDEFI Malformed Dogecoin Payload";switch(c.walletInfo.type){case P.c.Keystore:{const t=c.walletInfo.data;if(!n)throw(0,F.t)("app:controller_errors.no_credentionals_passed");const o=yield(0,i.decryptFromKeystore)(t.keystore,n.walletPassword);let l,d;const u=M.j8.getFromAccountIMessage(e)||"";switch(h.method){case I.OH.Transfer:try{d=h.params[0],a&&Object.assign(d,a)}catch(e){throw D.Z.error(e),(0,s.Tb)(e),"XDEFI Malformed Dogecoin Transfer Payload"}try{const e=yield this.buildTx({amount:(0,I.MS)(d.amount),sender:u,recipient:null==d?void 0:d.recipient,memo:null==d?void 0:d.memo,feeRate:Number(null==(r=null==d?void 0:d.feeRate)?void 0:r.toString())}),n=this.signWithHDWallet(e,o,t.walletIndex);return this.broadcastTx(n)}catch(e){throw D.Z.error(e),(0,F.t)("app:controller_errors.transfer_failed_error",{error:e})}case I.VX.RequestAccounts:throw l="XDEFI Error: Request Accounts requests should not be in popup",l;default:throw"XDEFI Dogecoin Method not supported"}}case P.c.PkKeystore:{if(!n)throw(0,F.t)("app:controller_errors.no_credentionals_passed");const t=c.walletInfo.data,r=yield(0,_.Jy)(t.keystore,n.walletPassword);let s;const i=M.j8.getFromAccountIMessage(e);if(!i)throw"From address i";if(h.method===I.OH.Transfer)try{s=h.params[0],a&&(s=Object.assign(s,a));const e=_.Si.fromString(r),t=yield this.buildTx({amount:(0,I.MS)(s.amount),sender:i,recipient:s.recipient,memo:s.memo,feeRate:Number((null==(o=null==s?void 0:s.feeRate)?void 0:o.toString())||"0")}),n=this.signWithPk(t,e.nspk.value.pk);return this.broadcastTx(n)}catch(e){throw e}throw`DogecoinController: Method ${h.method} not implemented`}case P.c.Trezor:switch(h.method){case I.OH.Transfer:{let e;try{e=h.params[0]}catch(e){throw(0,s.Tb)(e),"XDEFI Malformed Dogecoin Transfer Payload"}a&&(e=Object.assign(e,a));try{const t=c.walletInfo.data,n=null==(l=null==e?void 0:e.feeRate)?void 0:l.toString(),a=yield this.buildTx({amount:(0,I.MS)(null==e?void 0:e.amount),sender:t.address,recipient:null==e?void 0:e.recipient,memo:null==e?void 0:e.memo,feeRate:Number(n)}),r=yield(0,O.D)(c.walletInfo.type).signUTXOTransaction(this,t.derivationPath,t.walletIndex,a);return yield this.broadcastTx(r)}catch(e){throw(0,F.t)("app:controller_errors.transfer_failed_error",{error:e})}}case I.VX.RequestAccounts:throw"XDEFI Error: Request Accounts requests should not be in popup";default:throw"XDEFI Dogecoin Method not supported"}default:throw`approveDappTransaction not working (dogecoin with wallet type ${c.walletInfo.type}`}}))}scanUTXOs(e){return X(this,null,(function*(){return(yield(0,Z.d)(I.yp.Dogecoin,e)).map((e=>({witnessUtxo:g.YW.fromHex(e.oTxHex).outs[e.oIndex],hash:e.oTxHash,value:Number(e.value.value),index:e.oIndex,txHex:e.oTxHex})))}))}buildTx(e){return X(this,arguments,(function*({amount:e,recipient:t,memo:n,feeRate:a,sender:r}){if(!(0,l.YN)(t,o.Network.Mainnet))throw(0,F.t)("app:controller_errors.invalid_address");if(n&&n.length>80)throw(0,F.t)("app:controller_errors.memo_length_validation");const s=yield this.scanUTXOs(r);if(0===s.length)throw(0,F.t)("app:controller_errors.no_utxos_to_send");if(!a){a=(yield this.getFeesWithRates(n)).rates.average}const i=Number(a.toFixed(0)),d=n?this.compileMemo(n):null,c=[];c.push({address:t,value:e.amount().toNumber()}),d&&c.push({script:d,value:0});const{inputs:h,outputs:u}=b()(s,c,i);if(!h||!u)throw(0,F.t)("app:controller_errors.insufficient_balance");const p=new g._B({network:this.dogeNetwork(I.g5.Mainnet)});p.setMaximumFeeRate(C.SR);for(const e of h)p.addInput({hash:e.hash,index:e.index,nonWitnessUtxo:Buffer.from(e.txHex,"hex")});return u.forEach((e=>{e.address||(e.address=r),e.script?d&&p.addOutput({script:d,value:0}):p.addOutput(e)})),{psbt:p,utxos:s,inputs:h,outputs:u}}))}dogeNetwork(e){return e===I.g5.Testnet?y().dogecoin.test.toBitcoinJS():y().dogecoin.main.toBitcoinJS()}validateTx(e){const t={};try{""===e?t.toAddress="Address is required":this.validateAddress(e)||(t.toAddress="Address is not valid.")}catch(e){t.toAddress="Address is not valid."}return t}getTransactions(){return X(this,null,(function*(){var e,t,n;const{activeWalletId:a,wallets:s}=x.Z.getState().wallets,o=null==(n=null==(t=null==(e=null==s?void 0:s[a])?void 0:e.chainData)?void 0:t[this.getId()])?void 0:n.address;try{if(o){const e=(yield(0,N.k)(I.yp.Dogecoin,o)).map((e=>{const t=Number((0,r.formatUnits)(e.balanceChange.value,8)),n=t<0;return{date:new Date(e.timestamp),from:o,to:o,action:n?"send":"receive",hash:e.hash,amount:Math.abs(t).toString(),status:"successful",symbol:this.getConfig().tokenSymbol,isSender:n,icon:this.getConfig().image,chainId:this.getId()}}));e.length&&(yield(0,S.h4)({walletId:a,chainId:this.getId(),transactions:e,blockNumber:0}))}}catch(e){D.Z.error(`dogecoin transaction error: ${e}`)}}))}compileMemo(e){const t=Buffer.from(e,"utf8");return g._v.compile([g.Jz.OP_RETURN,t])}isSignMessage(){return!1}getDogeKeys(e,t=0){const n=this.dogeNetwork(I.g5.Mainnet),a=(0,i.getSeed)(e),r=this.getConfig().derivationPath[0].value,s=this.getBip32().fromSeed(a,n).derivePath(H(r,t));if(!s.privateKey)throw(0,F.t)("app:controller_errors.couldnt_get_pk_from_phrase");return this.getECPair().fromPrivateKey(s.privateKey,{network:n})}signWithHDWallet(e,t,n){const a=this.getDogeKeys(t,n);e.psbt.signAllInputs(a),e.psbt.finalizeAllInputs();return e.psbt.extractTransaction().toHex()}signWithPk(e,t){const n=this.getECPair().fromWIF(t,this.dogeNetwork(I.g5.Mainnet));e.psbt.signAllInputs(n),e.psbt.finalizeAllInputs();return e.psbt.extractTransaction().toHex()}}function H(e,t){return e.replace("X",String(t))}const z=q;a()}catch(V){a(V)}}))},368042:(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{Z:()=>G});var r=n(177616),s=n(264487),o=n(942274),i=n(276749),l=n(895124),d=n(148771),c=n(409669),h=n.n(c),u=n(135974),p=n(244431),f=n(437786),g=n(617656),m=n(608193),y=n.n(m),v=n(603030),b=n.n(v),w=n(99127),I=n(255357),C=n(847001),A=n(831352),k=n(45217),T=n(46461),B=n(59854),S=n.n(B),D=n(739989),x=n(522933),P=n(626423),E=n(101668),F=n(42763),_=n(693246),O=n(604690),Z=n(628790),j=n(803418),N=n(661195),U=n(16547),R=n(712685),K=n(728147),M=n(882591),$=n(729357),W=n(630292),L=n(666293),Buffer=n(348764).Buffer,J=e([F,O,W]);[F,O,W]=J.then?(await J)():J;var X=Object.defineProperty,q=(e,t,n)=>(((e,t,n)=>{t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),H=(e,t,n)=>new Promise(((a,r)=>{var s=e=>{try{i(n.next(e))}catch(e){r(e)}},o=e=>{try{i(n.throw(e))}catch(e){r(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,o);i((n=n.apply(e,t)).next())}));const z={[o.Network.Mainnet]:"m/84'/2'/0'/0/",[o.Network.Testnet]:"m/84'/1'/0'/0/",[o.Network.Stagenet]:"m/84'/2'/0'/0/"};class V extends W.Pu{constructor(e){super(e),q(this,"api"),q(this,"defaultRpcProvidersUrl"),q(this,"jsonRpcProviderUrl"),q(this,"removeDetrimentalUXTOFromAmount",(e=>H(this,null,(function*(){const{activeWalletId:t,wallets:n}=F.Z.getState().wallets,a=n[t].chainData[this.getId()].address,r=yield this.scanUTXOs(a),s=Number(e.toFixed(0));return(0,w.Fs)(r,s)})))),q(this,"sendTx",((e,t,n)=>H(this,null,(function*(){const{wallets:a}=F.Z.getState().wallets,r=a[t],s=yield this.buildTx({amount:(0,d.XZ)(S()(new p.BigNumber(e.amount).multipliedBy(1e8).toNumber())),sender:e.fromAddress,recipient:e.toAddress,memo:e.memo,feeRate:e.feeRate||(yield this.getFeeRates()).average});switch(r.walletInfo.type){case _.c.Keystore:{const e=r.walletInfo.data;if(!n)throw(0,T.t)("app:controller_errors.no_credentionals_passed");const t=yield(0,i.decryptFromKeystore)(e.keystore,n.walletPassword),a=this.getLtcKeys(t,e.walletIndex);s.psbt.signAllInputs(a),s.psbt.finalizeAllInputs();const o=s.psbt.extractTransaction().toHex();return this.broadcastTx(o)}case _.c.PkKeystore:{if(!n)throw(0,T.t)("app:controller_errors.no_credentionals_passed");const e=r.walletInfo.data,t=yield(0,Z.Jy)(e.keystore,n.walletPassword),a=Z.Si.fromString(t),o=this.getECPair().fromWIF(a.nspk.value.pk,this.ltcNetwork());s.psbt.signAllInputs(o),s.psbt.finalizeAllInputs();const i=s.psbt.extractTransaction().toHex();return this.broadcastTx(i)}case _.c.Trezor:{const e=r.walletInfo.data,t=yield(0,j.D)(r.walletInfo.type).signUTXOTransaction(this,e.derivationPath,e.walletIndex,s);return this.broadcastTx(t)}default:throw"SendTx not supported for litecoin"}})))),q(this,"broadcastTx",(e=>H(this,null,(function*(){try{const t=yield(0,R.I)(A.yp.Litecoin,e);return D.Z.info("LTC broadcast",{hash:t}),t}catch(e){throw(0,T.t)("app:controller_errors.failed_to_broadcast_transaction",{error:e})}}))));const t=(0,u.setupCache)({maxAge:6e4});this.api=h().create({adapter:t.adapter})}getOwnedTokens(e){return Promise.resolve([])}getFees(){throw"Method not implemented."}overridesDefaults(e){const{chains:t}=F.Z.getState().chains,n=t.find((e=>e.id===this.getId()));return n&&!(0,x.fp)(n.network.jsonRpcProviderUrl[E.G.Rpc])?n.network.jsonRpcProviderUrl:e}reloadJsonRpcProvidersUrls(){this.jsonRpcProviderUrl=this.overridesDefaults(this.defaultRpcProvidersUrl)}getECPair(){return(0,k.eA)(O)}getBip32(){return(0,f.GA)(O)}getAddress(e){if(!e.seed&&!e.pk||e.pk&&e.seed)throw"getAddress: Wrong arguments";if(e.pk){const t=this.getECPair().fromWIF(e.pk,y().litecoin.main.toBitcoinJS()),{address:n}=g.PP.p2wpkh({pubkey:t.publicKey,network:y().litecoin.main.toBitcoinJS()});if(!n)throw(0,T.t)("app:controller_errors.could_not_generate_address_from_pk");return{address:n}}if(e.seed){return{address:this.getClient(e.seed.seed.toString()).getAddress(e.seed.walletIndex)}}throw"getAddress: Wrong arguments"}getPrivateKey(e){if(!e.seed)throw"getPrivateKey: Wrong arguments";if(e.seed){return this.getLtcKeys(e.seed.toString(),e.walletIndex).toWIF()}throw"getPrivateKey: wrong arguments"}getBalance(e){return H(this,null,(function*(){const t=P.hv[this.config.network.chainId],n=M.u[t];return(yield(0,$.l)(n,e)).data[n].balances[0].amount.value}))}getChainBalanceStateUpdate(e){return new Promise(((t,n)=>{try{const{wallets:a}=F.Z.getState().wallets,r=this.getId(),{address:o}=a[e].chainData[r];try{this.getBalance(o).then((n=>t({walletId:e,chainId:r,chainBalance:String(n)}))).catch(n)}catch(e){D.Z.error(e),s.Tb(e),n(e)}}catch(e){D.Z.log(e),n(e)}}))}getClient(e){return new l.KU({network:(0,P.XL)(A.g5.Mainnet),sochainUrl:C.Z.get("SOCHAIN_URL"),nodeUrl:this.getConfig().network.jsonRpcProviderUrl.rpc,phrase:e})}getFeeRates(){return H(this,null,(function*(){var e;const{data:t}=yield(0,N.Z)(A.yp.Litecoin,"network-only"),n=null==(e=null==t?void 0:t.litecoin)?void 0:e.fee;return{[o.FeeOption.Fastest]:n.high/1e3,[o.FeeOption.Fast]:n.medium/1e3,[o.FeeOption.Average]:n.low/1e3}}))}getFeesWithRates(e,t){return H(this,null,(function*(){try{const n=t?yield this.scanUTXOs(t):[],a=yield this.getFeeRates(),r=e?this.compileMemo(e):null,s=(0,L.Gl)(n,a.fast,r),i=(0,L.Gl)(n,a.fastest,r);return{fees:{type:o.FeeType.PerByte,average:(0,d.XZ)((0,L.Gl)(n,a.average,r)),fast:(0,d.XZ)(s===L.HT?s+500:s),fastest:(0,d.XZ)(i===L.HT?i+1e3:i)},rates:a}}catch(e){return D.Z.error({e}),Promise.reject(e)}}))}validateAddress(e){try{return(0,l.YN)(e,(0,P.XL)(A.g5.Mainnet))}catch(e){return!1}}static validateAddress(e){try{return(0,l.YN)(e,o.Network.Mainnet)}catch(e){return!1}}approveDappTransaction(e,t,n,a){return H(this,null,(function*(){var r;const{wallets:o}=F.Z.getState().wallets,l=o[t];if(this.getId()!==e.chainId)throw(0,T.t)("app:controller_errors.dapp_mesage_must_be_active_network");let d;try{d=e.raw}catch(e){throw D.Z.error(e),(0,s.Tb)(e),"XDEFI Malformed Litecoin Payload"}switch(l.walletInfo.type){case _.c.PkKeystore:{if(!n)throw(0,T.t)("app:controller_errors.no_credentionals_passed");const t=l.walletInfo.data,r=yield(0,Z.Jy)(t.keystore,n.walletPassword);let s;const o=W.j8.getFromAccountIMessage(e);if(!o)throw"From address i";if(d.method===A.pD.Transfer)try{s=d.params[0],a&&(s=Object.assign(s,a));const e=Z.Si.fromString(r),t=yield this.buildTx({amount:(0,A.MS)(s.amount),sender:o,recipient:s.recipient,memo:s.memo,feeRate:Number((null==s?void 0:s.feeRate)||(yield this.getFeeRates()).average)}),n=this.getECPair().fromWIF(e.nspk.value.pk,this.ltcNetwork());t.psbt.signAllInputs(n),t.psbt.finalizeAllInputs();const i=t.psbt.extractTransaction().toHex();return this.broadcastTx(i)}catch(e){throw e}throw`BitcoinController: Method ${d.method} not implemented`}case _.c.Keystore:{if(!n)throw(0,T.t)("app:controller_errors.no_credentionals_passed");const t=l.walletInfo.data,r=yield(0,i.decryptFromKeystore)(t.keystore,n.walletPassword);let s,o;const c=W.j8.getFromAccountIMessage(e),h=this.getClient(r).getAddress(t.walletIndex);if(h!==c)throw s=`from address not matching wallet ${h} !=  + ${c}`,s;switch(d.method){case A.pD.Transfer:try{o=d.params[0],a&&(o=Object.assign(o,a));const e=yield this.buildTx({amount:(0,A.MS)(o.amount),sender:c,recipient:o.recipient,memo:o.memo,feeRate:Number((null==o?void 0:o.feeRate)||(yield this.getFeeRates()).average)}),n=this.getLtcKeys(r,t.walletIndex);e.psbt.signAllInputs(n),e.psbt.finalizeAllInputs();const s=e.psbt.extractTransaction().toHex();return this.broadcastTx(s)}catch(e){throw D.Z.error(e),(0,T.t)("app:controller_errors.transfer_failed_error",{error:e})}case A.VX.RequestAccounts:throw s="XDEFI Error: Request Accounts requests should not be in popup",s;default:throw"XDEFI Litecoin Method not supported"}}case _.c.Trezor:switch(d.method){case A.pD.Transfer:{let e;try{e=d.params[0]}catch(e){throw(0,s.Tb)(e),"XDEFI Malformed Litecoin Transfer Payload"}a&&(e=Object.assign(e,a));try{const t=l.walletInfo.data,n=null==(r=null==e?void 0:e.feeRate)?void 0:r.toString(),a=yield this.buildTx({amount:(0,A.MS)(null==e?void 0:e.amount),sender:t.address,recipient:null==e?void 0:e.recipient,memo:null==e?void 0:e.memo,feeRate:Number(n)}),s=yield(0,j.D)(l.walletInfo.type).signUTXOTransaction(this,t.derivationPath,t.walletIndex,a);return yield this.broadcastTx(s)}catch(e){throw(0,T.t)("app:controller_errors.transfer_failed_error",{error:e})}}case A.VX.RequestAccounts:throw"XDEFI Error: Request Accounts requests should not be in popup";default:throw"XDEFI Litecoin Method not supported"}default:throw`approveDappTransaction not working for wallet type ${l.walletInfo.type}`}}))}buildTx(e){return H(this,arguments,(function*({amount:e,recipient:t,memo:n,feeRate:a,sender:r}){if(!(0,l.YN)(t,o.Network.Mainnet))throw(0,T.t)("app:controller_errors.invalid_address");if(n&&n.length>80)throw(0,T.t)("app:controller_errors.memo_length_validation");const s=yield this.scanUTXOs(r);if(0===s.length)throw(0,T.t)("app:controller_errors.no_utxos_to_send");const i=Number(a.toFixed(0)),d=n?this.compileMemo(n):null,c=[];c.push({address:t,value:e.amount().toNumber()}),d&&c.push({script:d,value:0});const{inputs:h,outputs:u}=b()(s,c,i);if(!h||!u)throw(0,T.t)("app:controller_errors.insufficient_balance");const p=new g._B({network:this.ltcNetwork()});p.setMaximumFeeRate(25e5);for(const e of h)p.addInput({hash:e.hash,index:e.index,witnessUtxo:e.witnessUtxo});return u.forEach((e=>{e.address||(e.address=r),e.script?d&&p.addOutput({script:d,value:0}):p.addOutput(e)})),{psbt:p,utxos:s,inputs:h,outputs:u}}))}validateTx(e){const t={};return""===e?t.toAddress="Address is required":this.validateAddress(e)||(t.toAddress="Address is not valid."),t}ltcNetwork(){return y().litecoin.main.toBitcoinJS()}getFullDerivationPath(e){return z?`${z[o.Network.Mainnet]}${e}`:""}getLtcKeys(e,t=0){const n=(0,i.getSeed)(e),a=this.getBip32().fromSeed(n,this.ltcNetwork()).derivePath(this.getFullDerivationPath(t));if(!a.privateKey)throw(0,T.t)("app:controller_errors.couldnt_get_pk_from_phrase");return this.getECPair().fromPrivateKey(a.privateKey,{network:this.ltcNetwork()})}getTransactions(){return H(this,null,(function*(){var e,t,n;const{activeWalletId:a,wallets:s}=F.Z.getState().wallets,o=null==(n=null==(t=null==(e=null==s?void 0:s[a])?void 0:e.chainData)?void 0:t[this.getId()])?void 0:n.address;try{if(o){const e=(yield(0,K.k)(A.yp.Litecoin,o)).map((e=>{const t=Number((0,r.formatUnits)(e.balanceChange.value,8)),n=t<0;return{date:new Date(e.timestamp),from:o,to:o,action:n?"send":"receive",hash:e.hash,amount:Math.abs(t).toString(),status:"successful",symbol:this.getConfig().tokenSymbol,isSender:n,icon:this.getConfig().image,chainId:this.getId()}}));e.length&&(yield(0,I.h4)({walletId:a,chainId:this.getId(),transactions:e,blockNumber:0}))}}catch(e){D.Z.error(`litecoin transaction error: ${e}`)}}))}getTransactionFee(e){return H(this,arguments,(function*({speed:e,txData:t}){try{if(!t.fromAddress)throw(0,T.t)("app:controller_errors.empty_from_address");let n=t.feeRate;if(!n){n=(yield this.getFeesWithRates(t.memo)).rates[e]}const a=yield this.scanUTXOs(t.fromAddress);if(0===a.length)throw(0,T.t)("app:controller_errors.no_utxos_to_send");const r=Number(n.toFixed(0)),s=t.memo?this.compileMemo(t.memo):null,o=[];o.push({address:t.toAddress,value:new p.BigNumber(t.amount).multipliedBy(1e8).toNumber()}),s&&o.push({script:s,value:0});const{fee:i}=b()(a,o,r);return new p.BigNumber(i).dividedBy(1e8)}catch(e){return D.Z.error("getTransactionFee LTC",e),new p.BigNumber(0)}}))}scanUTXOs(e){return H(this,null,(function*(){return(yield(0,U.d)(A.yp.Litecoin,e)).map((e=>({witnessUtxo:g.YW.fromHex(e.oTxHex).outs[e.oIndex],hash:e.oTxHash,value:Number(e.value.value),index:e.oIndex,txHex:e.oTxHex})))}))}compileMemo(e){const t=Buffer.from(e,"utf8");return g._v.compile([g.Jz.OP_RETURN,t])}isSignMessage(){return!1}}const G=V;a()}catch(e){a(e)}}))},632314:(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{E:()=>V});var r=n(357786),s=n(264487),o=n(244431),i=n.n(o),l=n(696624),d=n(213550),c=n.n(d),h=n(739989),u=n(968447),p=n(932132),f=n(847001),g=n(831352),m=n(42763),y=n(556138),v=n(218006),b=n(496486),w=n(46461),I=n(680528),C=n(255357),A=n(459457),k=n(628790),T=n(803418),B=n(630292),S=n(99127),Buffer=n(348764).Buffer,D=e([m,B]);[m,B]=D.then?(await D)():D;var x=Object.defineProperty,P=Object.defineProperties,E=Object.getOwnPropertyDescriptors,F=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,Z=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,j=(e,t)=>{for(var n in t||(t={}))_.call(t,n)&&Z(e,n,t[n]);if(F)for(var n of F(t))O.call(t,n)&&Z(e,n,t[n]);return e},N=(e,t)=>P(e,E(t)),U=(e,t,n)=>(Z(e,"symbol"!=typeof t?t+"":t,n),n),R=(e,t,n)=>new Promise(((a,r)=>{var s=e=>{try{i(n.next(e))}catch(e){r(e)}},o=e=>{try{i(n.throw(e))}catch(e){r(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,o);i((n=n.apply(e,t)).next())}));const K=u.utils.format.parseNearAmount,M="m/44'/397'/X'",$=K("0.00125"),W=K("0.0125"),L=K("0.00000000003"),J=K("0.00000000003"),X="1",q=/^[0-9a-f]{64}$/i,H=/^(([a-z\d]+[\-_])*[a-z\d]+\.)*([a-z\d]+[\-_])*[a-z\d]+$/i,z=class extends B.NL{constructor(e){super(e),U(this,"clients",{}),i().config({EXPONENTIAL_AT:25})}getOwnedTokens(e){return Promise.resolve([])}getFees(){throw"Method not implemented."}reloadJsonRpcProvidersUrls(){throw"Method not implemented."}getClient(){return R(this,null,(function*(){return this.clients[this.config.network.activeNetwork]||(this.clients[this.config.network.activeNetwork]=yield u.connect(N(j({},this.config.network),{keyStore:new u.keyStores.InMemoryKeyStore}))),this.clients[this.config.network.activeNetwork]}))}getCurrentAddress(){var e,t,n;const{activeWalletId:a,wallets:r}=m.Z.getState().wallets;return null==(n=null==(t=null==(e=null==r?void 0:r[a])?void 0:e.chainData)?void 0:t[this.getId()])?void 0:n.address}getTokenBalance(e,t){return R(this,null,(function*(){const n=yield this.getClient(),a=yield n.account("dontcare");return yield a.viewFunction(e,"ft_balance_of",{account_id:t})}))}getTokenMetadata(e){return R(this,null,(function*(){const t=yield this.getClient();return(yield t.account("dontcare")).viewFunction(e,"ft_metadata")}))}getTokenBalancesStateUpdate(e){return R(this,null,(function*(){var t,n;const{wallets:a}=m.Z.getState().wallets,{address:r}=a[e].chainData[this.getId()],o=null!=(n=null==(t=a[e].chainData[this.getId()])?void 0:t.tokens)?n:{},i=Object.keys(o);try{const t=(yield Promise.allSettled(i.map((e=>R(this,null,(function*(){const t=o[e],n=yield this.getTokenBalance(t.address,r);return N(j({},t),{balance:n})})))))).reduce(((e,t,n)=>{if("fulfilled"!==t.status)return s.Tb("Unsettled promise for balances",{extra:{currVal:t,token:o[i[n]]}}),e;const a=t.value,r=a.address?a.address:a.id;return N(j({},e),{[r]:a})}),{});return{walletId:e,tokenBalances:t,chainId:this.getId()}}catch(t){return h.Z.error({e:t}),s.Tb(t),{walletId:e,tokenBalances:{},chainId:this.getId()}}}))}getTransactions(){return R(this,null,(function*(){var e;const t=this.getCurrentAddress();if(!t)throw(0,w.t)("app:controller_errors.current_address_is_not_avaliable");const n=r.Ps`
      query NearTransactions($address: String!) {
        near {
          transactions(address: $address) {
            edges {
              node {
                hash
                timestamp
                status
                type
                fee
                inputData
                fromAddress
                toAddress
                transfers {
                  asset {
                    ... on CryptoAsset {
                      id
                      symbol
                      image
                    }
                  }
                  fromAddress
                  toAddress
                  amount {
                    value
                    scalingFactor
                  }
                }
              }
            }
          }
        }
      }
    `,{data:a,error:s}=yield A.Lp.query({query:n,variables:{address:t},fetchPolicy:"network-only"});if(s)return void h.Z.error("Failed to fetch transactions for near chain",s);const o=null==(e=a.near.transactions)?void 0:e.edges.filter((e=>{var t,n;return null==(n=null==(t=e.node)?void 0:t.status)?void 0:n.includes("Success")})).reduce(((e,n)=>n.node.transfers.reduce(((e,a)=>{var r,s,o,l,d,c,h,u;const p=(null==(r=a.fromAddress)?void 0:r.toLowerCase())===(null==t?void 0:t.toLowerCase());return[...e,{hash:n.node.hash,from:a.fromAddress,to:a.toAddress,amount:new(i())(a.amount.value).dividedBy(Math.pow(10,null!=(o=null==(s=a.asset)?void 0:s.decimals)?o:I.KV.A24)).valueOf(),chainId:this.getId(),action:p?"send":"receive",status:"successful",symbol:null!=(d=null==(l=a.asset)?void 0:l.symbol)?d:"NEAR",isSender:p,icon:a.asset.image,date:new Date((0,b.isString)(null==(c=n.node)?void 0:c.timestamp)?null==(h=n.node)?void 0:h.timestamp:1e3*(null==(u=n.node)?void 0:u.timestamp))}]}),e)),[]),l=m.Z.getState().wallets.activeWalletId;(0,C.h4)({walletId:l,chainId:this.getId(),transactions:o})}))}pkToKeyPair(e){const t=e.split(":");if(t.length>1){if("ed25519"===t[0])return u.utils.KeyPairEd25519.fromString(t[1]);throw(0,w.t)("app:controller_errors.pk_format_is_not_supported",{pkParts:t[0]})}if(!(0,v.O1)(t[0]))throw(0,w.t)("app:controller_errors.invalid_pk_format");return u.utils.KeyPair.fromString(t[0])}getAddress(e){if(!e.seed&&!e.pk||e.pk&&e.seed)throw"getAddress: Wrong arguments";if(e.pk){const t=this.pkToKeyPair(e.pk);return{address:Buffer.from(t.getPublicKey().data).toString("hex")}}if(e.seed){const{secretKey:t}=(0,p.parseSeedPhrase)(e.seed.seed.toString(),M.replace("X",e.seed.walletIndex.toString())),n=this.pkToKeyPair(t);return{address:Buffer.from(n.getPublicKey().data).toString("hex")}}throw"getAddress: Wrong arguments"}validateAddress(e){return z.validateAddress(e)}static validateAddress(e){return!!q.test(e)||!!(e.length>=2&&e.length<=64&&H.test(e))}getChainBalanceStateUpdate(e){return R(this,null,(function*(){const t=m.Z.getState().wallets.wallets[e];try{const n=yield this.getClient(),a=yield n.account(t.chainData[this.getId()].address),r=yield a.getAccountBalance();return{walletId:e,chainId:this.getId(),chainBalance:r.total}}catch(t){return h.Z.error(t),s.Tb(t),{walletId:e,chainId:this.getId(),chainBalance:"0"}}}))}getBalance(e){return R(this,null,(function*(){try{const t=yield this.getClient(),n=yield t.account(e);return(yield n.getAccountBalance()).total}catch(e){return h.Z.error(e),"0"}}))}approveDappTransaction(e,t,n,a){return R(this,null,(function*(){const a=yield this.getWallet(t,n);if(!a)throw(0,w.t)("app:controller_errors.wallet_does_not_exist");if(this.getId()!==e.chainId)throw(0,w.t)("app:controller_errors.dapp_mesage_must_be_active_network");switch(e.raw.method){case"signAndSendTransaction":{const t=e.raw.params.transaction;return this.signAndSendTransaction(a,t)}case"signAndSendTransactions":{const t=e.raw.params.transactions;return(0,l.map)(t,(e=>this.signAndSendTransaction(a,e)),{concurrency:1})}default:throw"Method not implemented."}}))}signAndSendTransaction(e,t){return R(this,null,(function*(){if(t.signerId!==e.accountId)throw"Selected account and provided signer does not match";const n=t.actions.map((e=>{const{methodName:t}=e.params;return"storage_deposit"===t&&(e.params.deposit="1250000000000000000000"),e})).map(this.createAction);try{const[a,r]=yield e.signTransaction(t.receiverId,n);return yield e.connection.provider.sendTransactionAsync(r)}catch(e){throw h.Z.info("Near error",{e}),e}}))}createAction(e){switch(e.type){case"CreateAccount":return u.transactions.createAccount();case"DeployContract":{const{code:t}=e.params;return u.transactions.deployContract(t)}case"FunctionCall":{const{methodName:t,args:n,gas:a,deposit:r}=e.params;return u.transactions.functionCall(t,n,new(c())(a),new(c())(r))}case"Transfer":{const{deposit:t}=e.params;return u.transactions.transfer(new(c())(t))}case"Stake":{const{stake:t,publicKey:n}=e.params;return u.transactions.stake(new(c())(t),u.utils.PublicKey.from(n))}default:throw`Action of type "${e.type}" is not supported`}}sendTx(e,t,n){return R(this,null,(function*(){var a;const r=new(i())(e.amount).multipliedBy(Math.pow(10,e.decimals)).toString(10),s=yield this.getWallet(t,n);if(e.isToken){if(!(yield this.isStorageBalanceAvailable(e.toAddress,e.address)))try{yield this.transferStorageDeposit(s,e.address,e.toAddress,$)}catch(t){t.message.includes("attached deposit is less than")&&(yield this.transferStorageDeposit(s,e.address,e.toAddress,W))}const[t,n]=yield s.signTransaction(e.address,[u.transactions.functionCall("ft_transfer",{amount:r,memo:e.memo,receiver_id:e.toAddress},new(c())(J),new(c())(X))]);return yield s.connection.provider.sendTransactionAsync(n)}return null==(a=(yield s.sendMoney(e.toAddress,new(c())(r))).transaction)?void 0:a.hash}))}getFee(e){return R(this,null,(function*(){return new(i())(1e-5).multipliedBy(Math.pow(10,24)).plus(W).plus(L).plus(X)}))}updateBalance(){return R(this,arguments,(function*(e=m.Z.getState().wallets.activeWalletId){try{const[t,n]=yield Promise.allSettled([this.getChainBalanceStateUpdate(e),this.getTokenBalancesStateUpdate(e)]);if("fulfilled"===t.status)return"fulfilled"===n.status?{chainBalanceStateUpdate:t.value,tokenBalancesStateUpdate:n.value}:(h.Z.error("NEAR error updating token balances"),{chainBalanceStateUpdate:t.value});throw h.Z.error("NEAR error updating chain balance"),"NEAR error updating chain balance"}catch(e){throw h.Z.error(e),s.Tb(e),e}}))}validateTx(e){const t={};return""===e?t.toAddress="Address is required":this.validateAddress(e)||(t.toAddress="Address is not valid."),t}isSignMessage(e){return"sign"===e.raw.method}getWallet(e,t){return R(this,null,(function*(){const n=null!=e?e:m.Z.getState().wallets.activeWalletId,a=m.Z.getState().wallets.wallets[n];if(!a)throw(0,w.t)("app:controller_errors.unable_to_get_wallet");switch(a.walletInfo.type){case y.WalletType.Keystore:{const e=a.walletInfo.data;if(!t)throw(0,w.t)("app:controller_errors.no_credentionals_passed");const n=yield(0,k.WR)(e.keystore,t.walletPassword);return this.getWalletFromSeed(n,e.walletIndex)}case y.WalletType.PkKeystore:{const e=a.walletInfo.data;if(!t)throw(0,w.t)("app:controller_errors.no_credentionals_passed");const n=yield(0,k.Jy)(e.keystore,t.walletPassword),r=k.Si.fromString(n).nspk.value.pk;return this.getWalletFromKey(r,e.walletIndex)}case y.WalletType.Ledger:case y.WalletType.Trezor:{const e=this.getConfig(),t=a.walletInfo.data;e.network.signer={createKey(){throw"createKey(: not supported"},getPublicKey(){return R(this,null,(function*(){return u.utils.PublicKey.fromString(t.publicKey)}))},signMessage(e){return R(this,null,(function*(){return{signature:yield(0,T.D)(a.walletInfo.type).signNearTransaction(t.derivationPath,t.walletIndex,e),publicKey:yield this.getPublicKey()}}))}};const n=yield u.connect(e.network),r=Buffer.from(u.utils.PublicKey.fromString(t.publicKey).data).toString("hex");return n.account(r)}default:throw"Not supported"}}))}getPrivateKey(e){if(!e.seed)throw"getPrivateKey: Wrong arguments";if(e.seed){const{secretKey:t}=(0,p.parseSeedPhrase)(e.seed.toString(),M.replace("X",e.walletIndex.toString()));return t}throw"getPrivateKey: wrong arguments"}getWalletFromSeed(e,t){const{secretKey:n}=(0,p.parseSeedPhrase)(e.toString(),M.replace("X",t.toString()));return this.getWalletFromKey(n,t)}getWalletFromKey(e,t){return R(this,null,(function*(){const t=this.getConfig(),n=u.KeyPair.fromString(e),a=n.getPublicKey(),r=Buffer.from(u.utils.PublicKey.fromString(a.toString()).data).toString("hex"),s=yield this.getClient();return s.config.keyStore.setKey(t.network.networkId,r,n),s.account(r)}))}getStorageBalance(e,t){return R(this,null,(function*(){const n=yield this.getClient();return(yield n.account("dontcare")).viewFunction(t,"storage_balance_of",{account_id:e})}))}isStorageBalanceAvailable(e,t){return R(this,null,(function*(){const n=yield this.getStorageBalance(e,t);return void 0!==(null==n?void 0:n.total)}))}transferStorageDeposit(e,t,n,a){return R(this,null,(function*(){const[r,s]=yield e.signTransaction(t,[u.transactions.functionCall("storage_deposit",{account_id:n,registration_only:!0},new(c())(L),new(c())(a))]);return e.connection.provider.sendTransactionAsync(s)}))}};let V=z;U(V,"getInteractedTokens",((e,t)=>R(z,null,(function*(){return e===g.g5.Testnet?(h.Z.warn("getInteractedErc20 for AURORA not implemented"),[]):(0,S.Eq)(`${f.Z.get("PROXYSCAN_API_HOST")}/${f.Z.get("NEAR_HOST")}/api?module=account&action=tokentx&address=${t}&startblock=0&endblock=99999999999&page=1&&sort=desc`)})))),a()}catch(e){a(e)}}))},682435:(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{Z:()=>W});var r=n(264487),s=n(658467),o=n(83613),i=n(744777),l=n(549687),d=n(123339),c=n(121236),h=n(977043),u=n(59917),p=n(409669),f=n.n(p),g=n(437786),m=n(777191),y=n.n(m),v=n(62678),b=n(327194),w=n(256371),I=n(496486),C=n(739989),A=n(522933),k=n(42763),T=n(556138),B=n(604690),S=n(450780),D=n.n(S),x=n(46461),P=n(255357),E=n(628790),F=n(803418),_=n(630292),Buffer=n(348764).Buffer,O=e([k,B,_]);[k,B,_]=O.then?(await O)():O;var Z=Object.defineProperty,j=(e,t,n)=>(((e,t,n)=>{t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),N=(e,t,n)=>new Promise(((a,r)=>{var s=e=>{try{i(n.next(e))}catch(e){r(e)}},o=e=>{try{i(n.throw(e))}catch(e){r(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,o);i((n=n.apply(e,t)).next())}));const U={deprecated:void 0,bip44:"bip44",bip44Change:"bip44Change",bip44Root:"bip44Root"};function R(e,t,n,a){const r=M(e,t,n,a);return u.RG.fromSeed(Uint8Array.from(r))}function K(e){return u.RG.fromSecretKey(Uint8Array.from(Buffer.from(e,"hex")))}function M(e,t,n,a){switch(n){case U.deprecated:const r=`m/501'/${t}'/0/${a}`;return(0,g.GA)(B).fromSeed(Buffer.from(e)).derivePath(r).privateKey;case U.bip44:const s=`m/44'/501'/${t}'`;return(0,v.derivePath)(s,Buffer.from(e).toString("hex")).key;case U.bip44Change:const o=`m/44'/501'/${t}'/0'`;return(0,v.derivePath)(o,Buffer.from(e).toString("hex")).key;default:throw`invalid derivation path: ${n}`}}class $ extends _.NL{constructor(e,t){super(t),this.masterController=e,j(this,"connections"),j(this,"getParsedInstruction",(e=>{var t,n,a;return e?null!=(a=null==e?void 0:e.transaction.message.instructions.find((e=>{var t;return"transfer"===(null==(t=e.parsed)?void 0:t.type)})))?a:null==(n=null==(t=null==e?void 0:e.meta)?void 0:t.innerInstructions)?void 0:n.forEach((e=>e.instructions.find((e=>{var t;return"transfer"===(null==(t=e.parsed)?void 0:t.type)})))):e})),j(this,"getAction",((e,t)=>{var n,a,r,s,o,i,l,d,c,h,u,p,f,g,m,y,v,b,A,k,T;const B=null==t?void 0:t.meta;if(!t||!B)return["unknown","0"];const S=this.isTokenTx(t),D=null==(a=null==(n=this.getParsedInstruction(t))?void 0:n.parsed)?void 0:a.info,x=S?null==(o=null==(s=null==(r=t.meta)?void 0:r.postTokenBalances)?void 0:s[0])?void 0:o.owner:null==D?void 0:D.source;let P="unknown",E=0,F="0";D?(E=(0,I.isNil)(null==D?void 0:D.lamports)?(0,I.isNil)(null==D?void 0:D.amount)?0:null==D?void 0:D.amount:null==D?void 0:D.lamports,P=x?e===x?"send":"receive":"unknown"):S&&((0,I.isNil)(null==(d=null==(l=null==(i=B.preTokenBalances)?void 0:i[0])?void 0:l.uiTokenAmount)?void 0:d.amount)||(0,I.isNil)(null==(u=null==(h=null==(c=B.postTokenBalances)?void 0:c[0])?void 0:h.uiTokenAmount)?void 0:u.amount)||(E=Number(null==(f=null==(p=B.postTokenBalances)?void 0:p[0].uiTokenAmount)?void 0:f.amount)-Number(null==(m=null==(g=B.preTokenBalances)?void 0:g[0].uiTokenAmount)?void 0:m.amount),0===E&&(E=Number(null==(v=null==(y=B.postTokenBalances)?void 0:y[0].uiTokenAmount)?void 0:v.amount)),P=E>=0?"receive":"send"));try{F=(0,w.formatUnits)(Math.abs(E),S&&(null==(k=null==(A=null==(b=B.preTokenBalances)?void 0:b[0])?void 0:A.uiTokenAmount)?void 0:k.decimals)?null==(T=B.preTokenBalances)?void 0:T[0].uiTokenAmount.decimals:9)}catch(e){C.Z.error("Solana Controller - not a transfer TX",{error:e,meta:B})}return[P,F]})),j(this,"isTokenTx",(e=>{var t,n;return null==(n=null==(t=null==e?void 0:e.meta)?void 0:t.preTokenBalances)?void 0:n[0]})),j(this,"getRentExemption",(()=>1e6)),this.connections=this.initConnection()}getOwnedTokens(e){return Promise.resolve([])}getFees(){throw"Method not implemented."}static validateAddress(e){try{return new u.nh(e),!0}catch(e){return!1}}initConnection(){var e;return new u.ew((null==(e=this.config.network.jsonRpcProviderUrl)?void 0:e.rpc)||(0,u.Wf)("devnet"),"confirmed")}reloadJsonRpcProvidersUrls(){this.config.network.jsonRpcProviderUrl=this.overridesDefaults(this.config.network.defaultRpc),this.connections=this.initConnection()}overridesDefaults(e){const{chains:t}=k.Z.getState().chains,n=t.find((e=>e.id===this.getId()));return n&&!(0,A.fp)(n.network.jsonRpcProviderUrl[T.NodeUrlKey.Rpc])?n.network.jsonRpcProviderUrl:e}checkCustomRpcUrl(e,t){return N(this,null,(function*(){var n,a;let s;try{s=yield f().post(t[T.NodeUrlKey.Rpc],{jsonrpc:"2.0",id:1,method:"getVersion"})}catch(e){C.Z.error(e),(0,r.Tb)(e)}if(!(null==(a=null==(n=null==s?void 0:s.data)?void 0:n.result)?void 0:a["solana-core"]))throw`Failed to set RPC for ${t} in ${e}`}))}handleVersionedTransaction(e,t,n){return N(this,null,(function*(){const a=u.EC.deserialize(e),r=new u.GS(a),s=r.message.serialize(),o=D().sign.detached(s,t.secretKey);return"signAndSendTransaction"===n&&(r.addSignature(new u.nh(t.publicKey),o),yield this.connections.sendRawTransaction(r.serialize())),{pubKey:t.publicKey.toString(),sig:y().encode(o)}}))}handleLegacyTransaction(e,t,n){return N(this,null,(function*(){const a=u.YW.populate(u.v0.from(e)),r=a.serializeMessage(),s=D().sign.detached(r,t.secretKey);return"signAndSendTransaction"===n&&(a.addSignature(new u.nh(t.publicKey),s),yield this.connections.sendRawTransaction(a.serialize())),{pubKey:t.publicKey.toString(),sig:y().encode(s)}}))}handleVerionedTransactionForLedger(e,t,n,a){return N(this,null,(function*(){const r=u.EC.deserialize(e),s=new u.GS(r),o=s.message.serialize(),i=yield(0,F.D)(T.WalletType.Ledger).solanaSignTransaction(t,o);return"signAndSendTransaction"===a&&(s.addSignature(new u.nh(n.publicKey),i),yield this.connections.sendRawTransaction(s.serialize())),{pubKey:n.publicKey,sig:y().encode(i)}}))}handleLegacyTransactionForLedger(e,t,n,a){return N(this,null,(function*(){const r=u.YW.populate(u.v0.from(e)),s=r.serializeMessage(),o=yield(0,F.D)(T.WalletType.Ledger).solanaSignTransaction(n,s);return"signAndSendTransaction"===a&&(r.addSignature(new u.nh(t),o),yield this.connections.sendRawTransaction(r.serialize())),{pubKey:t,sig:y().encode(o)}}))}getBalance(e){return N(this,null,(function*(){try{return(yield this.connections.getBalance(new u.nh(e))).toString()}catch(e){throw C.Z.error(`SolanaController getBalance ${e}`),(0,r.Tb)(e),e}}))}getOwnedSplTokens(e){return N(this,null,(function*(){const t=this.connections,n=new u.nh(e),a=yield t.getTokenAccountsByOwner(n,{programId:s.H_}),r=[];for(let e=0;e<a.value.length;e++){const t=a.value[e],n=o.p0.decode(t.account.data),s=new u.nh(n.mint).toString(),i=n.amount.toString();r.push({address:s,amount:i})}const l=[];return yield Promise.allSettled(r.map((e=>N(this,[e],(function*({address:e}){return yield(0,i.ih)(this.connections,new u.nh(e))}))))).then((e=>{var t;for(const n of e.values())if("fulfilled"===n.status){const e=n.value;l.push({chainId:this.getId(),isNativeAsset:!1,token:{id:e.address.toString(),symbol:`SPL-${e.address.toString()}`,address:e.address.toString(),decimals:e.decimals},balance:(null==(t=r.find((t=>t.address===e.address.toString())))?void 0:t.amount)||"0"})}})),l}))}getTokenBalance(e,t){return N(this,null,(function*(){const n=this.connections,a=new u.nh(t),r=yield n.getTokenAccountsByOwner(a,{programId:s.H_});for(let t=0;t<r.value.length;t++){const n=r.value[t],a=o.p0.decode(n.account.data);if(new u.nh(a.mint).toString()===e)return a.amount.toString()}return"0"}))}getTokenBalancesStateUpdate(e){return N(this,null,(function*(){var t,n;const{wallets:a}=k.Z.getState().wallets,r=this.getId(),{address:i}=null!=(n=null==(t=a[e])?void 0:t.chainData[r])?n:{};if(!i)return{walletId:e,chainId:r,tokenBalances:{}};const l=this.connections,d=new u.nh(i),c=yield l.getTokenAccountsByOwner(d,{programId:s.H_}),h={};for(let e=0;e<c.value.length;e++){const t=c.value[e],n=o.p0.decode(t.account.data),a=new u.nh(n.mint).toString(),r=n.amount.toString();h[null==a?void 0:a.toLowerCase()]={balance:r}}return{walletId:e,chainId:r,tokenBalances:h}}))}getTokenInfo(e){return this.masterController.assets.getTopTokensByChain(this.config.network.chainId).find((t=>t.address===e))}getTransactions(){return N(this,null,(function*(){var e,t,n,a;const{activeWalletId:r,wallets:s}=k.Z.getState().wallets,o=this.masterController.chains.getChainControllerById(this.getId());let i=(yield(0,P.f1)(r,this.getId())).blockNumber;i||(i=0);const l=null==(n=null==(t=null==(e=null==s?void 0:s[r])?void 0:e.chainData)?void 0:t[this.getId()])?void 0:n.address;if(!l)return;const d=new u.nh(l);try{if((yield this.connections.getSlot("confirmed"))<=i)return;const e=yield this.connections.getConfirmedSignaturesForAddress2(d,{limit:20},"confirmed"),t=(yield this.connections.getParsedTransactions(e.map((e=>e.signature)),{commitment:"confirmed",maxSupportedTransactionVersion:1})).filter((e=>!!e)).reduce(((t,n,a)=>{var r,s,i,d;try{const c=this.getTokenInfo((null==(i=null==(s=null==(r=null==n?void 0:n.meta)?void 0:r.preTokenBalances)?void 0:s[0])?void 0:i.mint)||""),h=this.getAction(l,n),u="send"===h[0],p=1e3*(null!=(d=null==n?void 0:n.blockTime)?d:0),f={hash:e[a].signature,from:"",to:"",amount:h[1].replace("-",""),isSender:u,icon:(null==c?void 0:c.image)||o.getConfig().image,symbol:c?c.symbol:"SOL",contractAddress:c?c.address:"",chainId:this.getId(),action:h[0],date:new Date(p),status:"successful"};t.push(f)}catch(e){C.Z.info("TEST",{e,parsedTx:n})}return t}),[]);return void(yield(0,P.h4)({walletId:r,chainId:this.getId(),transactions:t,blockNumber:null==(a=e[0])?void 0:a.slot}))}catch(e){C.Z.error("Solana Controller - getTransaction",{err:e})}}))}getAddress(e){if(!e.seed&&!e.pk||e.pk&&e.seed)throw"getAddress: Wrong arguments";if(e.pk){return{address:K(e.pk).publicKey.toString()}}if(e.seed){return{address:R(e.seed.seed.toBuffer(),e.seed.walletIndex,U.bip44Change,0).publicKey.toString()}}throw"getAddress: Wrong arguments"}getPrivateKey(e){if(!e.seed)throw"getPrivateKey: Wrong arguments";if(e.seed){const t=R(e.seed.toBuffer(),e.walletIndex,U.bip44Change,0);return Buffer.from(t.secretKey).toString("hex")}throw"getPrivateKey: wrong arguments"}validateAddress(e){try{return new u.nh(e),!0}catch(e){return!1}}getChainBalanceStateUpdate(e){return N(this,null,(function*(){var t,n;const{wallets:a}=k.Z.getState().wallets,{address:r}=null!=(n=null==(t=a[e])?void 0:t.chainData[this.getId()])?n:{};return r?{walletId:e,chainId:this.getId(),chainBalance:yield this.getBalance(r)}:{walletId:e,chainId:this.getId(),chainBalance:"0"}}))}updateBalance(e=k.Z.getState().wallets.activeWalletId){return new Promise(((t,n)=>{try{Promise.allSettled([this.getChainBalanceStateUpdate(e),this.getTokenBalancesStateUpdate(e)]).then((([e,a])=>{"fulfilled"===e.status?"fulfilled"===a.status?t({chainBalanceStateUpdate:e.value,tokenBalancesStateUpdate:a.value}):(C.Z.error({msg:"Sol error updating token balances",err:a}),t({chainBalanceStateUpdate:e.value})):(C.Z.error("Sol error updating chain balance"),n("Sol error updating chain balance"))}))}catch(e){C.Z.error(e),(0,r.Tb)(e),n(e)}}))}validateTx(e){return e?this.validateAddress(e)?{}:{toAddress:"Address is invalid"}:{toAddress:"Address is required"}}isSignMessage(e){return["signMessage"].includes(e.raw.method)}simulateTransaction(e,t,n){return N(this,null,(function*(){if(!n){const{wallets:e,activeWalletId:t}=k.Z.getState().wallets;n=[new u.nh(e[t].chainData[this.getId()].address)]}return this.connections.simulateTransaction(e,t,n)}))}sendTx(e,t,n){return N(this,null,(function*(){const{wallets:a}=k.Z.getState().wallets,r=a[t],o=new u.nh(e.fromAddress),i=this.connections,d=yield i.getRecentBlockhash();let c=new u.YW({feePayer:o,recentBlockhash:d.blockhash});const h=new u.nh(e.toAddress);switch(e.isToken||c.add(u.yc.transfer({fromPubkey:o,toPubkey:h,lamports:(0,w.parseUnits)(e.amount,9).toNumber()})),r.walletInfo.type){case T.WalletType.Keystore:{if(!n)throw`Missing credentials for wallet ${t}`;const a=r.walletInfo.data,s=n.walletPassword,l=R((yield(0,E.WR)(a.keystore,s)).toBuffer(),a.walletIndex,U.bip44Change,0);c=yield this._sendTxWithAccount(l,e,i,o,h,c);break}case T.WalletType.PkKeystore:{if(!n)throw`Missing credentials for wallet ${t}`;const a=r.walletInfo.data,s=n.walletPassword,l=yield(0,E.Jy)(a.keystore,s),d=K(E.Si.fromString(l).nspk.value.pk);c=yield this._sendTxWithAccount(d,e,i,o,h,c);break}case T.WalletType.Ledger:case T.WalletType.Trezor:const a=r.walletInfo.data,d=a.derivationPath.replace("X",a.walletIndex.toString()),p=a.address,f=new u.nh(p);if(e.isToken){const t=new u.nh(e.address),n={derivPath:d,address:p},[a,g]=yield Promise.all([this.getOrCreateAssociatedTokenAccountHW(r.walletInfo.type,i,n,t,o),this.getOrCreateAssociatedTokenAccountHW(r.walletInfo.type,i,n,t,h)]);c.add((0,l.$B)(a.address,g.address,f,b.O$.from((0,w.parseUnits)(e.amount,e.decimals)).toBigInt(),[],s.H_))}const g=c.serializeMessage(),m=yield(0,F.D)(r.walletInfo.type).solanaSignTransaction(d,g);c.addSignature(f,m);break;default:throw`sendTx not implemented for walletType ${r.walletInfo.type}`}const p=c.serialize();return i.sendRawTransaction(p)}))}_sendTxWithAccount(e,t,n,a,r,o){return N(this,null,(function*(){if(t.isToken){const i=new u.nh(t.address),[c,h]=yield Promise.all([(0,d._)(n,e,i,a),(0,d._)(n,e,i,r)]);o.add((0,l.$B)(c.address,h.address,e.publicKey,b.O$.from((0,w.parseUnits)(t.amount,t.decimals)).toBigInt(),[],s.H_))}const i=o.serializeMessage(),c=D().sign.detached(i,e.secretKey);return o.addSignature(e.publicKey,Buffer.from(c.buffer)),o}))}swap(e,t,n){return N(this,null,(function*(){const{wallets:a}=k.Z.getState().wallets,r=a[t],s=this.connections,o=Buffer.from(e.data,"base64");switch(r.walletInfo.type){case T.WalletType.Keystore:{if(!n)throw`Missing credentials for wallet ${t}`;const e=r.walletInfo.data,a=n.walletPassword,i=R((yield(0,E.WR)(e.keystore,a)).toBuffer(),e.walletIndex,U.bip44Change,0),l=u.GS.deserialize(o);l.sign([i]);const d=l.serialize();return yield s.sendRawTransaction(d)}case T.WalletType.PkKeystore:if(!n)throw`Missing credentials for wallet ${t}`;const e=r.walletInfo.data,a=n.walletPassword,i=yield(0,E.Jy)(e.keystore,a),l=K(E.Si.fromString(i).nspk.value.pk),d=u.GS.deserialize(o);d.sign([l]);const c=d.serialize();return yield s.sendRawTransaction(c);case T.WalletType.Ledger:case T.WalletType.Trezor:const h=r.walletInfo.data,p=h.derivationPath,f=h.address,g=new u.nh(f),m=(0,F.D)(r.walletInfo.type),y=yield m.solanaSignTransaction(p,o),v=u.GS.deserialize(o);v.addSignature(g,y);const b=v.serialize();return yield s.sendRawTransaction(b);default:throw`swap not implemented for walletType ${r.walletInfo.type}`}}))}approveDappTransaction(e,t,n,a){return N(this,null,(function*(){var r;C.Z.debug({msg:"approveDappTransaction",walletId:t,dappMessage:e,overrides:a});const{wallets:s}=k.Z.getState().wallets,o=s[t];if(this.getId()!==e.chainId)throw(0,x.t)("app:controller_errors.dapp_mesage_must_be_active_network");switch(o.walletInfo.type){case T.WalletType.Keystore:{if(!n)throw"approveDappTransaction: you must specify walletCredentials";const t=o.walletInfo.data,a=n.walletPassword,r=R((yield(0,E.WR)(t.keystore,a)).toBuffer(),t.walletIndex,U.bip44Change,0);return this.handlePayloadWithMessage(r,e.raw)}case T.WalletType.PkKeystore:{if(!n)throw"approveDappTransaction: you must specify walletCredentials";const t=o.walletInfo.data,a=n.walletPassword,r=yield(0,E.Jy)(t.keystore,a),s=K(E.Si.fromString(r).nspk.value.pk);return this.handlePayloadWithMessage(s,e.raw)}case T.WalletType.Ledger:{const t=o.walletInfo.data,n=t.address,a=t.derivationPath.replace("X",t.walletIndex.toString()),s=e.raw,i=s.method;switch(i){case"signMessage":throw"signMessage not supported for Ledger";case"signAndSendTransaction":{const e=y().decode(s.params.message);return"legacy"==u.EC.deserializeMessageVersion(e)?yield this.handleLegacyTransactionForLedger(e,n,a,i):yield this.handleVerionedTransactionForLedger(e,a,t,i)}case"signTransaction":{const e=y().decode(s.params.message);return"legacy"==u.EC.deserializeMessageVersion(e)?yield this.handleLegacyTransactionForLedger(e,n,a,i):yield this.handleVerionedTransactionForLedger(e,a,t,i)}case"signAllTransactions":if(!(0,I.isArray)(null==(r=s.params)?void 0:r.messages))throw`signAllTransactions params is not an array: ${s.params}`;const e=s.params.messages,o=[];if("legacy"==u.EC.deserializeMessageVersion(y().decode(e[0])))for(const t of e){const e=yield this.handleLegacyTransactionForLedger(y().decode(t),n,a,i);o.push(e)}else for(const n of e){const e=yield this.handleVerionedTransactionForLedger(y().decode(n),a,t,i);o.push(e)}return o;default:throw`Not implemented method ${i}`}}default:throw`approveDappTransaction(solana: not supported for walletType ${o.walletInfo.type}`}}))}handlePayloadWithMessage(e,t){return N(this,null,(function*(){var n;const a=t,r=a.method;switch(r){case"signMessage":{const t=y().decode(a.params.message),n=D().sign.detached(t,e.secretKey);return{pubKey:e.publicKey.toString(),sig:y().encode(n)}}case"signAndSendTransaction":case"signTransaction":{C.Z.info("payload.params.message",a.params.message);const t=y().decode(a.params.message);return"legacy"===u.EC.deserializeMessageVersion(t)?this.handleLegacyTransaction(t,e,r):this.handleVersionedTransaction(t,e,r)}case"signAllTransactions":if(!(0,I.isArray)(null==(n=a.params)?void 0:n.messages))throw`signAllTransactions params is not an array: ${a.params}`;const t=a.params.messages,s=[];if("legacy"==u.EC.deserializeMessageVersion(y().decode(t[0])))for(const n of t){const t=yield this.handleLegacyTransaction(y().decode(n),e,r);s.push(t)}else for(const n of t){const t=yield this.handleVersionedTransaction(y().decode(n),e,r);s.push(t)}return s;default:throw`Not implemented method ${r}`}}))}getOrCreateAssociatedTokenAccountHW(e,t,n,a,r){return N(this,arguments,(function*(e,t,n,a,r,l=!1,d,p,f=s.H_,g=s._u){const m=yield(0,i.Am)(a,r,l,f,g),y=new u.nh(n.address);let v;try{v=yield(0,o.D0)(t,m,d,f)}catch(s){if(!(s instanceof c.We||s instanceof c.Or))throw s;try{const t=this.connections,s=yield t.getRecentBlockhash(d),o=new u.YW({feePayer:y,recentBlockhash:s.blockhash}).add((0,h.E)(y,m,r,a,f,g)),i=o.serializeMessage(),l=yield(0,F.D)(e).solanaSignTransaction(n.derivPath,i);o.addSignature(y,l);const c=o.serialize();yield t.sendRawTransaction(c,p)}catch(e){C.Z.error("Solana Controller - getOrCreateAssociatedTokenAccountHW",e)}v=yield(0,o.D0)(t,m,d,f)}if(!v.mint.equals(a))throw new c.iT;if(!v.owner.equals(r))throw new c.bQ;return v}))}}const W=$;a()}catch(L){a(L)}}))},503402:(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{Z:()=>V});var r=n(489396),s=n(177616),o=n(264487),i=n(942274),l=n(7679),d=n(276749),c=n(129341),h=n(148771),u=n(409669),p=n.n(u),f=n(92882),g=n(244431),m=n.n(g),y=n(831352),v=n(882130),b=n(684880),w=n(30142),I=n(739989),C=n(343720),A=n.n(C),k=n(255357),T=n(847001),B=n(626423),S=n(42763),D=n(556138),x=n(605930),P=n(522933),E=n(46461),F=n(628790),_=n(803418),O=n(207928),Z=n(630292),Buffer=n(348764).Buffer,j=e([S,Z]);[S,Z]=j.then?(await j)():j;var N=Object.defineProperty,U=Object.defineProperties,R=Object.getOwnPropertyDescriptors,K=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable,W=Math.pow,L=(e,t,n)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,J=(e,t,n)=>(L(e,"symbol"!=typeof t?t+"":t,n),n),X=(e,t,n)=>new Promise(((a,r)=>{var s=e=>{try{i(n.next(e))}catch(e){r(e)}},o=e=>{try{i(n.throw(e))}catch(e){r(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,o);i((n=n.apply(e,t)).next())}));const q={[i.Network.Mainnet]:"44'/931'/0'/0/",[i.Network.Stagenet]:"44'/931'/0'/0/",[i.Network.Testnet]:"44'/931'/0'/0/"},H=String(Math.round(1.7*Number(c.Gm)));class z extends Z.NL{constructor(e){super(e),J(this,"hasSecondaryAssets",(()=>!1)),J(this,"getClient",(e=>X(this,null,(function*(){var t;const n=yield(0,c.LQ)(null!=(t=this.config.network.jsonRpcProviderUrl[D.NodeUrlKey.Node])?t:"issou");return new c.KU({network:(0,B.XL)(y.g5.Mainnet),phrase:e,chainIds:{[i.Network.Mainnet]:n,[i.Network.Stagenet]:n,[i.Network.Testnet]:n},clientUrl:{mainnet:this.getClientUrl(),stagenet:this.getClientUrl(),testnet:this.getClientUrl()}})})))),J(this,"sendTx",((e,t,n)=>X(this,null,(function*(){var a,r,s,o,i,l,u,p,f,g,y;if(!e.asset)throw(0,E.t)("app:controller_errors.asset_is_not_defined");const{wallets:v}=S.Z.getState().wallets,I=v[t],C=yield this.getClient(),A=yield this.getAccount(e.fromAddress),k={type:"thorchain/MsgSend",value:{amount:[{amount:(0,h.XZ)(new(m())(e.amount).multipliedBy(W(10,8))).amount().toString(),denom:(0,c.Ck)(e.asset)}],from_address:e.fromAddress,to_address:e.toAddress}},T={amount:[],gas:H},B=w.StdTx.fromJSON({msg:[k],fee:T,signatures:[],memo:e.memo});let x;switch(I.walletInfo.type){case D.WalletType.Keystore:{const e=I.walletInfo.data;if(!n)throw new Error("No credentials passed");const t=yield(0,d.decryptFromKeystore)(e.keystore,n.walletPassword),i=yield this.getClient(t),l=new b.PrivKeySecp256k1(Buffer.from(i.getPrivateKey(e.walletIndex).key)),c=w.auth.signStdTx(C.getCosmosClient().sdk,l,B,(null==(a=A.account_number)?void 0:a.toString())||"0",(null==(r=A.sequence)?void 0:r.toString())||"0");x=w.StdTx.fromJSON({msg:B.msg,fee:B.fee,memo:B.memo,signatures:[{pub_key:l.getPubKey(),sequence:(null==(s=A.sequence)?void 0:s.toString())||"0",signature:null==(o=null==c?void 0:c.signatures[0])?void 0:o.signature}]});break}case D.WalletType.PkKeystore:{const e=I.walletInfo.data;if(!n)throw new Error("No credentials passed");const t=yield(0,F.Jy)(e.keystore,n.walletPassword),a=JSON.parse(t),r=new b.PrivKeySecp256k1(Buffer.from(a.nspk.value.pk,"hex")),s=w.auth.signStdTx(C.getCosmosClient().sdk,r,B,(null==(i=A.account_number)?void 0:i.toString())||"0",(null==(l=A.sequence)?void 0:l.toString())||"0");x=w.StdTx.fromJSON({msg:B.msg,fee:B.fee,memo:B.memo,signatures:[{pub_key:r.getPubKey(),sequence:(null==(u=A.sequence)?void 0:u.toString())||"0",signature:null==(p=null==s?void 0:s.signatures[0])?void 0:p.signature}]});break}case D.WalletType.Ledger:case D.WalletType.Trezor:{const e=I.walletInfo.data,t=yield(0,_.D)(I.walletInfo.type).signTHORTransaction(e.derivationPath,e.walletIndex,B.getSignBytes(C.getChainId(),(null==(f=A.account_number)?void 0:f.toString())||"0",(null==(g=A.sequence)?void 0:g.toString())||"0"));x=w.StdTx.fromJSON({msg:B.msg,fee:B.fee,memo:B.memo,signatures:[{pub_key:b.PubKeySecp256k1.fromBase64(e.publicKey),sequence:(null==(y=A.sequence)?void 0:y.toString())||"0",signature:t}]});break}}const P=yield w.auth.txsPost(C.getCosmosClient().sdk,x,"sync");if(P.data.code){if(32===P.data.code||19===P.data.code)throw{title:"Transfer already in progress",message:"This transfer cannot be submitted while there is a pending transaction. Please wait a minute and try again."};throw new Error(P.data.raw_log)}return P.data.txhash})))),J(this,"signAndBroadcastTx",((e,t,n,a)=>X(this,null,(function*(){var r,s,o,i,l,h,u,p,f,g,m,y,v;const{wallets:C}=S.Z.getState().wallets,k=C[n];switch(I.Z.info("signAndBroadcastTx"),k.walletInfo.type){case D.WalletType.Keystore:{const n=k.walletInfo.data;if(!a)throw(0,E.t)("app:controller_errors.no_credentionals_passed");const u=yield(0,d.decryptFromKeystore)(n.keystore,a.walletPassword),p=yield this.getClient(u);if(!(0,c.dO)((null==(r=e.msg[0].value.coins)?void 0:r[0].asset)||(null==(s=e.msg[0].value.amount)?void 0:s[0].denom)||""))throw(0,E.t)("app:controller_errors.asset_is_not_defined");const f=w.StdTx.fromJSON({msg:e.msg,fee:e.fee,signatures:[],memo:e.memo}),g=yield this.getAccount(t),m=new b.PrivKeySecp256k1(Buffer.from(p.getPrivateKey(n.walletIndex).key)),y=w.auth.signStdTx(p.getCosmosClient().sdk,m,f,(null==(o=g.account_number)?void 0:o.toString())||"0",(null==(i=g.sequence)?void 0:i.toString())||"0"),v=w.StdTx.fromJSON({msg:f.msg,fee:f.fee,memo:f.memo,signatures:[{pub_key:m.getPubKey(),sequence:(null==(l=g.sequence)?void 0:l.toString())||"0",signature:null==(h=null==y?void 0:y.signatures[0])?void 0:h.signature}]}),I=(yield w.auth.txsPost(p.getCosmosClient().sdk,v,"block")).data;if(I.code){if(32===I.code||19===I.code)throw{title:"Transfer already in progress",message:"This transfer cannot be submitted while there is a pending transaction. Please wait a minute and try again."};throw new Error(I.raw_log)}if(I.txhash)return I.txhash;throw(0,E.t)("app:controller_errors.tx_failed")}case D.WalletType.PkKeystore:{const n=yield this.getClient(),r=k.walletInfo.data;if(!a)throw(0,E.t)("app:controller_errors.no_credentionals_passed");const s=yield(0,F.Jy)(r.keystore,a.walletPassword),o=F.Si.fromString(s),i=yield this.getAccount(t),l=w.StdTx.fromJSON({msg:e.msg,fee:e.fee,signatures:[],memo:e.memo}),d=new b.PrivKeySecp256k1(Buffer.from(o.nspk.value.pk,"hex")),c=w.auth.signStdTx(n.getCosmosClient().sdk,d,l,(null==(u=i.account_number)?void 0:u.toString())||"0",(null==(p=i.sequence)?void 0:p.toString())||"0"),h=w.StdTx.fromJSON({msg:l.msg,fee:l.fee,memo:l.memo,signatures:[{pub_key:d.getPubKey(),sequence:(null==(f=i.sequence)?void 0:f.toString())||"0",signature:null==(g=null==c?void 0:c.signatures[0])?void 0:g.signature}]}),m=(yield w.auth.txsPost(n.getCosmosClient().sdk,h,"block")).data;if(m.txhash)return m.txhash;throw(0,E.t)("app:controller_errors.tx_failed")}case D.WalletType.Ledger:{const t=yield this.getClient(),n=k.walletInfo.data,a=yield this.getAccount(n.address),r=w.StdTx.fromJSON({msg:e.msg,fee:e.fee,signatures:[],memo:e.memo}),s=yield(0,_.D)(k.walletInfo.type).signTHORTransaction(n.derivationPath,n.walletIndex,r.getSignBytes(t.getChainId(),(null==(m=a.account_number)?void 0:m.toString())||"0",(null==(y=a.sequence)?void 0:y.toString())||"0")),o=w.StdTx.fromJSON({msg:r.msg,fee:r.fee,memo:r.memo,signatures:[{pub_key:b.PubKeySecp256k1.fromBase64(n.publicKey),sequence:(null!=(v=a.sequence)?v:A().ZERO).toString(),signature:s}]}),i=(yield w.auth.txsPost(t.getCosmosClient().sdk,o,"block")).data;if(i.txhash)return i.txhash;throw(0,E.t)("app:controller_errors.tx_failed")}default:throw"Not supported"}}))))}getOwnedTokens(e){return Promise.resolve([])}getFees(){throw"Method not implemented."}reloadJsonRpcProvidersUrls(){this.config.network.jsonRpcProviderUrl=this.overridesDefaults(this.config.network.defaultRpc)}overridesDefaults(e){const t=e,{chains:n}=S.Z.getState().chains,a=n.find((e=>e.id===this.getId()));return a&&!(0,P.fp)(a.network.jsonRpcProviderUrl[D.NodeUrlKey.Rpc])&&(t[D.NodeUrlKey.Rpc]=a.network.jsonRpcProviderUrl[D.NodeUrlKey.Rpc]),a&&!(0,P.fp)(a.network.jsonRpcProviderUrl[D.NodeUrlKey.Node])&&(t[D.NodeUrlKey.Node]=a.network.jsonRpcProviderUrl[D.NodeUrlKey.Node]),t}getClientUrl(){return this.config.network.jsonRpcProviderUrl}checkCustomRpcUrl(e,t){return X(this,null,(function*(){var n,a,r,s;const i=t[D.NodeUrlKey.Rpc];let l;try{l=yield p().get(`${i}/genesis`)}catch(e){I.Z.error(e),(0,o.Tb)(e)}if("2022-03-22T01:38:16.219785087Z"!==(null==(r=null==(a=null==(n=null==l?void 0:l.data)?void 0:n.result)?void 0:a.genesis)?void 0:r.genesis_time))throw`Failed to set RPC for ${i} in ${e}: Genesis time unmatched`;const d=t[D.NodeUrlKey.Node];try{l=yield p().get(`${d}/thorchain/nodes`)}catch(e){I.Z.error(e),(0,o.Tb)(e)}if(void 0===(null==(s=null==l?void 0:l.data)?void 0:s.find((e=>{var t;return null==(t=null==e?void 0:e.node_address)?void 0:t.startsWith("thor")}))))throw`Failed to set Node for ${d} in ${e}: Chain ID does not match`}))}getLedgerClient({clientUrl:e}={}){const t=e?e[i.Network.Mainnet]:this.getClientUrl();if(!t.node)throw Error("Node URL cannot be empty");return new l.av({chainId:"thorchain-mainnet-v1",server:t.node,prefix:(0,c.Gn)(i.Network.Mainnet)})}validateTx(e){const t={};return""===e?t.toAddress="Address is required":this.validateAddress(e)||(t.toAddress="Address is not valid."),t}getAccount(e){return X(this,null,(function*(){return(yield this.getClient()).getCosmosClient().getAccount(e)}))}getAddress(e){if(!e.seed&&!e.pk||e.pk&&e.seed)throw"getAddress: Wrong arguments";if(e.pk){const t=this.getLedgerClient(),n=new r.Z.proto.cosmos.crypto.secp256k1.PrivKey({key:Buffer.from(e.pk,"hex")});return{address:t.getAddressFromPrivKey(n)}}if(e.seed){if(!e.seed)throw"Error getAddress thorchain";return{address:this.getLedgerClient().getAddressFromMnemonic(e.seed.seed.toString(),`44'/931'/0'/0/${e.seed.walletIndex}`)}}throw"getAddress: Wrong arguments"}getFullDerivationPath(e){return q?`${q[i.Network.Mainnet]}${e}`:""}getPrivateKey(e){if(!e.seed)throw"getPrivateKey: Wrong arguments";if(e.seed){const t=this.getLedgerClient().getPrivKeyFromMnemonic(e.seed.toString(),this.getFullDerivationPath(e.walletIndex));return Buffer.from(t.key.buffer).toString("hex")}throw"getPrivateKey: wrong arguments"}getBalance(e){return X(this,null,(function*(){const t=this.getLedgerClient();return(yield t.getBalance(e)).reduce(((e,t)=>{var n;if(!t.denom)return e;try{let a=(0,c.dO)(t.denom||"");const[r,s]=null==(n=t.denom)?void 0:n.toUpperCase().split("/");a||(a={synth:!0,chain:r,symbol:s,ticker:s.split("-")[0]}),a&&t.amount&&e.push({asset:a,amount:(0,h.XZ)(t.amount)})}catch(e){(0,o.Tb)({title:`Thorchain getBalance error with ${t.denom}`,error:e})}return e}),[])}))}getChainBalanceStateUpdate(e){return X(this,null,(function*(){try{const{wallets:t}=S.Z.getState().wallets,{address:n}=t[e].chainData[this.getId()],a=yield this.getBalance(n).then((e=>{const t=e.find((e=>(0,x.lA)(c.pM,e.asset)));return null==t?void 0:t.amount.amount().toString()}));return{walletId:e,chainId:this.getId(),chainBalance:a||"0"}}catch(e){throw I.Z.error(e),o.Tb(e),e}}))}getTokenBalancesStateUpdate(e){return X(this,null,(function*(){try{const{wallets:t}=S.Z.getState().wallets,n=t[e].chainData[this.getId()].address,a=t[e].chainData[this.getId()].tokens;let r={};const s=Object.values(a).map((e=>e.asset));return yield this.getBalance(n).then((e=>{I.Z.info("getTokenBalancesStateUpdate",{balances:e,tokenKeys:s}),e.map((e=>{var t;let n=s.find((t=>(0,x.lA)(t,e.asset)));var a,o;n||(n=s.find((t=>t.symbol===e.asset.symbol&&e.asset.symbol===e.asset.ticker&&t.ticker===e.asset.ticker))),n&&(a=((e,t)=>{for(var n in t||(t={}))M.call(t,n)&&L(e,n,t[n]);if(K)for(var n of K(t))$.call(t,n)&&L(e,n,t[n]);return e})({},r),o={[null==(t=(0,c.Ck)(n))?void 0:t.toLowerCase()]:{balance:null==e?void 0:e.amount.amount().toString()}},r=U(a,R(o)))}))})),{walletId:e,chainId:this.getId(),tokenBalances:r}}catch(e){throw I.Z.error({e}),o.Tb(e),e}}))}updateBalance(e=S.Z.getState().wallets.activeWalletId){return new Promise(((t,n)=>{try{Promise.allSettled([this.getChainBalanceStateUpdate(e),this.getTokenBalancesStateUpdate(e)]).then((([e,a])=>{"fulfilled"===e.status?"fulfilled"===a.status?t({chainBalanceStateUpdate:e.value,tokenBalancesStateUpdate:a.value}):(I.Z.error("Thorchain error updating token balances"),t({chainBalanceStateUpdate:e.value})):(I.Z.error("Thorchain error updating chain balance"),n("Thorchain error updating chain balance"))}))}catch(e){I.Z.error(e),o.Tb(e),n(e)}}))}validateAddress(e){return z.validateAddress(e)}static validateAddress(e){try{const t="thor";if(!e)return!1;const{words:n,prefix:a}=(0,f.decode)(e);return a===t&&32===n.length}catch(e){return!1}}approveDappTransaction(e,t,n){return X(this,null,(function*(){var a,r,s,o,i,l,d,c,h,u,p,f;const{wallets:g}=S.Z.getState().wallets,m=g[t];if(this.getId()!==e.chainId)throw(0,E.t)("app:controller_errors.dapp_mesage_must_be_active_network");const v=e.raw;if(!v)throw(0,E.t)("app:controller_errors.unable_to_get_wallet_address",{network:"Thotchain"});const I=null==(a=v.params)?void 0:a[0];if(!I)throw(0,E.t)("app:controller_errors.unable_to_get_wallet_address",{network:"Thotchain"});const C=Z.j8.getFromAccountIMessage(e);if(!C)throw(0,E.t)("app:controller_errors.unable_to_get_wallet_address");const k=this.getLedgerClient();switch(m.walletInfo.type){case D.WalletType.Keystore:case D.WalletType.PkKeystore:switch(v.method){case y.VO.Transfer:{const{asset:e,amount:a,recipient:s,memo:o="",gasLimit:i}=I;if(!e)throw Error((0,E.t)("app:controller_errors.invalid_asset"));const l={type:"thorchain/MsgSend",value:{amount:[{amount:a.amount.toString(),denom:null==(r=null==e?void 0:e.symbol)?void 0:r.toLowerCase()}],from_address:C,to_address:s}},d={amount:[],gas:i||H},c=w.StdTx.fromJSON({msg:[l],fee:d,signatures:[],memo:o});return this.signAndBroadcastTx(c,C,t,n)}case y.VO.Deposit:{const{amount:e,memo:a,gasLimit:r}=I;if(!I.asset)throw Error((0,E.t)("app:controller_errors.invalid_asset"));(null==(s=I.asset)?void 0:s.symbol)&&(I.asset=I.asset.symbol),"RUNE"===I.asset&&(I.asset="THOR.RUNE");const{asset:o}=I,i={type:"thorchain/MsgDeposit",value:{coins:[{asset:o,amount:e.amount.toString()}],memo:a,signer:C}},l={amount:[],gas:r||H},d=w.StdTx.fromJSON({msg:[i],fee:l,signatures:[],memo:i.value.memo});return this.signAndBroadcastTx(d,C,t,n)}default:throw"XDEFI Thorchain Method not supported"}case D.WalletType.Ledger:{const e=m.walletInfo.data,t=yield this.getAccount(e.address);if(!t)throw Error((0,E.t)("app:controller_errors.invalid_account"));switch(v.method){case y.VO.Transfer:{const{asset:n,amount:a,recipient:r,memo:s="",gasLimit:c}=I;if(!n)throw Error((0,E.t)("app:controller_errors.invalid_asset"));const h={type:"thorchain/MsgSend",value:{amount:[{amount:a.amount.toString(),denom:null==(o=null==n?void 0:n.symbol)?void 0:o.toLowerCase()}],from_address:C,to_address:r}},u={amount:[],gas:c||H},p=w.StdTx.fromJSON({msg:[h],fee:u,signatures:[],memo:s}),f=yield(0,_.D)(m.walletInfo.type).signTHORTransaction(e.derivationPath,e.walletIndex,p.getSignBytes(k.chainId,(null==(i=t.account_number)?void 0:i.toString())||"0",(null==(l=t.sequence)?void 0:l.toString())||"0")),g=new w.StdTx(p.msg,p.fee,[{pub_key:b.PubKeySecp256k1.fromBase64(e.publicKey),signature:f}],p.memo);return null!=(d=(yield w.auth.txsPost(k.sdk,g,"block")).data.txhash)?d:""}case y.VO.Deposit:{const{amount:n,memo:a,gasLimit:r}=I;if(!I.asset)throw Error((0,E.t)("app:controller_errors.invalid_asset"));(null==(c=I.asset)?void 0:c.symbol)&&(I.asset=I.asset.symbol),"RUNE"===I.asset&&(I.asset="THOR.RUNE");const{asset:s}=I,o={type:"thorchain/MsgDeposit",value:{coins:[{asset:s,amount:n.amount.toString()}],memo:a,signer:C}},i={amount:[],gas:r||H},l=w.StdTx.fromJSON({msg:[o],fee:i,signatures:[],memo:o.value.memo}),d=yield(0,_.D)(m.walletInfo.type).signTHORTransaction(e.derivationPath,e.walletIndex,l.getSignBytes(k.chainId,(null==(h=t.account_number)?void 0:h.toString())||"0",(null==(u=t.sequence)?void 0:u.toString())||"0")),g=w.StdTx.fromJSON({msg:l.msg,fee:l.fee,memo:l.memo,signatures:[{pub_key:b.PubKeySecp256k1.fromBase64(e.publicKey),sequence:(null!=(p=t.sequence)?p:A().ZERO).toString(),signature:d}]});return null!=(f=(yield w.auth.txsPost(k.sdk,g,"block")).data.txhash)?f:""}default:throw"XDEFI Thorchain Method not supported"}}default:throw`approveDappTransaction does not work with walletType ${m.walletInfo.type}`}}))}getFee(){return X(this,null,(function*(){var e,t,n;const a=null==(n=null==(t=null==(e=(yield(0,O.G)("cache-first")).data)?void 0:e.thorchain)?void 0:t.fee)?void 0:n.nativeTransactionFee;if(!a||isNaN(a)||a<0)throw Error(`Invalid fee: ${null==a?void 0:a.toString()}`);return(0,i.singleFee)(i.FeeType.FlatFee,(0,h.XZ)(a))}))}getTransactions(){return X(this,null,(function*(){var e,t,n;const{activeWalletId:a,wallets:r}=S.Z.getState().wallets,s=null==(n=null==(t=null==(e=null==r?void 0:r[a])?void 0:e.chainData)?void 0:t[this.getId()])?void 0:n.address;try{if(s)return yield this.handleThornodeTransactions(s,a),this.handleMidgardTransactions(s,a)}catch(e){I.Z.error(`thorchain transaction error: ${e}`)}}))}handleThornodeTransactions(e,t){return X(this,null,(function*(){const n=yield this.getClient(),a=yield n.getCosmosClient(),r=yield a.searchTxFromRPC({rpcEndpoint:this.config.network.jsonRpcProviderUrl.rpc,messageAction:void 0,transferRecipient:e,limit:25,txMaxHeight:void 0,txMinHeight:void 0}),s=yield a.searchTxFromRPC({rpcEndpoint:this.config.network.jsonRpcProviderUrl.rpc,messageAction:void 0,transferSender:e,limit:25,txMaxHeight:void 0,txMinHeight:void 0}),o=r.txs.concat(s.txs).sort(((e,t)=>e.height!==t.height?parseInt(t.height)>parseInt(e.height)?1:-1:e.hash!==t.hash?e.hash>t.hash?1:-1:0)).reduce(((e,t)=>[...e,...0===e.length||e[e.length-1].hash!==t.hash?[t]:[]]),[]).filter(((e,t)=>t<25));return this.processAndAddTransactions(o,e,a,t,0)}))}processAndAddTransactions(e,t,n,a,r,o=10){return X(this,null,(function*(){const i=yield Promise.all(e.filter(((e,t)=>t>=r&&t<r+o)).map((({hash:e})=>this.getTransactionData(e,t,n))));if(0===i.length)return;const l=i.reduce(((e,n)=>{var a,r;if(n){const o=(0,v.yp)(n,t),i=(0,s.formatUnits)(Number(n.amount?n.amount:(0,v.cV)(n,t)),8);if(e.push({date:new Date(n.date),from:n.from[0].from,to:n.to[0].to,action:o?"send":"receive",hash:n.hash,amount:i,status:"successful",symbol:"ETH"===n.asset.ticker?"WETH":null!=(a=n.asset.ticker)?a:this.config.tokenSymbol,isSender:o,icon:this.config.image,chainId:this.getId()}),n.memo){const t=this.decryptMemo(n.memo);t.asset.synth&&e.push({date:new Date(n.date),from:n.to[0].to,to:n.from[0].from,action:o?"receive":"send",hash:n.hash,amount:(0,s.formatUnits)(t.amount,8),status:"successful",symbol:"ETH"===t.asset.ticker?"WETH":null!=(r=t.asset.ticker)?r:this.config.tokenSymbol,isSender:!o,icon:this.config.image,chainId:this.getId()})}}return e}),[]);return l.length&&(yield(0,k.h4)({walletId:a,chainId:this.getId(),transactions:l})),this.processAndAddTransactions(e,t,n,a,r+o)}))}getTransactionData(e,t,n){return X(this,null,(function*(){var a,r,s,o,i,l,d,h,u,p,f,g,m,y,v,b,w,I,C,A,k,T,B;try{const S=yield n.txsHashGet(e),D=S&&S.logs?(0,c.RA)(S.logs,t):null;if(!S||!D)throw(0,E.t)("app:controller_errors.failed_to_get_tx_data",{txId:e});const{from:x,to:P,type:F}=D;return{memo:(null==(a=S.tx)?void 0:a.body.memo)?null==(r=S.tx)?void 0:r.body.memo:null==(i=null==(o=null==(s=S.tx)?void 0:s.body)?void 0:o.messages)?void 0:i[0].memo,amount:null!=(y=null==(u=null==(h=null==(d=null==(l=S.tx)?void 0:l.body)?void 0:d.messages)?void 0:h[0].coins)?void 0:u[0].amount)?y:null==(m=null==(g=null==(f=null==(p=S.tx)?void 0:p.body)?void 0:f.messages)?void 0:g[0].amount)?void 0:m[0].amount,hash:e,asset:this.getAsset(null!=(B=null==(I=null==(w=null==(b=null==(v=S.tx)?void 0:v.body)?void 0:b.messages)?void 0:w[0].coins)?void 0:I[0].asset)?B:null==(T=null==(k=null==(A=null==(C=S.tx)?void 0:C.body)?void 0:A.messages)?void 0:k[0].amount)?void 0:T[0].denom),from:x,to:P,date:new Date(S.timestamp),type:F}}catch(e){return}}))}handleMidgardTransactions(e,t){return X(this,null,(function*(){let n;try{n=yield p().get(`${T.Z.get("MIDGARD_API")}/v2/actions?address=${e}&type=swap,withdraw`).then((e=>e.data.actions));const a=n.filter((e=>{var t,n;return this.getAsset(null==(n=null==(t=e.out)?void 0:t[0].coins)?void 0:n[0].asset).symbol===this.getConfig().tokenSymbol}));return this.processMidgardTransactions(a,e,t)}catch(n){return this.processMidgardTransactions([],e,t)}}))}processMidgardTransactions(e,t,n){return X(this,null,(function*(){const a=e.reduce(((e,n)=>{const a=(0,s.formatUnits)(n.out[0].coins[0].amount,8);return e.push({date:new Date(Number(n.date)/1e6),from:t,to:t,action:"receive",hash:n.in[0].txID,amount:a,status:"successful",symbol:this.getConfig().tokenSymbol,isSender:!1,icon:this.getConfig().image,chainId:this.getId()}),e}),[]);a.length&&(yield(0,k.h4)({walletId:n,chainId:this.getId(),transactions:a}))}))}getAsset(e){if(!e)return c.pM;try{const t=(0,c.dO)(e);return t||c.pM}catch(e){return c.pM}}decryptMemo(e){const t=e.split(":");return{asset:this.getAsset(t[1]),amount:t[3]}}isSignMessage(){return!1}getTokenBalance(e,t){return I.Z.error({id:e,address:t}),new Promise((e=>e("0")))}}const V=z;a()}catch(e){a(e)}}))},666293:(e,t,n)=>{"use strict";n.d(t,{Gl:()=>l,HT:()=>o});const a=10,r=9,s=25,o=1e3,i=e=>{var t,n;return 41+((null==(t=e.witnessUtxo)?void 0:t.script)?null==(n=e.witnessUtxo)?void 0:n.script.length:107)};function l(e,t,n=null){const l=e.length>0?e.reduce(((e,t)=>e+i(t)),0)+e.length:0;let d=a+l+r+s+r+s;n&&(d+=r+n.length);const c=d*t;return c>o?c:o}},829419:(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{N:()=>B,Z:()=>x});var r=n(129341),s=n(696624),o=n(630292),i=n(623696),l=n(496486),d=n(150361),c=n.n(d),h=n(354061),u=n.n(h),p=n(831352),f=n(739989),g=n(519416),m=e([o,i]);[o,i]=m.then?(await m)():m;var y=Object.defineProperty,v=Object.defineProperties,b=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,A=(e,t,n)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,k=(e,t)=>{for(var n in t||(t={}))I.call(t,n)&&A(e,n,t[n]);if(w)for(var n of w(t))C.call(t,n)&&A(e,n,t[n]);return e},T=(e,t,n)=>(A(e,"symbol"!=typeof t?t+"":t,n),n);const B={topErc20:[],topBep20:[],topBnb:[],topPolygon:[],topTerra:[],topFantom:[],topArbitrum:[],topAvalanche:[],topSolana:[],topNear:[],topThorSynths:[],topAurora:[],axelar:[],cosmoshub:[],osmosis:[]},S=class{};let D=S;T(D,"formatTopAssets",((e,t)=>{return n=S,a=null,d=function*(){const n=g.browser.extension.getBackgroundPage().masterController.chains,a={};return(0,l.isEmpty)(e)&&(e=c()(B)),(0,s.each)((0,l.chunk)(t,1e3),(t=>new Promise((s=>{setTimeout((()=>{u()(t,((e,t)=>{try{(t.contracts||[]).forEach((s=>{var d,c;if(!s.scalingFactor||s.scalingFactor<1)return;const h={address:null!=(d=s.address)?d:"",id:t.id,contractId:s.id.toString(),image:t.icon,name:t.name,symbol:(null==s?void 0:s.symbol)||t.symbol,decimals:s.scalingFactor,marketCap:t.marketCap};switch(s.chain){case o.FE[p.yp.Ethereum]:S.addNewToken(e.topErc20,h,n.getChainControllerById(p.yp.Ethereum));break;case o.FE[p.yp.Binance]:S.addNewToken(e.topBnb,k(k({},h),h.address&&{address:null==(c=h.address)?void 0:c.toUpperCase()}),n.getChainControllerById(p.yp.Binance));break;case o.FE[p.yp.BinanceSmartChain]:S.addNewToken(e.topBep20,h,n.getChainControllerById(p.yp.BinanceSmartChain));break;case o.FE[p.yp.Polygon]:S.addNewToken(e.topPolygon,h,n.getChainControllerById(p.yp.Polygon));break;case o.FE[p.yp.Solana]:S.addNewToken(e.topSolana,h,n.getChainControllerById(p.yp.Solana));break;case o.FE[p.yp.Aurora]:S.addNewToken(e.topAurora,h,n.getChainControllerById(p.yp.Aurora));break;case o.FE[p.yp.Near]:S.addNewToken(e.topNear,h,n.getChainControllerById(p.yp.Near));break;case o.FE[p.yp.Avalanche]:S.addNewToken(e.topAvalanche,h,n.getChainControllerById(p.yp.Avalanche));break;case o.FE[p.yp.Fantom]:S.addNewToken(e.topFantom,h,n.getChainControllerById(p.yp.Fantom));break;case o.FE[p.yp.Arbitrum]:S.addNewToken(e.topArbitrum,h,n.getChainControllerById(p.yp.Arbitrum));break;case o.FE[p.yp.Terra]:const d=t.name&&i.ql[t.name]?t.name:null,f=(u=k({},h),v(u,b({denom:d})));S.addNewToken(e.topTerra,f,n.getChainControllerById(p.yp.Terra));break;case o.FE[p.yp.Thorchain]:const g=(0,r.dO)((null==s?void 0:s.address)||"");if(!g||!g.synth)break;const m={decimals:s.scalingFactor,address:s.address,contractId:s.id.toString(),id:t.id,asset:g,symbol:(null==s?void 0:s.symbol)||t.symbol,image:t.icon,chainId:n.getChainControllerById(p.yp.Thorchain).getId(),name:t.name,marketCap:t.marketCap},[y,w]=s.address.split("/");if(y===w)break;S.addNewToken(e.topThorSynths,m,n.getChainControllerById(p.yp.Thorchain));break;default:const I=(0,l.findKey)(o.FE,(e=>e===s.chain));if(I){const t=n.getChainControllerById(I);void 0===e[I]&&(e[I]=[]),S.addNewToken(e[I],h,t);break}a[s.chain]?a[s.chain]=a[s.chain]+1:a[s.chain]=1}var u}))}catch(e){f.Z.debug(e)}return e}),e),s()}),100)})))).then((()=>{f.Z.warn("formatTopAssets unused asset per chain",{unusedChains:a})}))},new Promise(((e,t)=>{var r=e=>{try{o(d.next(e))}catch(e){t(e)}},s=e=>{try{o(d.throw(e))}catch(e){t(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,s);o((d=d.apply(n,a)).next())}));var n,a,d})),T(D,"addNewToken",((e,t,n)=>{var a;(null==(a=t.symbol)?void 0:a.toUpperCase())!==n.getConfig().tokenSymbol&&e.findIndex((e=>e.contractId===t.contractId))<0&&e.findIndex((e=>{var n,a;return(null==(n=e.address)?void 0:n.toLowerCase())===(null==(a=t.address)?void 0:a.toLowerCase())}))<0&&e.push(t)})),T(D,"formatTokenToSearchToken",((e,t)=>u()(e,((e,n)=>(n.symbol!==t.getConfig().tokenSymbol&&e.push({token:n,chainId:t.getId(),isNativeAsset:"denom"in n&&!!n.denom}),e)),[])));const x=D;a()}catch(e){a(e)}}))},806025:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var a=n(740661),r=n(446010),s=n(739989),o=n(496486),i=Object.defineProperty,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const u=e=>{const t=((e,t)=>{for(var n in t||(t={}))d.call(t,n)&&h(e,n,t[n]);if(l)for(var n of l(t))c.call(t,n)&&h(e,n,t[n]);return e})({},e);return(0,o.forEach)(e,(e=>{(0,o.forEach)(e.chainData,(e=>{(0,o.forEach)(e,(e=>{void 0===e.nativeTokenVisible&&(e.nativeTokenVisible=!0)}))}))})),t},p=e=>{s.Z.info("v0:",e);const{type:t,masterKey:n,accounts:o}=e;o.wallets=u(o.wallets);const i={version:1,type:t,criticalData:{masterKey:n,accountKeys:[]},accounts:o,settings:r.E3,dapps:a.E3};return s.Z.info("v1: ",i),i}},294729:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var a=n(739989),r=n(496486),s=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))d.call(t,n)&&h(e,n,t[n]);if(l)for(var n of l(t))c.call(t,n)&&h(e,n,t[n]);return e},p=(e,t)=>o(e,i(t));const f=e=>{const t=e,{accounts:n}=t,s=((e,t)=>{var n={};for(var a in e)d.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&l)for(var a of l(e))t.indexOf(a)<0&&c.call(e,a)&&(n[a]=e[a]);return n})(t,["accounts"]);var o;o=n.wallets,(0,r.forEach)(o,(e=>{(0,r.forEach)(e.chainData,(e=>{(0,r.forEach)(e,(e=>{e.isNativeTokenPinned=!1,e.tokens=Object.keys(e.tokens).reduce(((t,n)=>(t[n]=p(u({},e.tokens[n]),{isPinned:!1}),t)),{})}))}))}));const i=p(u({},s),{accounts:n});return a.Z.info("v10: ",i),i}},80936:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var a=n(496486),r=n(831352),s=n(739989),o=Object.defineProperty,i=Object.defineProperties,l=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&u(e,n,t[n]);if(d)for(var n of d(t))h.call(t,n)&&u(e,n,t[n]);return e},f=(e,t)=>i(e,l(t));const g=e=>{const t=e,{accounts:n}=t,o=((e,t)=>{var n={};for(var a in e)c.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&d)for(var a of d(e))t.indexOf(a)<0&&h.call(e,a)&&(n[a]=e[a]);return n})(t,["accounts"]);var i;i=n.wallets,(0,a.forEach)(i,(e=>{var t,n;(0,a.forEach)(e.chainData,(e=>{(0,a.forEach)(e,(e=>{e.isNativeTokenPinned=!1,e.tokens=Object.keys(e.tokens).reduce(((t,n)=>(t[n]=f(p({},e.tokens[n]),{isPinned:!1}),t)),{})}))})),(null==(n=null==(t=e.chainData[r.g5.Mainnet])?void 0:t[r.yp.Ethereum])?void 0:n.tokens)&&Object.keys(e.chainData[r.g5.Mainnet][r.yp.Ethereum].tokens).forEach((t=>{"0x72b886d09c117654ab7da13a14d603001de0b777"===e.chainData[r.g5.Mainnet][r.yp.Ethereum].tokens[t].address&&delete e.chainData[r.g5.Mainnet][r.yp.Ethereum].tokens[t]})),e.sentNFTIDs={},e.imported=!0}));const l=f(p({},o),{accounts:n});return s.Z.info("v11: ",l),l}},192853:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var a=n(739989),r=n(679180),s=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))d.call(t,n)&&h(e,n,t[n]);if(l)for(var n of l(t))c.call(t,n)&&h(e,n,t[n]);return e},p=(e,t)=>o(e,i(t));const f=e=>{const t=(0,r.C)(e.accounts.wallets),n=p(u({},e),{accounts:p(u({},e.accounts),{wallets:t})});return a.Z.info("v12: ",n),n}},789517:(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{Z:()=>g});var r=n(739989),s=n(926254),o=n(281672),i=e([o]);o=(i.then?(await i)():i)[0];var l=Object.defineProperty,d=Object.defineProperties,c=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,f=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const g=e=>{const t=(0,o.JB)(),n=e.accounts,{addressBook:a}=n,i=((e,t)=>{var n={};for(var a in e)u.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&h)for(var a of h(e))t.indexOf(a)<0&&p.call(e,a)&&(n[a]=e[a]);return n})(n,["addressBook"]);(0,s.P)(i.wallets,t);const l=(g=((e,t)=>{for(var n in t||(t={}))u.call(t,n)&&f(e,n,t[n]);if(h)for(var n of h(t))p.call(t,n)&&f(e,n,t[n]);return e})({},e),m={accounts:i,contacts:(0,s.D)(a)},d(g,c(m)));var g,m;return r.Z.info("v13: ",l),l};a()}catch(e){a(e)}}))},379697:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var a=n(739989),r=n(831352),s=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const u="terraclassic",p=(e,t)=>{e.contacts[t]=e.contacts[t].map((e=>{const t=e.chainList.filter((e=>e.chainId!==u));return n=((e,t)=>{for(var n in t||(t={}))d.call(t,n)&&h(e,n,t[n]);if(l)for(var n of l(t))c.call(t,n)&&h(e,n,t[n]);return e})({},e),o(n,i({chainList:t}));var n}))},f=e=>{Object.values(r.g5).forEach((t=>{p(e,t),((e,t)=>{Object.keys(e.nftBalances).forEach((n=>{var a,r;(null==(r=null==(a=e.nftBalances[n])?void 0:a[t])?void 0:r[u])&&delete e.nftBalances[n][t][u]}))})(e,t),((e,t)=>{Object.keys(e.accounts.wallets).forEach((n=>{var a,r;(null==(r=null==(a=e.accounts.wallets[n].chainData)?void 0:a[t])?void 0:r[u])&&delete e.accounts.wallets[n].chainData[t][u]}))})(e,t)})),(e=>{e.settings.activeAssetChain="all",e.settings.activeNFTChain="all",e.settings.activeNFTChains=[],e.settings.activeAssetChains=[]})(e)};var g=Object.defineProperty,m=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,b=(e,t,n)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const w=e=>{f(e);const t=((e,t)=>{for(var n in t||(t={}))y.call(t,n)&&b(e,n,t[n]);if(m)for(var n of m(t))v.call(t,n)&&b(e,n,t[n]);return e})({},e);return a.Z.info("v14: ",t),t}},59589:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var a=n(739989),r=n(597247),s=Object.defineProperty,o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const c=e=>{(0,r.b0)(e.accounts.wallets);const t=((e,t)=>{for(var n in t||(t={}))i.call(t,n)&&d(e,n,t[n]);if(o)for(var n of o(t))l.call(t,n)&&d(e,n,t[n]);return e})({},e);return a.Z.info("v15: ",t),t}},403694:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var a=n(739989),r=n(700099),s=Object.defineProperty,o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const c=e=>{(0,r.i)(e.accounts.wallets);const t=((e,t)=>{for(var n in t||(t={}))i.call(t,n)&&d(e,n,t[n]);if(o)for(var n of o(t))l.call(t,n)&&d(e,n,t[n]);return e})({},e);return a.Z.info("v16: ",t),t}},888246:(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{Z:()=>m});var r=n(739989),s=n(281672),o=n(626423),i=e([s]);s=(i.then?(await i)():i)[0];var l=Object.defineProperty,d=Object.defineProperties,c=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,f=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))u.call(t,n)&&f(e,n,t[n]);if(h)for(var n of h(t))p.call(t,n)&&f(e,n,t[n]);return e};const m=e=>{const t=(0,s.JB)();Object.keys(e.accounts.wallets).forEach((n=>{const a=e.accounts.wallets[n];Object.keys(a.chainData).forEach((r=>{const s=a.chainData[r];Object.keys(s).forEach((a=>{const i=s[a].tokens,l=Object.keys(i);l.length>0&&l.forEach((s=>{const l=t.getUpdateTokenId((0,o.Bw)(a),i[s]);var h,u;(null==l?void 0:l.contractId)&&(e.accounts.wallets[n].chainData[r][a].tokens[l.contractId]=(h=g({},e.accounts.wallets[n].chainData[r][a].tokens[s]),u={contractId:l.contractId},d(h,c(u))),delete e.accounts.wallets[n].chainData[r][a].tokens[s])}))}))}))}));const n=g({},e);return r.Z.info("v17: ",n),n};a()}catch(e){a(e)}}))},606490:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var a=n(739989),r=n(831352),s=n(407717),o=Object.defineProperty,i=Object.defineProperties,l=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const p=e=>{(0,s.j)(e.accounts.wallets),e.accounts.activeWalletId=Object.keys(e.accounts.wallets)[0];const t=(n=((e,t)=>{for(var n in t||(t={}))c.call(t,n)&&u(e,n,t[n]);if(d)for(var n of d(t))h.call(t,n)&&u(e,n,t[n]);return e})({},e),o={contacts:e.contacts[r.g5.Mainnet],chainConfigs:{}},i(n,l(o)));var n,o;return a.Z.info("v18: ",t),t}},858495:(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{Z:()=>o});var r=n(46994),s=e([r]);r=(s.then?(await s)():s)[0];const o=e=>{const t=(0,r.g)(JSON.stringify(e)),n=JSON.parse(t);return(0,r.A)(n.accounts.wallets,Object.values(e.chainConfigs)),n};a()}catch(e){a(e)}}))},18687:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var a=n(739989),r=Object.defineProperty,s=Object.defineProperties,o=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,c=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&c(e,n,t[n]);if(i)for(var n of i(t))d.call(t,n)&&c(e,n,t[n]);return e},u=(e,t)=>s(e,o(t));const p=e=>{const t=u(h({},e),{settings:u(h({},e.settings),{minBalance:0,internalUpgradeRequired:!0})});return a.Z.info("v6: ",t),t}},416645:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var a=n(739989),r=Object.defineProperty,s=Object.defineProperties,o=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,c=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&c(e,n,t[n]);if(i)for(var n of i(t))d.call(t,n)&&c(e,n,t[n]);return e},u=(e,t)=>s(e,o(t));const p=e=>{var t;const n=u(h({},e),{accounts:u(h({},e.accounts),{addressBook:(null==(t=e.accounts)?void 0:t.addressBook)||{}})});return a.Z.info("v7: ",n),n}},53307:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(739989),r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;const i=e=>{const t=e,{dapps:n}=t,i=((e,t)=>{var n={};for(var a in e)s.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&r)for(var a of r(e))t.indexOf(a)<0&&o.call(e,a)&&(n[a]=e[a]);return n})(t,["dapps"]);return a.Z.info("v8: ",i),i}},58572:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var a=n(739989),r=n(496486),s=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const u=e=>{const t=e,{accounts:n}=t,s=((e,t)=>{var n={};for(var a in e)d.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&l)for(var a of l(e))t.indexOf(a)<0&&c.call(e,a)&&(n[a]=e[a]);return n})(t,["accounts"]);var u;u=n.wallets,(0,r.forEach)(u,(e=>{(0,r.forEach)(e.chainData,(e=>{(0,r.forEach)(e,(e=>{e.recentSentAddresses=[]}))}))}));const p=(f=((e,t)=>{for(var n in t||(t={}))d.call(t,n)&&h(e,n,t[n]);if(l)for(var n of l(t))c.call(t,n)&&h(e,n,t[n]);return e})({},s),o(f,i({accounts:n})));var f;return a.Z.info("v9: ",p),p}},133156:(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{JC:()=>x,YY:()=>P,gb:()=>D});var r=n(496486),s=n(739989),o=n(204147),i=n(806025),l=n(842586),d=n(96699),c=n(122375),h=n(778435),u=n(18687),p=n(416645),f=n(53307),g=n(58572),m=n(294729),y=n(80936),v=n(192853),b=n(789517),w=n(379697),I=n(59589),C=n(403694),A=n(888246),k=n(606490),T=n(858495),B=n(944593),S=e([b,A,T]);[b,A,T]=S.then?(await S)():S;const D=e=>{let t=e.version||0,n=(0,r.cloneDeep)(e);const a=[i.Z,l.Z,d.ZP,c.Z,h.Z,u.Z,p.Z,f.Z,g.Z,m.Z,y.Z,v.Z,b.Z,w.Z,I.Z,C.Z,A.Z,k.Z,T.Z];for(;t<o.du;){try{n=a[t](n)}catch(e){s.Z.error(`v${t}: backup migration error:`,e)}++t}return n},x=e=>{if(0===(e.version||0)){const{masterKey:t,accounts:n}=e,{wallets:a}=n;return{masterKey:t,accountKeys:Object.keys(a).map((e=>a[e].walletInfo.data))}}return e.criticalData},P=e=>{let t=e.version||1,n=(0,r.cloneDeep)(e);const a=[B.Z];for(;t<o.Wf;){try{n=a[t-1](n)}catch(e){s.Z.error("Backup migration error:",e)}++t}return n};a()}catch(e){a(e)}}))},539441:(e,t,n)=>{"use strict";n.d(t,{J:()=>a});var a=(e=>(e[e.ByPassword=0]="ByPassword",e[e.BySeedPhrase=1]="BySeedPhrase",e))(a||{})},944593:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var a=n(957557),r=n.n(a),s=n(766678),o=n.n(s),i=n(739989),l=Object.defineProperty,d=Object.defineProperties,c=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,f=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const g=e=>{i.Z.info("v0:",e);const{type:t,label:n}=o()(e);return a=((e,t)=>{for(var n in t||(t={}))u.call(t,n)&&f(e,n,t[n]);if(h)for(var n of h(t))p.call(t,n)&&f(e,n,t[n]);return e})({},e),s={version:2,rootKeystore:r()(e,["type","label"]),accountIndices:[0],type:t,rootLabel:n.replace("Account","Wallet")},d(a,c(s));var a,s}},207928:(e,t,n)=>{"use strict";n.d(t,{G:()=>s});var a=n(459457);const r=n(357786).Ps`
  query ThorchainFees {
    thorchain {
      fee {
        nativeTransactionFee
        outboundTransactionFee
      }
    }
  }
`,s=e=>a.Lp.query({query:r,fetchPolicy:e})},33802:(e,t,n)=>{"use strict";n.d(t,{v:()=>s});var a=n(459457);const r=n(357786).Ps`
  query AllAssets($page: ConnectionArgs!, $filter: AllAssetsFilter) {
    assets {
      allAssets(page: $page, filter: $filter) {
        page {
          edges {
            node {
              id
              symbol
              price {
                amount
                scalingFactor
              }
              type
            }
          }
        }
      }
    }
  }
`;const s=e=>{return t=void 0,n=null,s=function*(){return a.Lp.query({query:r,fetchPolicy:"network-only",variables:{filter:{ids:e},page:{first:1e3}}})},new Promise(((e,a)=>{var r=e=>{try{i(s.next(e))}catch(e){a(e)}},o=e=>{try{i(s.throw(e))}catch(e){a(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,o);i((s=s.apply(t,n)).next())}));var t,n,s}},667730:(e,t,n)=>{"use strict";n.d(t,{V:()=>p});var a=n(24797),r=n(459457),s=n(428760),o=Object.defineProperty,i=Object.defineProperties,l=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const p=e=>{return t=void 0,n=[e],o=function*({after:e,fetchPolicy:t="cache-only"}){const n=(o=((e,t)=>{for(var n in t||(t={}))c.call(t,n)&&u(e,n,t[n]);if(d)for(var n of d(t))h.call(t,n)&&u(e,n,t[n]);return e})({},e&&{after:e}),i(o,l({queryOptions:{fetchPolicy:t}})));var o;return{tokens:yield(0,a.o)(r.Lp,s.$F,n,!0),cryptoCurrencies:yield(0,a.o)(r.Lp,s.HJ,n,!0),compositeTokens:[]}},new Promise(((e,a)=>{var r=e=>{try{i(o.next(e))}catch(e){a(e)}},s=e=>{try{i(o.throw(e))}catch(e){a(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,s);i((o=o.apply(t,n)).next())}));var t,n,o}},703033:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});var a=n(24797),r=n(459457),s=n(428760);const o=()=>{return e=void 0,t=null,n=function*(){return{fiatCurrencies:yield(0,a.o)(r.Lp,s.BM,{queryOptions:{fetchPolicy:"cache-first"}},!0)}},new Promise(((a,r)=>{var s=e=>{try{i(n.next(e))}catch(e){r(e)}},o=e=>{try{i(n.throw(e))}catch(e){r(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,o);i((n=n.apply(e,t)).next())}));var e,t,n}},247210:(e,t,n)=>{"use strict";n.d(t,{$:()=>i});var a=n(459457),r=n(357786),s=n(882591);const o=e=>r.Ps`
  query getOwnedAssets($address: String!) {
    ${s.u[e]} {
        balances(address: $address) {
            asset {
              contract
            }
            amount {
              value
            } 
        }
    }
  }
`;const i=e=>{return t=void 0,n=[e],r=function*({chainId:e,address:t}){return a.Lp.query({query:o(e),fetchPolicy:"network-only",variables:{address:t}})},new Promise(((e,a)=>{var s=e=>{try{i(r.next(e))}catch(e){a(e)}},o=e=>{try{i(r.throw(e))}catch(e){a(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,o);i((r=r.apply(t,n)).next())}));var t,n,r}},809739:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});var a=n(459457),r=n(357786);const s=e=>r.Ps`
  query getFee {
    ${e} {
      fee {
        low
        medium
        high
      }
    }
  }
`;const o=e=>{return t=void 0,n=null,r=function*(){return a.Lp.query({query:s(e),fetchPolicy:"network-only"})},new Promise(((e,a)=>{var s=e=>{try{i(r.next(e))}catch(e){a(e)}},o=e=>{try{i(r.throw(e))}catch(e){a(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,o);i((r=r.apply(t,n)).next())}));var t,n,r}},705891:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});var a=n(739989),r=n(459457);const s=n(357786).Ps`
  mutation postTransactonHash(
    $routeId: String!
    $tradeId: String!
    $transactionHash: String!
  ) {
    transactionHashV2(
      routeId: $routeId
      tradeId: $tradeId
      transactionHash: $transactionHash
    )
  }
`,o=e=>(a.Z.info(e),r.Lp.mutate({mutation:s,variables:e}))},287455:(e,t,n)=>{"use strict";n.d(t,{to:()=>h,E_:()=>g,aW:()=>p,Wt:()=>u,v9:()=>f});var a=n(459457),r=n(357786);const s=r.Ps`
  fragment NftDataV2 on NFTv2 {
    collection {
      address
    }
    balance {
      value
      scalingFactor
    }
    description
    id
    lastSale {
      fiatPrice {
        value
        scalingFactor
      }
      cryptoPrice {
        value
        scalingFactor
      }
      quantity {
        value
        scalingFactor
      }
    }
    media {
      type
      url
    }
    name
  }
`,o=r.Ps`
  fragment LegacyNftData on NFTv3 {
    collection {
      address
    }
    attributes {
      displayType
      traitType
      value
    }
    balance {
      scalingFactor
      value
    }
    description
    id
    media {
      contentType
      type
      url
    }
    name
    owner
    location
    symbol
    lastSale {
      fiatPrice {
        value
        scalingFactor
      }
      cryptoPrice {
        value
        scalingFactor
      }
      quantity {
        value
        scalingFactor
      }
    }
    contractType
    isNftSpam
  }
`,i=r.Ps`
  query NFTS($bitcoinAddress: String!) {
    bitcoin {
      legacyNFTs(address: $bitcoinAddress) {
        ...LegacyNftData
      }
    }
  }
  ${o}
`,l=r.Ps`
  query NFTS($junoAddress: String!) {
    juno {
      nfts(address: $junoAddress) {
        ...NftDataV2
      }
    }
  }
  ${s}
`,d=r.Ps`
  query NFTS($stargazeAddress: String!) {
    stargaze {
      nfts(address: $stargazeAddress) {
        ...NftDataV2
      }
    }
  }
  ${s}
`,c=r.Ps`
  query NFTS($solanaAddress: String!) {
    solana {
      legacyNFTs(address: $solanaAddress) {
        ...LegacyNftData
      }
    }
  }
  ${o}
`,h=e=>a.Lp.query({query:i,fetchPolicy:"no-cache",variables:{bitcoinAddress:e}}),u=e=>a.Lp.query({query:c,fetchPolicy:"no-cache",variables:{solanaAddress:e}}),p=e=>a.Lp.query({query:l,fetchPolicy:"no-cache",variables:{junoAddress:e}}),f=e=>a.Lp.query({query:d,fetchPolicy:"no-cache",variables:{stargazeAddress:e}}),g=e=>a.Lp.query({query:r.Ps`
  query NFTS($evmAddress: String!) {
    arbitrum {
      legacyNFTs(address: $evmAddress) {
        ...LegacyNftData
      }
    }
    aurora {
      legacyNFTs(address: $evmAddress) {
        ...LegacyNftData
      }
    }
    avalanche {
      legacyNFTs(address: $evmAddress) {
        ...LegacyNftData
      }
    }
    fantom {
      legacyNFTs(address: $evmAddress) {
        ...LegacyNftData
      }
    }
    binanceSmartChain {
      legacyNFTs(address: $evmAddress) {
        ...LegacyNftData
      }
    }
    cronosEVM {
      legacyNFTs(address: $evmAddress) {
        ...LegacyNftData
      }
    }
    ethereum {
      legacyNFTs(address: $evmAddress) {
        ...LegacyNftData
      }
    }
    polygon {
      legacyNFTs(address: $evmAddress) {
        ...LegacyNftData
      }
    }
    cantoEVM {
      legacyNFTs(address: $evmAddress) {
        ...LegacyNftData
      }
    }
    optimism {
      legacyNFTs(address: $evmAddress) {
        ...LegacyNftData
      }
    }
    gnosis {
      legacyNFTs(address: $evmAddress) {
        ...LegacyNftData
      }
    }
  }
  ${o}
`,fetchPolicy:"no-cache",variables:{evmAddress:e}})},428760:(e,t,n)=>{"use strict";n.d(t,{$F:()=>r,BM:()=>o,HJ:()=>s});var a=n(357786);const r=a.Ps`
  query Tokens1(
    $page: ConnectionArgs!
    $after: DateTime
    $filter: TokenFilter
  ) {
    assets {
      tokens(page: $page, after: $after, filter: $filter) {
        pageData {
          count
          limit
          offset
        }
        page {
          pageInfo {
            endCursor
            hasNextPage
          }
          edges {
            node {
              id
              name
              symbol
              icon
              marketCap
              price {
                amount
                scalingFactor
              }
              contracts {
                symbol
                scalingFactor
                address
                chain
                id
              }
            }
          }
        }
      }
    }
  }
`,s=a.Ps`
  query CryptoCurrencies(
    $page: ConnectionArgs!
    $after: DateTime
    $filter: CryptoCurrencyFilter
  ) {
    assets {
      cryptoCurrencies(page: $page, after: $after, filter: $filter) {
        pageData {
          count
          limit
          offset
        }
        page {
          pageInfo {
            endCursor
            hasNextPage
          }
          edges {
            node {
              id
              name
              symbol
              icon
              price {
                amount
                scalingFactor
              }
              marketCap
              scalingFactor
              chain
            }
          }
        }
      }
    }
  }
`,o=a.Ps`
  query FiatCurrencies(
    $filter: FiatCurrencyFilter
    $after: DateTime
    $page: ConnectionArgs!
  ) {
    assets {
      fiatCurrencies(filter: $filter, after: $after, page: $page) {
        pageData {
          count
          limit
          offset
        }
        page {
          pageInfo {
            endCursor
            hasNextPage
          }
          edges {
            node {
              id
              name
              symbol
              scalingFactor
              character
              price {
                amount
                scalingFactor
              }
            }
          }
        }
      }
    }
  }
`;a.Ps`
  query CompositeTokens(
    $page: ConnectionArgs!
    $after: DateTime
    $filter: CompositeTokenFilter
  ) {
    assets {
      compositeTokens(page: $page, after: $after, filter: $filter) {
        pageData {
          count
          limit
          offset
        }
        page {
          pageInfo {
            endCursor
            hasNextPage
          }
          edges {
            node {
              id
              name
              symbol
              icon
              price {
                amount
                scalingFactor
              }
              scalingFactor
              address
              chain
              protocol {
                name
                symbol
                icon
              }
              contract {
                symbol
                scalingFactor
                address
                chain
              }
            }
          }
        }
      }
    }
  }
`},989508:(e,t,n)=>{"use strict";n.d(t,{q:()=>a});const a=n(357786).Ps`
  subscription Prices($ids: [String!]) {
    price(ids: $ids) {
      id
      price {
        amount
        scalingFactor
      }
    }
  }
`},701120:(e,t,n)=>{"use strict";n.d(t,{d:()=>a});const a={ukuji:{kujira_mars:{chain:"mars-1",portId:"transfer",channelId:"channel-55",address:"ukuji",id:"05f7e1b0-9ce0-4d98-b5e2-181b348b0096"},mars_kujira:{chain:"kaiyo-1",portId:"transfer",channelId:"channel-0",address:"ibc/90F27756D300141BDF07B83E65401BDC58C05269B9BAE3ECB0B20FAB166BCF8F",id:"05f7e1b0-9ce0-4d98-b5e2-181b348b0096"},kujira_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-9",address:"ukuji",id:"05f7e1b0-9ce0-4d98-b5e2-181b348b0096"},axelar_kujira:{chain:"kaiyo-1",portId:"transfer",channelId:"channel-14",address:"ibc/1EDB735A58AA984F6FF11E332077D8A05D5E70E355427C2CF419BD1566FC1E2C",id:"05f7e1b0-9ce0-4d98-b5e2-181b348b0096"},kujira_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-3",address:"ukuji",id:"05f7e1b0-9ce0-4d98-b5e2-181b348b0096"},osmosis_kujira:{chain:"kaiyo-1",portId:"transfer",channelId:"channel-259",address:"ibc/BB6BCDB515050BAE97516111873CCD7BCF1FD0CCB723CC12F3C4F704D6C646CE",id:"05f7e1b0-9ce0-4d98-b5e2-181b348b0096"}},uusdc:{osmosis_mars:{chain:"mars-1",portId:"transfer",channelId:"channel-557",address:"uusdc",id:"a2223686-e98c-4542-87bc-282c6fa70b40"},mars_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-1",address:"ibc/FA7775734CC73176B7425910DE001A1D2AD9B6D9E93129A5D0750EAD13E4E63A",id:"a2223686-e98c-4542-87bc-282c6fa70b40"},axelar_stargaze:{chain:"stargaze-1",portId:"transfer",channelId:"channel-18",address:"uusdc",id:"a2223686-e98c-4542-87bc-282c6fa70b40"},stargaze_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-50",address:"ibc/96274E25174EE93314D8B5636D2D2F70963E207C22F643EC41949A3CBEDA4C72",id:"a2223686-e98c-4542-87bc-282c6fa70b40"},axelar_crescent:{chain:"crescent-1",portId:"transfer",channelId:"channel-7",address:"uusdc",id:"a2223686-e98c-4542-87bc-282c6fa70b40"},crescent_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-4",address:"ibc/BFF0D3805B50D93E2FA5C0B2DDF7E0B30A631076CD80BC12A48C0E95404B4A41",id:"a2223686-e98c-4542-87bc-282c6fa70b40"},axelar_stride:{chain:"stride-1",portId:"transfer",channelId:"channel-64",address:"uusdc",id:"a2223686-e98c-4542-87bc-282c6fa70b40"},stride_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-69",address:"ibc/5FA12AB6B23F7FC00BFBA3B26E320C91226BF88CC17DA5E088013252C91AEAD1",id:"a2223686-e98c-4542-87bc-282c6fa70b40"},axelar_kujira:{chain:"kaiyo-1",portId:"transfer",channelId:"channel-14",address:"uusdc",id:"a2223686-e98c-4542-87bc-282c6fa70b40"},kujira_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-9",address:"ibc/295548A78785A1007F232DE286149A6FF512F180AF5657780FC89C009E2C348F",id:"a2223686-e98c-4542-87bc-282c6fa70b40"},axelar_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-3",address:"uusdc",id:"a2223686-e98c-4542-87bc-282c6fa70b40"},osmosis_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-208",address:"ibc/D189335C6E4A68B513C10AB227BF1C1D38C746766278BA3EEB4FB14124F1D858",id:"a2223686-e98c-4542-87bc-282c6fa70b40"}},uatom:{cosmoshub_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-293",address:"uatom",id:"ffd6b64f-ce52-455b-8eb5-250e76d8fc4c"},axelar_cosmoshub:{chain:"cosmoshub-4",portId:"transfer",channelId:"channel-2",address:"ibc/9117A26BA81E29FA4F78F57DC2BD90CD3D26848101BA880445F119B22A1E254E",id:"ffd6b64f-ce52-455b-8eb5-250e76d8fc4c"},osmosis_mars:{chain:"mars-1",portId:"transfer",channelId:"channel-557",address:"ibc/27394FB092D2ECCD56123C74F36E4C1F926001CEADA9CA97EA622B25F41E5EB2",id:"ffd6b64f-ce52-455b-8eb5-250e76d8fc4c"},mars_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-1",address:"ibc/FA0006F056DB6719B8C16C551FC392B62F5729978FC0B125AC9A432DBB2AA1A5",id:"ffd6b64f-ce52-455b-8eb5-250e76d8fc4c"},cosmoshub_kujira:{chain:"kaiyo-1",portId:"transfer",channelId:"channel-343",address:"uatom",id:"ffd6b64f-ce52-455b-8eb5-250e76d8fc4c"},kujira_cosmoshub:{chain:"cosmoshub-4",portId:"transfer",channelId:"channel-0",address:"ibc/27394FB092D2ECCD56123C74F36E4C1F926001CEADA9CA97EA622B25F41E5EB2",id:"ffd6b64f-ce52-455b-8eb5-250e76d8fc4c"},cosmoshub_akash:{chain:"akashnet-2",portId:"transfer",channelId:"channel-184",address:"uatom",id:"ffd6b64f-ce52-455b-8eb5-250e76d8fc4c"},akash_cosmoshub:{chain:"cosmoshub-4",portId:"transfer",channelId:"channel-17",address:"ibc/2E5D0AC026AC1AFA65A23023BA4F24BB8DDF94F118EDC0BAD6F625BFC557CDED",id:"ffd6b64f-ce52-455b-8eb5-250e76d8fc4c"},cosmoshub_stride:{chain:"stride-1",portId:"transfer",channelId:"channel-391",address:"uatom",id:"ffd6b64f-ce52-455b-8eb5-250e76d8fc4c"},stride_cosmoshub:{chain:"cosmoshub-4",portId:"transfer",channelId:"channel-0",address:"ibc/27394FB092D2ECCD56123C74F36E4C1F926001CEADA9CA97EA622B25F41E5EB2",id:"ffd6b64f-ce52-455b-8eb5-250e76d8fc4c"},cosmoshub_kava:{chain:"kava_2222-10",portId:"transfer",channelId:"channel-277",address:"uatom",id:"ffd6b64f-ce52-455b-8eb5-250e76d8fc4c"},kava_cosmoshub:{chain:"cosmoshub-4",portId:"transfer",channelId:"channel-0",address:"ibc/27394FB092D2ECCD56123C74F36E4C1F926001CEADA9CA97EA622B25F41E5EB2",id:"ffd6b64f-ce52-455b-8eb5-250e76d8fc4c"},cosmoshub_crescent:{chain:"crescent-1",portId:"transfer",channelId:"channel-326",address:"uatom",id:"ffd6b64f-ce52-455b-8eb5-250e76d8fc4c"},crescent_cosmoshub:{chain:"cosmoshub-4",portId:"transfer",channelId:"channel-1",address:"ibc/C4CFF46FD6DE35CA4CF4CE031E643C8FDC9BA4B99AE598E9B0ED98FE3A2319F9",id:"ffd6b64f-ce52-455b-8eb5-250e76d8fc4c"},cosmoshub_cronos:{chain:"crypto-org-chain-mainnet-1",portId:"transfer",channelId:"channel-187",address:"uatom",id:"ffd6b64f-ce52-455b-8eb5-250e76d8fc4c"},cronos_cosmoshub:{chain:"cosmoshub-4",portId:"transfer",channelId:"channel-27",address:"ibc/B5919B1B65A79F595F71D2E8306FD1FB70B969A268230E745A6DBE86F1060D58",id:"ffd6b64f-ce52-455b-8eb5-250e76d8fc4c"},cosmoshub_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-141",address:"uatom",id:"ffd6b64f-ce52-455b-8eb5-250e76d8fc4c"},osmosis_cosmoshub:{chain:"cosmoshub-4",portId:"transfer",channelId:"channel-0",address:"ibc/27394FB092D2ECCD56123C74F36E4C1F926001CEADA9CA97EA622B25F41E5EB2",id:"ffd6b64f-ce52-455b-8eb5-250e76d8fc4c"}},umars:{mars_crescent:{chain:"crescent-1",portId:"transfer",channelId:"channel-5",address:"umars",id:"15c7812a-e4de-4c0c-bfee-1e25194b343c"},crescent_mars:{chain:"mars-1",portId:"transfer",channelId:"channel-35",address:"ibc/10A0DD366A472B098DFD93FBAE62E65DA387F314872C4AD3AE43185154738D8D",id:"15c7812a-e4de-4c0c-bfee-1e25194b343c"},mars_kujira:{chain:"kaiyo-1",portId:"transfer",channelId:"channel-0",address:"umars",id:"15c7812a-e4de-4c0c-bfee-1e25194b343c"},kujira_mars:{chain:"mars-1",portId:"transfer",channelId:"channel-55",address:"ibc/DBF6ABDB5F3D4267C039967515594453F4A31007FD838A566F563A01D2C2FB80",id:"15c7812a-e4de-4c0c-bfee-1e25194b343c"},mars_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-1",address:"umars",id:"15c7812a-e4de-4c0c-bfee-1e25194b343c"},osmosis_mars:{chain:"mars-1",portId:"transfer",channelId:"channel-557",address:"ibc/573FCD90FACEE750F55A8864EF7D38265F07E5A9273FA0E8DAFD39951332B580",id:"15c7812a-e4de-4c0c-bfee-1e25194b343c"}},uosmo:{osmosis_crescent:{chain:"crescent-1",portId:"transfer",channelId:"channel-297",address:"uosmo",id:"2f8b46c7-0d42-4c89-863c-efddedd00cfa"},crescent_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-9",address:"ibc/B4F8297D4C270E82BDF11D51FD51A9FD23B0958B98B1E08346477452119E7D70",id:"2f8b46c7-0d42-4c89-863c-efddedd00cfa"},osmosis_stargaze:{chain:"stargaze-1",portId:"transfer",channelId:"channel-75",address:"uosmo",id:"2f8b46c7-0d42-4c89-863c-efddedd00cfa"},stargaze_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-0",address:"ibc/ED07A3391A112B175915CD8FAF43A2DA8E4790EDE12566649D0C2F97716B8518",id:"2f8b46c7-0d42-4c89-863c-efddedd00cfa"},osmosis_mars:{chain:"mars-1",portId:"transfer",channelId:"channel-557",address:"uosmo",id:"2f8b46c7-0d42-4c89-863c-efddedd00cfa"},mars_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-1",address:"ibc/0471F1C4E7AFD3F07702BEF6DC365268D64570F7C1FDC98EA6098DD6DE59817B",id:"2f8b46c7-0d42-4c89-863c-efddedd00cfa"},osmosis_akash:{chain:"akashnet-2",portId:"transfer",channelId:"channel-1",address:"uosmo",id:"2f8b46c7-0d42-4c89-863c-efddedd00cfa"},akash_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-9",address:"ibc/B4F8297D4C270E82BDF11D51FD51A9FD23B0958B98B1E08346477452119E7D70",id:"2f8b46c7-0d42-4c89-863c-efddedd00cfa"},osmosis_stride:{chain:"stride-1",portId:"transfer",channelId:"channel-326",address:"uosmo",id:"2f8b46c7-0d42-4c89-863c-efddedd00cfa"},stride_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-5",address:"ibc/D24B4564BCD51D3D02D9987D92571EAC5915676A9BD6D9B0C1D0254CB8A5EA34",id:"2f8b46c7-0d42-4c89-863c-efddedd00cfa"},osmosis_kujira:{chain:"kaiyo-1",portId:"transfer",channelId:"channel-259",address:"uosmo",id:"2f8b46c7-0d42-4c89-863c-efddedd00cfa"},kujira_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-3",address:"ibc/47BD209179859CDE4A2806763D7189B6E6FE13A17880FE2B42DE1E6C1E329E23",id:"2f8b46c7-0d42-4c89-863c-efddedd00cfa"},osmosis_cronos:{chain:"crypto-org-chain-mainnet-1",portId:"transfer",channelId:"channel-5",address:"uosmo",id:"2f8b46c7-0d42-4c89-863c-efddedd00cfa"},cronos_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-10",address:"ibc/376222D6D9DAE23092E29740E56B758580935A6D77C24C2ABD57A6A78A1F3955",id:"2f8b46c7-0d42-4c89-863c-efddedd00cfa"},osmosis_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-208",address:"uosmo",id:"2f8b46c7-0d42-4c89-863c-efddedd00cfa"},axelar_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-3",address:"ibc/47BD209179859CDE4A2806763D7189B6E6FE13A17880FE2B42DE1E6C1E329E23",id:"2f8b46c7-0d42-4c89-863c-efddedd00cfa"}},uion:{osmosis_juno:{chain:"juno-1",portId:"transfer",channelId:"channel-42",address:"uion",id:"61933d85-6010-46cf-8f52-2ed254ee7a0c"},juno_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-0",address:"ibc/F7E92EE59B5428793F3EF5C1A4CB2494F61A9D0C9A69469D02390714A1372E16",id:"61933d85-6010-46cf-8f52-2ed254ee7a0c"},osmosis_akash:{chain:"akashnet-2",portId:"transfer",channelId:"channel-1",address:"uion",id:"61933d85-6010-46cf-8f52-2ed254ee7a0c"},akash_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-9",address:"ibc/AAFAD8AC1A29CDA9985742B9DE3C32C1163798919C0B3A4C339A70D5F49D1E15",id:"61933d85-6010-46cf-8f52-2ed254ee7a0c"},osmosis_stargaze:{chain:"stargaze-1",portId:"transfer",channelId:"channel-75",address:"uion",id:"61933d85-6010-46cf-8f52-2ed254ee7a0c"},stargaze_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-0",address:"ibc/F7E92EE59B5428793F3EF5C1A4CB2494F61A9D0C9A69469D02390714A1372E16",id:"61933d85-6010-46cf-8f52-2ed254ee7a0c"},osmosis_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-208",address:"uion",id:"61933d85-6010-46cf-8f52-2ed254ee7a0c"},axelar_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-3",address:"ibc/6CDA7F7E4DDB86FD275A986E78F13DF2FC500E3FEC2149E2215061FA51BB8C5D",id:"61933d85-6010-46cf-8f52-2ed254ee7a0c"},osmosis_cronos:{chain:"crypto-org-chain-mainnet-1",portId:"transfer",channelId:"channel-5",address:"uion",id:"61933d85-6010-46cf-8f52-2ed254ee7a0c"},cronos_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-10",address:"ibc/0433997003A2CFE10E483B93743BEC37F2F13B89854FD69599482E6DB8E6CE22",id:"61933d85-6010-46cf-8f52-2ed254ee7a0c"}},"wbtc-satoshi":{axelar_kujira:{chain:"kaiyo-1",portId:"transfer",channelId:"channel-14",address:"wbtc-satoshi",id:"95e6b751-5241-4924-9033-01006bc44f39"},kujira_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-9",address:"ibc/301DAF9CB0A9E247CD478533EF0E21F48FF8118C4A51F77C8BC3EB70E5566DBC",id:"95e6b751-5241-4924-9033-01006bc44f39"},axelar_crescent:{chain:"crescent-1",portId:"transfer",channelId:"channel-7",address:"wbtc-satoshi",id:"95e6b751-5241-4924-9033-01006bc44f39"},crescent_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-4",address:"ibc/7FFC60524C4513A3A8E0A407CC89BFF5A861EC624209D72EB26FC10ADAEBA70E",id:"95e6b751-5241-4924-9033-01006bc44f39"},axelar_stargaze:{chain:"stargaze-1",portId:"transfer",channelId:"channel-18",address:"wbtc-satoshi",id:"95e6b751-5241-4924-9033-01006bc44f39"},stargaze_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-50",address:"ibc/DE68EAF973E2FFCFB42931B578A4E719DC61A93C5C6F921504BCA4DD5A0E494D",id:"95e6b751-5241-4924-9033-01006bc44f39"},axelar_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-3",address:"wbtc-satoshi",id:"95e6b751-5241-4924-9033-01006bc44f39"},osmosis_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-208",address:"ibc/D1542AA8762DB13087D8364F3EA6509FD6F009A34F00426AF9E4F9FA85CBBF1F",id:"95e6b751-5241-4924-9033-01006bc44f39"}},ujuno:{juno_kujira:{chain:"kaiyo-1",portId:"transfer",channelId:"channel-87",address:"ujuno",id:"074045f0-3f64-4fbc-a76e-b30a4ea51034"},kujira_juno:{chain:"juno-1",portId:"transfer",channelId:"channel-1",address:"ibc/EFF323CC632EC4F747C61BCE238A758EFDB7699C3226565F7C20DA06509D59A5",id:"074045f0-3f64-4fbc-a76e-b30a4ea51034"},juno_akash:{chain:"akashnet-2",portId:"transfer",channelId:"channel-29",address:"ujuno",id:"074045f0-3f64-4fbc-a76e-b30a4ea51034"},akash_juno:{chain:"juno-1",portId:"transfer",channelId:"channel-35",address:"ibc/1849A429022CBAAB619074CA4412D0016F262218BE6DD828BA8A3DD97D6B52BB",id:"074045f0-3f64-4fbc-a76e-b30a4ea51034"},juno_crescent:{chain:"crescent-1",portId:"transfer",channelId:"channel-81",address:"ujuno",id:"074045f0-3f64-4fbc-a76e-b30a4ea51034"},crescent_juno:{chain:"juno-1",portId:"transfer",channelId:"channel-3",address:"ibc/C814F0B662234E24248AE3B2FE2C1B54BBAF12934B757F6E7BC5AEC119963895",id:"074045f0-3f64-4fbc-a76e-b30a4ea51034"},juno_stride:{chain:"stride-1",portId:"transfer",channelId:"channel-139",address:"ujuno",id:"074045f0-3f64-4fbc-a76e-b30a4ea51034"},stride_juno:{chain:"juno-1",portId:"transfer",channelId:"channel-24",address:"ibc/DA356E369C3E5CF6A9F1DCD99CE8ED55FBD595E676A5CF033CE784C060492D5A",id:"074045f0-3f64-4fbc-a76e-b30a4ea51034"},juno_stargaze:{chain:"stargaze-1",portId:"transfer",channelId:"channel-20",address:"ujuno",id:"074045f0-3f64-4fbc-a76e-b30a4ea51034"},stargaze_juno:{chain:"juno-1",portId:"transfer",channelId:"channel-5",address:"ibc/448C1061CE97D86CC5E86374CD914870FB8EBA16C58661B5F1D3F46729A2422D",id:"074045f0-3f64-4fbc-a76e-b30a4ea51034"},juno_mars:{chain:"mars-1",portId:"transfer",channelId:"channel-209",address:"ujuno",id:"074045f0-3f64-4fbc-a76e-b30a4ea51034"},mars_juno:{chain:"juno-1",portId:"transfer",channelId:"channel-3",address:"ibc/C814F0B662234E24248AE3B2FE2C1B54BBAF12934B757F6E7BC5AEC119963895",id:"074045f0-3f64-4fbc-a76e-b30a4ea51034"},juno_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-71",address:"ujuno",id:"074045f0-3f64-4fbc-a76e-b30a4ea51034"},axelar_juno:{chain:"juno-1",portId:"transfer",channelId:"channel-4",address:"ibc/9E3EB38E5E157AEBFF4A8EAC66E654BC8ECFCB1F758F4D1C0F2D65945E9E2935",id:"074045f0-3f64-4fbc-a76e-b30a4ea51034"},juno_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-0",address:"ujuno",id:"074045f0-3f64-4fbc-a76e-b30a4ea51034"},osmosis_juno:{chain:"juno-1",portId:"transfer",channelId:"channel-42",address:"ibc/46B44899322F3CD854D2D46DEEF881958467CDD4B3B10086DA49296BBED94BED",id:"074045f0-3f64-4fbc-a76e-b30a4ea51034"}},basecro:{cronos_kujira:{chain:"kaiyo-1",portId:"transfer",channelId:"channel-56",address:"basecro",id:"da820576-17ff-436e-b626-9d619e1fe6c2"},kujira_cronos:{chain:"crypto-org-chain-mainnet-1",portId:"transfer",channelId:"channel-6",address:"ibc/BBC45F1B65B6D3C11C3C56A9428D38C3A8D03944473791C52DFB7CD3F8342CBC",id:"da820576-17ff-436e-b626-9d619e1fe6c2"},cronos_crescent:{chain:"crescent-1",portId:"transfer",channelId:"channel-61",address:"basecro",id:"da820576-17ff-436e-b626-9d619e1fe6c2"},crescent_cronos:{chain:"crypto-org-chain-mainnet-1",portId:"transfer",channelId:"channel-40",address:"ibc/5EDC10227E40B52D893F5A26C107E2A338C4A643615C10B356DC62B5F4FE1DB1",id:"da820576-17ff-436e-b626-9d619e1fe6c2"},osmosis_stride:{chain:"stride-1",portId:"transfer",channelId:"channel-326",address:"ibc/E6931F78057F7CC5DA0FD6CEF82FF39373A6E0452BF1FD76910B93292CF356C1",id:"da820576-17ff-436e-b626-9d619e1fe6c2"},stride_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-5",address:"ibc/2475196A6E87EEA47C8878EDE62E99C0FAA14A81B83165E4121E776622EF59BE",id:"da820576-17ff-436e-b626-9d619e1fe6c2"},cronos_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-10",address:"basecro",id:"da820576-17ff-436e-b626-9d619e1fe6c2"},osmosis_cronos:{chain:"crypto-org-chain-mainnet-1",portId:"transfer",channelId:"channel-5",address:"ibc/E6931F78057F7CC5DA0FD6CEF82FF39373A6E0452BF1FD76910B93292CF356C1",id:"da820576-17ff-436e-b626-9d619e1fe6c2"}},usdx:{kava_akash:{chain:"akashnet-2",portId:"transfer",channelId:"channel-5",address:"usdx",id:"afc72b62-eb7a-498a-8991-f12bd6e41a64"},akash_kava:{chain:"kava_2222-10",portId:"transfer",channelId:"channel-37",address:"ibc/F5CCE0AC7102584371EBA8A2C7B1094EAE554994B91B0511581BD2AB0237ED62",id:"afc72b62-eb7a-498a-8991-f12bd6e41a64"},kava_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-1",address:"usdx",id:"afc72b62-eb7a-498a-8991-f12bd6e41a64"},osmosis_kava:{chain:"kava_2222-10",portId:"transfer",channelId:"channel-143",address:"ibc/C78F65E1648A3DFE0BAEB6C4CDA69CC2A75437F1793C0E6386DFDA26393790AE",id:"afc72b62-eb7a-498a-8991-f12bd6e41a64"}},swp:{kava_akash:{chain:"akashnet-2",portId:"transfer",channelId:"channel-5",address:"swp",id:"ba1fc92a-1e05-4d20-9b94-4b0ccffab82f"},akash_kava:{chain:"kava_2222-10",portId:"transfer",channelId:"channel-37",address:"ibc/3A67DDC3D4035596F1E4D5B563F434ED3FB0CD06169AE4779FB224CE5EF757A7",id:"ba1fc92a-1e05-4d20-9b94-4b0ccffab82f"},kava_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-1",address:"swp",id:"ba1fc92a-1e05-4d20-9b94-4b0ccffab82f"},osmosis_kava:{chain:"kava_2222-10",portId:"transfer",channelId:"channel-143",address:"ibc/70CF1A54E23EA4E480DEDA9E12082D3FD5684C3483CBDCE190C5C807227688C5",id:"ba1fc92a-1e05-4d20-9b94-4b0ccffab82f"}},ucre:{crescent_mars:{chain:"mars-1",portId:"transfer",channelId:"channel-35",address:"ucre",id:"ac38d061-5f63-4ef3-8923-187cc8eaa94b"},mars_crescent:{chain:"crescent-1",portId:"transfer",channelId:"channel-5",address:"ibc/923A25D77C573CC5B74BF8ECE7EDB1D27EE9B77F84892BBBF8CA51BD6FFFA397",id:"ac38d061-5f63-4ef3-8923-187cc8eaa94b"},crescent_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-4",address:"ucre",id:"ac38d061-5f63-4ef3-8923-187cc8eaa94b"},axelar_crescent:{chain:"crescent-1",portId:"transfer",channelId:"channel-7",address:"ibc/B090DC21658BD57698522880590CA53947B8B09355764131AA94EC75517D46A5",id:"ac38d061-5f63-4ef3-8923-187cc8eaa94b"},crescent_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-9",address:"ucre",id:"ac38d061-5f63-4ef3-8923-187cc8eaa94b"},osmosis_crescent:{chain:"crescent-1",portId:"transfer",channelId:"channel-297",address:"ibc/5A7C219BA5F7582B99629BA3B2A01A61BFDA0F6FD1FE95B5366F7334C4BC0580",id:"ac38d061-5f63-4ef3-8923-187cc8eaa94b"}},uusdt:{axelar_crescent:{chain:"crescent-1",portId:"transfer",channelId:"channel-7",address:"uusdt",id:"f9514886-d743-4227-9c7e-5a08388406ce"},crescent_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-4",address:"ibc/11FB4C0BC2FCCFF2B01976C0070F468D82DAE8D1F565F80E64063BFDBEE4A5BD",id:"f9514886-d743-4227-9c7e-5a08388406ce"},axelar_kujira:{chain:"kaiyo-1",portId:"transfer",channelId:"channel-14",address:"uusdt",id:"f9514886-d743-4227-9c7e-5a08388406ce"},kujira_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-9",address:"ibc/F2331645B9683116188EF36FC04A809C28BD36B54555E8705A37146D0182F045",id:"f9514886-d743-4227-9c7e-5a08388406ce"},axelar_stargaze:{chain:"stargaze-1",portId:"transfer",channelId:"channel-18",address:"uusdt",id:"f9514886-d743-4227-9c7e-5a08388406ce"},stargaze_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-50",address:"ibc/68C6D7F60534941CDE1F276A70AB85ED1E826EA096272054FE93828D2343184F",id:"f9514886-d743-4227-9c7e-5a08388406ce"},axelar_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-3",address:"uusdt",id:"f9514886-d743-4227-9c7e-5a08388406ce"},osmosis_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-208",address:"ibc/8242AD24008032E457D2E12D46588FD39FB54FB29680C6C7663D296B383C37C4",id:"f9514886-d743-4227-9c7e-5a08388406ce"}},staevmos:{stride_crescent:{chain:"crescent-1",portId:"transfer",channelId:"channel-51",address:"staevmos",id:"39350001-586c-4db0-af99-a026505db833"},crescent_stride:{chain:"stride-1",portId:"transfer",channelId:"channel-29",address:"ibc/4171A6F59F8A708D807E03B43FA0E16EC7041C189557B7A8E519757424367D41",id:"39350001-586c-4db0-af99-a026505db833"}},ustars:{stargaze_kujira:{chain:"kaiyo-1",portId:"transfer",channelId:"channel-49",address:"ustars",id:"c19f3fdc-c1c1-4392-9230-6301cc03b37e"},kujira_stargaze:{chain:"stargaze-1",portId:"transfer",channelId:"channel-7",address:"ibc/4F393C3FCA4190C0A6756CE7F6D897D5D1BE57D6CCB80D0BC87393566A7B6602",id:"c19f3fdc-c1c1-4392-9230-6301cc03b37e"},stargaze_stride:{chain:"stride-1",portId:"transfer",channelId:"channel-106",address:"ustars",id:"c19f3fdc-c1c1-4392-9230-6301cc03b37e"},stride_stargaze:{chain:"stargaze-1",portId:"transfer",channelId:"channel-19",address:"ibc/7EAE5BEF3A26B64AFBD89828AFDDB1DC7024A0276D22745201632C40E6E634D0",id:"c19f3fdc-c1c1-4392-9230-6301cc03b37e"},stargaze_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-50",address:"ustars",id:"c19f3fdc-c1c1-4392-9230-6301cc03b37e"},axelar_stargaze:{chain:"stargaze-1",portId:"transfer",channelId:"channel-18",address:"ibc/A139C0E0B5E87CBA8EAEEB12B9BEE13AC7C814CFBBFA87BBCADD67E31003466C",id:"c19f3fdc-c1c1-4392-9230-6301cc03b37e"},stargaze_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-0",address:"ustars",id:"c19f3fdc-c1c1-4392-9230-6301cc03b37e"},osmosis_stargaze:{chain:"stargaze-1",portId:"transfer",channelId:"channel-75",address:"ibc/987C17B11ABC2B20019178ACE62929FE9840202CE79498E29FE8E5CB02B7C0A4",id:"c19f3fdc-c1c1-4392-9230-6301cc03b37e"}},"dot-planck":{axelar_kujira:{chain:"kaiyo-1",portId:"transfer",channelId:"channel-14",address:"dot-planck",id:"283b3ab9-53fe-498d-b870-760749073183"},kujira_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-9",address:"ibc/B37E4D9FB5B30F3E1E20A4B2DE2A005E584C5C822C44527546556AE2470B4539",id:"283b3ab9-53fe-498d-b870-760749073183"},axelar_crescent:{chain:"crescent-1",portId:"transfer",channelId:"channel-7",address:"dot-planck",id:"283b3ab9-53fe-498d-b870-760749073183"},crescent_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-4",address:"ibc/3208C8E45C27903988E437162134A172880BE112C0530B86117FB5DA7A5DF8B9",id:"283b3ab9-53fe-498d-b870-760749073183"},axelar_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-3",address:"dot-planck",id:"283b3ab9-53fe-498d-b870-760749073183"},osmosis_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-208",address:"ibc/3FF92D26B407FD61AE95D975712A7C319CDE28DE4D80BDC9978D935932B991D7",id:"283b3ab9-53fe-498d-b870-760749073183"}},hard:{kava_akash:{chain:"akashnet-2",portId:"transfer",channelId:"channel-5",address:"hard",id:"613e15e9-6390-40e1-89cd-b81d84d26b83"},akash_kava:{chain:"kava_2222-10",portId:"transfer",channelId:"channel-37",address:"ibc/9554B3A33B18F2FA7492E2EBB4D128FD98D812BB182B12CC6BCB5E94161E2C10",id:"613e15e9-6390-40e1-89cd-b81d84d26b83"},kava_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-1",address:"hard",id:"613e15e9-6390-40e1-89cd-b81d84d26b83"},osmosis_kava:{chain:"kava_2222-10",portId:"transfer",channelId:"channel-143",address:"ibc/D6C28E07F7343360AC41E15DDD44D79701DDCA2E0C2C41279739C8D4AE5264BC",id:"613e15e9-6390-40e1-89cd-b81d84d26b83"}},ukava:{kava_akash:{chain:"akashnet-2",portId:"transfer",channelId:"channel-5",address:"ukava",id:"9c49c5e7-ca61-44ad-8191-fecca04effbd"},akash_kava:{chain:"kava_2222-10",portId:"transfer",channelId:"channel-37",address:"ibc/B567D2C79ED9D9D78B5761E8E4D261C7013E349518FD499D42B2BD1B81266DD6",id:"9c49c5e7-ca61-44ad-8191-fecca04effbd"},kava_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-1",address:"ukava",id:"9c49c5e7-ca61-44ad-8191-fecca04effbd"},osmosis_kava:{chain:"kava_2222-10",portId:"transfer",channelId:"channel-143",address:"ibc/57AA1A70A4BC9769C525EBF6386F7A21536E04A79D62E1981EFCEF9428EBB205",id:"9c49c5e7-ca61-44ad-8191-fecca04effbd"}},uaxl:{axelar_crescent:{chain:"crescent-1",portId:"transfer",channelId:"channel-7",address:"uaxl",id:"a9075579-3145-4e6d-b406-4668a7be7039"},crescent_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-4",address:"ibc/0634D0993744740D675AD01E81156EAC945AEAAE17C074918DC7FF52F41B263E",id:"a9075579-3145-4e6d-b406-4668a7be7039"},axelar_kujira:{chain:"kaiyo-1",portId:"transfer",channelId:"channel-14",address:"uaxl",id:"a9075579-3145-4e6d-b406-4668a7be7039"},kujira_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-9",address:"ibc/C01154C2547F4CB10A985EA78E7CD4BA891C1504360703A37E1D7043F06B5E1F",id:"a9075579-3145-4e6d-b406-4668a7be7039"},axelar_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-3",address:"uaxl",id:"a9075579-3145-4e6d-b406-4668a7be7039"},osmosis_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-208",address:"ibc/903A61A498756EA560B85A85132D3AEE21B5DEDD41213725D22ABF276EA6945E",id:"a9075579-3145-4e6d-b406-4668a7be7039"}},stuatom:{stride_crescent:{chain:"crescent-1",portId:"transfer",channelId:"channel-51",address:"stuatom",id:"1d6f8869-0fcd-42b2-a8c2-f6e0e4b434bb"},crescent_stride:{chain:"stride-1",portId:"transfer",channelId:"channel-29",address:"ibc/D64F87FAE0B35C1954DD7921BA7A2939705DE77CBF72B8002F2E3552EDE4DE52",id:"1d6f8869-0fcd-42b2-a8c2-f6e0e4b434bb"},stride_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-69",address:"stuatom",id:"1d6f8869-0fcd-42b2-a8c2-f6e0e4b434bb"},axelar_stride:{chain:"stride-1",portId:"transfer",channelId:"channel-64",address:"ibc/CFB9D610B7BB02E8E6FDB0AF87FCADDF97687A3F13E76AC624C500E54335ADAA",id:"1d6f8869-0fcd-42b2-a8c2-f6e0e4b434bb"},stride_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-5",address:"stuatom",id:"1d6f8869-0fcd-42b2-a8c2-f6e0e4b434bb"},osmosis_stride:{chain:"stride-1",portId:"transfer",channelId:"channel-326",address:"ibc/C140AFD542AE77BD7DCC83F13FDD8C5E5BB8C4929785E6EC2F4C636F98F17901",id:"1d6f8869-0fcd-42b2-a8c2-f6e0e4b434bb"}},uakt:{akash_kava:{chain:"kava_2222-10",portId:"transfer",channelId:"channel-37",address:"uakt",id:"e807f150-838c-459e-bd10-6454168789ed"},kava_akash:{chain:"akashnet-2",portId:"transfer",channelId:"channel-5",address:"ibc/799FDD409719A1122586A629AE8FCA17380351A51C1F47A80A1B8E7F2A491098",id:"e807f150-838c-459e-bd10-6454168789ed"},akash_juno:{chain:"juno-1",portId:"transfer",channelId:"channel-35",address:"uakt",id:"e807f150-838c-459e-bd10-6454168789ed"},juno_akash:{chain:"akashnet-2",portId:"transfer",channelId:"channel-29",address:"ibc/DFC6F33796D5D0075C5FB54A4D7B8E76915ACF434CB1EE2A1BA0BB8334E17C3A",id:"e807f150-838c-459e-bd10-6454168789ed"},akash_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-9",address:"uakt",id:"e807f150-838c-459e-bd10-6454168789ed"},osmosis_akash:{chain:"akashnet-2",portId:"transfer",channelId:"channel-1",address:"ibc/1480B8FD20AD5FCAE81EA87584D269547DD4D436843C1D20F15E00EB64743EF4",id:"e807f150-838c-459e-bd10-6454168789ed"}},ubcre:{crescent_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-4",address:"ubcre",id:"40ea451d-a6d5-4ed6-bb68-7d11f9ee89ea"},axelar_crescent:{chain:"crescent-1",portId:"transfer",channelId:"channel-7",address:"ibc/FC48493C53C0A6EF28A191F42A65500643DDF8A0B5B89ADF3FC5FCB60AA6D92A",id:"40ea451d-a6d5-4ed6-bb68-7d11f9ee89ea"}},"avalanche-uusdc":{axelar_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-3",address:"avalanche-uusdc",id:"a2223686-e98c-4542-87bc-282c6fa70b40"},osmosis_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-208",address:"ibc/F17C9CA112815613C5B6771047A093054F837C3020CBA59DFFD9D780A8B2984C",id:"a2223686-e98c-4542-87bc-282c6fa70b40"}},"factory:kujira1qk00h5atutpsv900x202pxx42npjr9thg58dnqpa72f2p7m2luase444a7:uusk":{kujira_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-3",address:"factory/kujira1qk00h5atutpsv900x202pxx42npjr9thg58dnqpa72f2p7m2luase444a7/uusk",id:"a96cdf0f-eec1-4b87-8413-96047efae40a"},osmosis_kujira:{chain:"kaiyo-1",portId:"transfer",channelId:"channel-259",address:"ibc/44492EAB24B72E3FB59B9FA619A22337FB74F95D8808FE6BC78CC0E6C18DC2EC",id:"a96cdf0f-eec1-4b87-8413-96047efae40a"}},"polygon-uusdc":{axelar_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-3",address:"polygon-uusdc",id:"a2223686-e98c-4542-87bc-282c6fa70b40"},osmosis_axelar:{chain:"axelar-dojo-1",portId:"transfer",channelId:"channel-208",address:"ibc/231FD77ECCB2DB916D314019DA30FE013202833386B1908A191D16989AD80B5A",id:"a2223686-e98c-4542-87bc-282c6fa70b40"}},stuosmo:{stride_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-5",address:"stuosmo",id:"f601ce94-e102-4264-bbfa-10d4d638cca5"},osmosis_stride:{chain:"stride-1",portId:"transfer",channelId:"channel-326",address:"ibc/D176154B0C63D1F9C6DCFB4F70349EBF2E2B5A87A05902F57A6AE92B863E9AEC",id:"f601ce94-e102-4264-bbfa-10d4d638cca5"}},ustrd:{stride_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-5",address:"ustrd",id:"2d64779c-6c74-4ba8-bcc6-07e752280305"},osmosis_stride:{chain:"stride-1",portId:"transfer",channelId:"channel-326",address:"ibc/A8CA5EE328FA10C9519DF6057DA1F69682D28F7D0F5CCC7ECB72E3DCA2D157A4",id:"2d64779c-6c74-4ba8-bcc6-07e752280305"}},stujuno:{stride_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-5",address:"stujuno",id:"da6a71a3-3599-4b84-b768-48062ca94960"},osmosis_stride:{chain:"stride-1",portId:"transfer",channelId:"channel-326",address:"ibc/84502A75BCA4A5F68D464C00B3F610CE2585847D59B52E5FFB7C3C9D2DDCD3FE",id:"da6a71a3-3599-4b84-b768-48062ca94960"}},stustars:{stride_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-5",address:"stustars",id:"02b6ac68-5cf2-415f-b22a-c7de0614b8d6"},osmosis_stride:{chain:"stride-1",portId:"transfer",channelId:"channel-326",address:"ibc/5DD1F95ED336014D00CE2520977EC71566D282F9749170ADC83A392E0EA7426A",id:"02b6ac68-5cf2-415f-b22a-c7de0614b8d6"}},"erc20/tether/usdt":{kava_osmosis:{chain:"osmosis-1",portId:"transfer",channelId:"channel-1",address:"erc20/tether/usdt",id:"f9514886-d743-4227-9c7e-5a08388406ce"},osmosis_kava:{chain:"kava_2222-10",portId:"transfer",channelId:"channel-143",address:"ibc/4ABBEF4C8926DDDB320AE5188CFD63267ABBCEFC0583E4AE05D6E5AA2401DDAB",id:"f9514886-d743-4227-9c7e-5a08388406ce"}}}},596111:(e,t,n)=>{"use strict";n.d(t,{V:()=>c});var a=n(645722),r=n(847001),s=n(942274),o=Object.defineProperty,i=(e,t,n)=>(((e,t,n)=>{t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const l=class{constructor(){i(this,"bncClient"),this.bncClient=new a.KU({phrase:r.Z.get("EXAMPLE_BIP39"),network:s.Network.Mainnet}).getBncClient()}static getInstance(){return l.instance||(l.instance=new l),l.instance}};let d=l;i(d,"instance");const c=()=>d.getInstance().bncClient},245936:(e,t,n)=>{"use strict";n.a(e,(async(e,a)=>{try{n.d(t,{B4:()=>f,Hp:()=>h,LC:()=>g,Zb:()=>l,b$:()=>u,h4:()=>d,qp:()=>p,xu:()=>c});var r=n(818117),s=n(308787),o=n(876777),i=e([s]);s=(i.then?(await i)():i)[0];const l=(0,r.ZP)(s.FlexBox).attrs({alignItems:"flex-start"})`
  border-radius: 8px;
  width: 316px;
  padding: 16px;
  margin-bottom: 16px;
  background: ${o.wL.charcoal};
`,d=((0,r.ZP)(l)`
  width: 332px;
  margin-bottom: 0;
`,(0,r.ZP)(s.FlexBox).attrs({flexDirection:"row",alignItems:"center"})`
  width: 100%;
  ${({divider:e,theme:t})=>e&&`\n      padding-bottom: 16px;\n      border-bottom: 1px solid ${t.palette.container.divider};\n  `};
`),c=r.ZP.div`
  margin-right: 4px;
`,h=(r.ZP.img.attrs({alt:"Transaction icon"})`
  height: 24px;
  width: 24px;
`,(0,r.ZP)(s.FlexBox).attrs({justifyContent:"space-between",flexDirection:"row"})`
  padding-top: 16px;
  width: 100%;
`),u=(r.ZP.div`
  text-transform: uppercase;
  cursor: pointer;
`,(0,r.ZP)(s.FlexBox).attrs({justifyContent:"space-between",alignItems:"flex-start"})``),p=(0,r.ZP)(s.FlexBox).attrs({justifyContent:"space-between",alignItems:"flex-end",gap:8})``,f=((0,r.ZP)(p)``,(0,r.ZP)(s.FlexBox).attrs({flexDirection:"row",alignItems:"center",mt:4})``),g=r.ZP.img.attrs({alt:"Provider icon"})`
  height: 20px;
  width: 20px;
  margin-right: 8px;
  background: ${o.wL.white};
  border-radius: 4px;
  padding: 2px;
`;a()}catch(e){a(e)}}))},173431:(e,t,n)=>{"use strict";n.d(t,{SO:()=>o,j6:()=>i});var a=n(831352);n(834392),n(459457);n(357786).Ps`
  query getRoute(
    $srcToken: String!
    $destToken: String!
    $slippage: String!
    $addresses: [AddressRouteInputTypeV2!]!
    $destAddress: String!
    $amountSource: String!
    $infiniteApproval: Boolean
    $referral: ReferralInputType
    $isOptedIn: Boolean
  ) {
    routingV2 {
      routeV2(
        srcToken: $srcToken
        destToken: $destToken
        slippage: $slippage
        addresses: $addresses
        destAddress: $destAddress
        amountSource: $amountSource
        infiniteApproval: $infiniteApproval
        referral: $referral
        isOptedIn: $isOptedIn
      ) {
        addresses {
          chain
          address
        }
        isOptIn
        destAddress
        priceRate
        priceRateText
        priceImpact
        amountIn
        slippage
        gasPrices
        tradesRoute {
          provider {
            id
            name
            time
            icon
          }
          amountIn
          amountOut
          minAmountReceived
          assetIn {
            listProviders
            id
            asset {
              id
              name
              symbol
              contract
              image
              chain
            }
          }
          assetOut {
            listProviders
            id
            asset {
              id
              name
              symbol
              contract
              image
              chain
            }
          }
          fee {
            networkFeeDollar
            networkFeeAsset
            inboundFeeDollar
            inboundFeeAsset
            xdefiSwapFee
            xdefiSwapFeeDollar
            swapFee
            feeRateTransaction
          }
          reward {
            amount
            amountUsd
            asset {
              id
              listProviders
              asset {
                chain
                contract
                decimals
                symbol
                image
                id
              }
            }
          }
          referral {
            medium
            link
          }
          priceRateUsdAssetOut
          priceRateUsdAssetIn
          tradeType
        }
        errorBuildingRoute
      }
    }
  }
`;n(977710);var r=n(691438),s=(n(739989),n(626423));Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const o=e=>{switch(e){case"LTC":case"Litecoin":return r.J.Litecoin;case"BNB":case"BinanceChain":return r.J.Binance;case"THOR":case"THORChain":return r.J.Thorchain;case"ETH":case"Ethereum":case"POLYGON":case"Polygon":case"BSC":case"BinanceSmartChain":case"AURORA":case"Aurora":case"AVAX":case"Avalanche":case"FTM":case"Fantom":case"ARBITRUM":case"Arbitrum":case"GNOSIS":case"OPTIMISM":case"Optimism":case"KLAYTN":case"Klaytn":case"CRONOSEVM":case"CronosEVM":case"CANTO":case"CantoEVM":return r.J.Evm;case"BTC":case"Bitcoin":return r.J.Bitcoin;case"DOGE":case"Dogecoin":return r.J.Dogecoin;case"BCH":case"BitcoinCash":return r.J.BitcoinCash;case"SOL":case"Solana":return r.J.Solana;case"NEAR":case"Near":return r.J.Near;case"ATOM":case"Cosmos":case"COSMOS":case"cosmoshub":case"OSMO":case"Osmosis":case"OSMOSIS":case"AXL":case"Axelar":case"AXELAR":case"axelar":case"JUNO":case"Juno":case"juno":case"CRE":case"Crescent":case"CRESCENT":case"crescent":case"CRO":case"Cronos":case"CRONOS":case"cronos":case"STARS":case"Stargaze":case"STARGAZE":case"stargaze":case"KUJI":case"Kujira":case"KUJIRA":case"kujira":case"STRD":case"Stride":case"STRIDE":case"stride":case"MARS":case"Mars":case"mars":case"MarsProtocol":case"akash":case"AKASH":case"kava":return r.J.Cosmos;default:throw`unsupported chain ${e} in getChainTypeFromAssetChain`}},i=(e,t,n)=>[r.J.Evm,r.J.Cosmos].includes(e)?n.getChainControllerById((0,s.Bw)((e=>{switch(e){case"LTC":case"Litecoin":return a.yp.Litecoin;case"BNB":case"BinanceChain":return a.yp.Binance;case"THOR":case"THORChain":return a.yp.Thorchain;case"ETH":case"Ethereum":return a.yp.Ethereum;case"BSC":case"BinanceSmartChain":return a.yp.BinanceSmartChain;case"POLYGON":case"Polygon":return a.yp.Polygon;case"AURORA":case"Aurora":return a.yp.Aurora;case"BTC":case"Bitcoin":return a.yp.Bitcoin;case"DOGE":case"Dogecoin":return a.yp.Dogecoin;case"BCH":case"BitcoinCash":return a.yp.BitcoinCash;case"AVAX":case"Avalanche":return a.yp.Avalanche;case"FTM":case"Fantom":return a.yp.Fantom;case"ARBITRUM":case"Arbitrum":return a.yp.Arbitrum;case"SOL":case"Solana":return a.yp.Solana;case"COSMOS":case"Cosmos":case"cosmoshub":return a.yp.Cosmoshub;case"OSMOSIS":case"Osmosis":case"osmosis":return a.yp.Osmosis;case"AXELAR":case"axelar":case"Axelar":return a.yp.Axelar;case"CRESCENT":case"crescent":case"Crescent":return a.yp.Crescent;case"MARS":case"mars":case"Mars":case"MarsProtocol":return a.yp.Mars;case"AKASH":case"akash":case"Akash":return a.yp.Akash;case"KAVA":case"kava":case"Kava":return a.yp.Kava;case"STARGAZE":case"stargaze":case"Stargaze":return a.yp.Stargaze;case"JUNO":case"juno":case"Juno":return a.yp.Juno;case"STRIDE":case"stride":case"Stride":return a.yp.Stride;case"CRONOS":case"cronos":case"Cronos":return a.yp.Cronos;case"KUJIRA":case"kujira":case"Kujira":return a.yp.Kujira;case"NEAR":case"Near":return a.yp.Near;case"GNOSIS":case"Gnosis":return a.yp.Gnosis;case"OPTIMISM":case"Optimism":return a.yp.Optimism;case"KLAYTN":case"Klaytn":return a.yp.Klaytn;case"CRONOSEVM":case"CronosEVM":return a.yp.CronosEvm;case"CANTO":case"Canto":case"CantoEVM":return a.yp.CantoEvm;default:throw`unsupported chain ${e} in getNativelySupportedChainFromAssetChain`}})(t))):n.getFirstChainControllerByType(e)},24797:(e,t,n)=>{"use strict";n.d(t,{o:()=>h});var a=n(496486),r=Object.defineProperty,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&l(e,n,t[n]);if(s)for(var n of s(t))i.call(t,n)&&l(e,n,t[n]);return e},c=(e,t,n)=>new Promise(((a,r)=>{var s=e=>{try{i(n.next(e))}catch(e){r(e)}},o=e=>{try{i(n.throw(e))}catch(e){r(e)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,o);i((n=n.apply(e,t)).next())}));const h=(e,t,n,r=!1)=>c(void 0,null,(function*(){var s,o;const{after:i="",filter:l=null,queryOptions:c=null}=n||{},h=[];let u="";do{const n=d(d({page:d({first:1e3},u&&{after:u})},l&&{filter:l}),i&&{after:i}),{data:p,error:f}=yield e.query(d({variables:n,query:t},c||{}));if(f)throw f;const g=(0,a.head)((0,a.without)((0,a.keys)(p.assets),"__typename")),m=null==(s=p.assets[g])?void 0:s.page.pageInfo;if(u=m.hasNextPage?m.endCursor:"",r){const e=null==(o=p.assets[g])?void 0:o.page.edges.map((e=>e.node));h.push(...e)}}while(u);return h}))},228082:()=>{},890193:()=>{},743094:()=>{},594835:()=>{},771156:()=>{},283954:()=>{},850522:()=>{},966882:()=>{},112819:()=>{},479070:()=>{}}]);
//# sourceMappingURL=6025.bundle.js.map